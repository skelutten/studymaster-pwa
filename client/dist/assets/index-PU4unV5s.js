function Sp(i,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in i)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ta(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Cm(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var n=i.default;if(typeof n=="function"){var r=function s(){var l=!1;try{l=this instanceof s}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var l=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return i[s]}})}),r}var Yc={exports:{}},gi={},eu={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function jp(){if(Yh)return rt;Yh=1;var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function k(I){return I===null||typeof I!="object"?null:(I=x&&I[x]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function j(I,U,le){this.props=I,this.context=U,this.refs=S,this.updater=le||w}j.prototype.isReactComponent={},j.prototype.setState=function(I,U){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,U,"setState")},j.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function _(){}_.prototype=j.prototype;function E(I,U,le){this.props=I,this.context=U,this.refs=S,this.updater=le||w}var P=E.prototype=new _;P.constructor=E,C(P,j.prototype),P.isPureReactComponent=!0;var D=Array.isArray,M=Object.prototype.hasOwnProperty,z={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ne(I,U,le){var de,ie={},Ee=null,Ie=null;if(U!=null)for(de in U.ref!==void 0&&(Ie=U.ref),U.key!==void 0&&(Ee=""+U.key),U)M.call(U,de)&&!q.hasOwnProperty(de)&&(ie[de]=U[de]);var Pe=arguments.length-2;if(Pe===1)ie.children=le;else if(1<Pe){for(var De=Array(Pe),Ke=0;Ke<Pe;Ke++)De[Ke]=arguments[Ke+2];ie.children=De}if(I&&I.defaultProps)for(de in Pe=I.defaultProps,Pe)ie[de]===void 0&&(ie[de]=Pe[de]);return{$$typeof:i,type:I,key:Ee,ref:Ie,props:ie,_owner:z.current}}function ee(I,U){return{$$typeof:i,type:I.type,key:U,ref:I.ref,props:I.props,_owner:I._owner}}function fe(I){return typeof I=="object"&&I!==null&&I.$$typeof===i}function pe(I){var U={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(le){return U[le]})}var B=/\/+/g;function Z(I,U){return typeof I=="object"&&I!==null&&I.key!=null?pe(""+I.key):U.toString(36)}function T(I,U,le,de,ie){var Ee=typeof I;(Ee==="undefined"||Ee==="boolean")&&(I=null);var Ie=!1;if(I===null)Ie=!0;else switch(Ee){case"string":case"number":Ie=!0;break;case"object":switch(I.$$typeof){case i:case n:Ie=!0}}if(Ie)return Ie=I,ie=ie(Ie),I=de===""?"."+Z(Ie,0):de,D(ie)?(le="",I!=null&&(le=I.replace(B,"$&/")+"/"),T(ie,U,le,"",function(Ke){return Ke})):ie!=null&&(fe(ie)&&(ie=ee(ie,le+(!ie.key||Ie&&Ie.key===ie.key?"":(""+ie.key).replace(B,"$&/")+"/")+I)),U.push(ie)),1;if(Ie=0,de=de===""?".":de+":",D(I))for(var Pe=0;Pe<I.length;Pe++){Ee=I[Pe];var De=de+Z(Ee,Pe);Ie+=T(Ee,U,le,De,ie)}else if(De=k(I),typeof De=="function")for(I=De.call(I),Pe=0;!(Ee=I.next()).done;)Ee=Ee.value,De=de+Z(Ee,Pe++),Ie+=T(Ee,U,le,De,ie);else if(Ee==="object")throw U=String(I),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ie}function ue(I,U,le){if(I==null)return I;var de=[],ie=0;return T(I,de,"","",function(Ee){return U.call(le,Ee,ie++)}),de}function Te(I){if(I._status===-1){var U=I._result;U=U(),U.then(function(le){(I._status===0||I._status===-1)&&(I._status=1,I._result=le)},function(le){(I._status===0||I._status===-1)&&(I._status=2,I._result=le)}),I._status===-1&&(I._status=0,I._result=U)}if(I._status===1)return I._result.default;throw I._result}var me={current:null},ye={transition:null},J={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:ye,ReactCurrentOwner:z};function Q(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:ue,forEach:function(I,U,le){ue(I,function(){U.apply(this,arguments)},le)},count:function(I){var U=0;return ue(I,function(){U++}),U},toArray:function(I){return ue(I,function(U){return U})||[]},only:function(I){if(!fe(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},rt.Component=j,rt.Fragment=r,rt.Profiler=l,rt.PureComponent=E,rt.StrictMode=s,rt.Suspense=m,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,rt.act=Q,rt.cloneElement=function(I,U,le){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var de=C({},I.props),ie=I.key,Ee=I.ref,Ie=I._owner;if(U!=null){if(U.ref!==void 0&&(Ee=U.ref,Ie=z.current),U.key!==void 0&&(ie=""+U.key),I.type&&I.type.defaultProps)var Pe=I.type.defaultProps;for(De in U)M.call(U,De)&&!q.hasOwnProperty(De)&&(de[De]=U[De]===void 0&&Pe!==void 0?Pe[De]:U[De])}var De=arguments.length-2;if(De===1)de.children=le;else if(1<De){Pe=Array(De);for(var Ke=0;Ke<De;Ke++)Pe[Ke]=arguments[Ke+2];de.children=Pe}return{$$typeof:i,type:I.type,key:ie,ref:Ee,props:de,_owner:Ie}},rt.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:c,_context:I},I.Consumer=I},rt.createElement=ne,rt.createFactory=function(I){var U=ne.bind(null,I);return U.type=I,U},rt.createRef=function(){return{current:null}},rt.forwardRef=function(I){return{$$typeof:h,render:I}},rt.isValidElement=fe,rt.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:Te}},rt.memo=function(I,U){return{$$typeof:g,type:I,compare:U===void 0?null:U}},rt.startTransition=function(I){var U=ye.transition;ye.transition={};try{I()}finally{ye.transition=U}},rt.unstable_act=Q,rt.useCallback=function(I,U){return me.current.useCallback(I,U)},rt.useContext=function(I){return me.current.useContext(I)},rt.useDebugValue=function(){},rt.useDeferredValue=function(I){return me.current.useDeferredValue(I)},rt.useEffect=function(I,U){return me.current.useEffect(I,U)},rt.useId=function(){return me.current.useId()},rt.useImperativeHandle=function(I,U,le){return me.current.useImperativeHandle(I,U,le)},rt.useInsertionEffect=function(I,U){return me.current.useInsertionEffect(I,U)},rt.useLayoutEffect=function(I,U){return me.current.useLayoutEffect(I,U)},rt.useMemo=function(I,U){return me.current.useMemo(I,U)},rt.useReducer=function(I,U,le){return me.current.useReducer(I,U,le)},rt.useRef=function(I){return me.current.useRef(I)},rt.useState=function(I){return me.current.useState(I)},rt.useSyncExternalStore=function(I,U,le){return me.current.useSyncExternalStore(I,U,le)},rt.useTransition=function(){return me.current.useTransition()},rt.version="18.3.1",rt}var ef;function Ci(){return ef||(ef=1,eu.exports=jp()),eu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function Np(){if(tf)return gi;tf=1;var i=Ci(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(h,m,g){var y,x={},k=null,w=null;g!==void 0&&(k=""+g),m.key!==void 0&&(k=""+m.key),m.ref!==void 0&&(w=m.ref);for(y in m)s.call(m,y)&&!c.hasOwnProperty(y)&&(x[y]=m[y]);if(h&&h.defaultProps)for(y in m=h.defaultProps,m)x[y]===void 0&&(x[y]=m[y]);return{$$typeof:n,type:h,key:k,ref:w,props:x,_owner:l.current}}return gi.Fragment=r,gi.jsx=u,gi.jsxs=u,gi}var rf;function Ep(){return rf||(rf=1,Yc.exports=Np()),Yc.exports}var a=Ep(),G=Ci();const dl=Ta(G),Cp=Sp({__proto__:null,default:dl},[G]);var Ko={},tu={exports:{}},dr={},ru={exports:{}},nu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Tp(){return nf||(nf=1,function(i){function n(ye,J){var Q=ye.length;ye.push(J);e:for(;0<Q;){var I=Q-1>>>1,U=ye[I];if(0<l(U,J))ye[I]=J,ye[Q]=U,Q=I;else break e}}function r(ye){return ye.length===0?null:ye[0]}function s(ye){if(ye.length===0)return null;var J=ye[0],Q=ye.pop();if(Q!==J){ye[0]=Q;e:for(var I=0,U=ye.length,le=U>>>1;I<le;){var de=2*(I+1)-1,ie=ye[de],Ee=de+1,Ie=ye[Ee];if(0>l(ie,Q))Ee<U&&0>l(Ie,ie)?(ye[I]=Ie,ye[Ee]=Q,I=Ee):(ye[I]=ie,ye[de]=Q,I=de);else if(Ee<U&&0>l(Ie,Q))ye[I]=Ie,ye[Ee]=Q,I=Ee;else break e}}return J}function l(ye,J){var Q=ye.sortIndex-J.sortIndex;return Q!==0?Q:ye.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var m=[],g=[],y=1,x=null,k=3,w=!1,C=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ye){for(var J=r(g);J!==null;){if(J.callback===null)s(g);else if(J.startTime<=ye)s(g),J.sortIndex=J.expirationTime,n(m,J);else break;J=r(g)}}function D(ye){if(S=!1,P(ye),!C)if(r(m)!==null)C=!0,Te(M);else{var J=r(g);J!==null&&me(D,J.startTime-ye)}}function M(ye,J){C=!1,S&&(S=!1,_(ne),ne=-1),w=!0;var Q=k;try{for(P(J),x=r(m);x!==null&&(!(x.expirationTime>J)||ye&&!pe());){var I=x.callback;if(typeof I=="function"){x.callback=null,k=x.priorityLevel;var U=I(x.expirationTime<=J);J=i.unstable_now(),typeof U=="function"?x.callback=U:x===r(m)&&s(m),P(J)}else s(m);x=r(m)}if(x!==null)var le=!0;else{var de=r(g);de!==null&&me(D,de.startTime-J),le=!1}return le}finally{x=null,k=Q,w=!1}}var z=!1,q=null,ne=-1,ee=5,fe=-1;function pe(){return!(i.unstable_now()-fe<ee)}function B(){if(q!==null){var ye=i.unstable_now();fe=ye;var J=!0;try{J=q(!0,ye)}finally{J?Z():(z=!1,q=null)}}else z=!1}var Z;if(typeof E=="function")Z=function(){E(B)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ue=T.port2;T.port1.onmessage=B,Z=function(){ue.postMessage(null)}}else Z=function(){j(B,0)};function Te(ye){q=ye,z||(z=!0,Z())}function me(ye,J){ne=j(function(){ye(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ye){ye.callback=null},i.unstable_continueExecution=function(){C||w||(C=!0,Te(M))},i.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<ye?Math.floor(1e3/ye):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(ye){switch(k){case 1:case 2:case 3:var J=3;break;default:J=k}var Q=k;k=J;try{return ye()}finally{k=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ye,J){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Q=k;k=ye;try{return J()}finally{k=Q}},i.unstable_scheduleCallback=function(ye,J,Q){var I=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?I+Q:I):Q=I,ye){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,ye={id:y++,callback:J,priorityLevel:ye,startTime:Q,expirationTime:U,sortIndex:-1},Q>I?(ye.sortIndex=Q,n(g,ye),r(m)===null&&ye===r(g)&&(S?(_(ne),ne=-1):S=!0,me(D,Q-I))):(ye.sortIndex=U,n(m,ye),C||w||(C=!0,Te(M))),ye},i.unstable_shouldYield=pe,i.unstable_wrapCallback=function(ye){var J=k;return function(){var Q=k;k=J;try{return ye.apply(this,arguments)}finally{k=Q}}}}(nu)),nu}var sf;function Ap(){return sf||(sf=1,ru.exports=Tp()),ru.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af;function Pp(){if(af)return dr;af=1;var i=Ci(),n=Ap();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function k(e){return m.call(x,e)?!0:m.call(y,e)?!1:g.test(e)?x[e]=!0:(y[e]=!0,!1)}function w(e,t,o,d){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return d?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,o,d){if(t===null||typeof t>"u"||w(e,t,o,d))return!0;if(d)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function S(e,t,o,d,p,b,R){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=b,this.removeEmptyString=R}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new S(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new S(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new S(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new S(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new S(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new S(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new S(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new S(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new S(e,5,!1,e.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_,E);j[t]=new S(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_,E);j[t]=new S(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_,E);j[t]=new S(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new S(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new S(e,1,!1,e.toLowerCase(),null,!0,!0)});function P(e,t,o,d){var p=j.hasOwnProperty(t)?j[t]:null;(p!==null?p.type!==0:d||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,o,p,d)&&(o=null),d||p===null?k(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):p.mustUseProperty?e[p.propertyName]=o===null?p.type===3?!1:"":o:(t=p.attributeName,d=p.attributeNamespace,o===null?e.removeAttribute(t):(p=p.type,o=p===3||p===4&&o===!0?"":""+o,d?e.setAttributeNS(d,t,o):e.setAttribute(t,o))))}var D=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),z=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),pe=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),ye=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=ye&&e[ye]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,I;function U(e){if(I===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return`
`+I+e}var le=!1;function de(e,t){if(!e||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(oe){var d=oe}Reflect.construct(e,[],t)}else{try{t.call()}catch(oe){d=oe}e.call(t.prototype)}else{try{throw Error()}catch(oe){d=oe}e()}}catch(oe){if(oe&&d&&typeof oe.stack=="string"){for(var p=oe.stack.split(`
`),b=d.stack.split(`
`),R=p.length-1,$=b.length-1;1<=R&&0<=$&&p[R]!==b[$];)$--;for(;1<=R&&0<=$;R--,$--)if(p[R]!==b[$]){if(R!==1||$!==1)do if(R--,$--,0>$||p[R]!==b[$]){var H=`
`+p[R].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=R&&0<=$);break}}}finally{le=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?U(e):""}function ie(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=de(e.type,!1),e;case 11:return e=de(e.type.render,!1),e;case 1:return e=de(e.type,!0),e;default:return""}}function Ee(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case z:return"Portal";case ee:return"Profiler";case ne:return"StrictMode";case Z:return"Suspense";case T:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case fe:return(e._context.displayName||"Context")+".Provider";case B:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:Ee(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return Ee(e(t))}catch{}}return null}function Ie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(t);case 8:return t===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function De(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ke(e){var t=De(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),d=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,b=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(R){d=""+R,b.call(this,R)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function it(e){e._valueTracker||(e._valueTracker=Ke(e))}function ct(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),d="";return e&&(d=De(e)?e.checked?"true":"false":e.value),e=d,e!==o?(t.setValue(e),!0):!1}function je(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function N(e,t){var o=t.checked;return Q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function he(e,t){var o=t.defaultValue==null?"":t.defaultValue,d=t.checked!=null?t.checked:t.defaultChecked;o=Pe(t.value!=null?t.value:o),e._wrapperState={initialChecked:d,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y(e,t){t=t.checked,t!=null&&P(e,"checked",t,!1)}function F(e,t){Y(e,t);var o=Pe(t.value),d=t.type;if(o!=null)d==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?K(e,t.type,o):t.hasOwnProperty("defaultValue")&&K(e,t.type,Pe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var d=t.type;if(!(d!=="submit"&&d!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function K(e,t,o){(t!=="number"||je(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var ve=Array.isArray;function xe(e,t,o,d){if(e=e.options,t){t={};for(var p=0;p<o.length;p++)t["$"+o[p]]=!0;for(o=0;o<e.length;o++)p=t.hasOwnProperty("$"+e[o].value),e[o].selected!==p&&(e[o].selected=p),p&&d&&(e[o].defaultSelected=!0)}else{for(o=""+Pe(o),t=null,p=0;p<e.length;p++){if(e[p].value===o){e[p].selected=!0,d&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function se(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return Q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Se(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(r(92));if(ve(o)){if(1<o.length)throw Error(r(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:Pe(o)}}function Re(e,t){var o=Pe(t.value),d=Pe(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),d!=null&&(e.defaultValue=""+d)}function Ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xe,Et=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,d,p){MSApp.execUnsafeLocalFunction(function(){return e(t,o,d,p)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function er(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nn=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(e){nn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ct[t]=Ct[e]})});function ht(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||Ct.hasOwnProperty(e)&&Ct[e]?(""+t).trim():t+"px"}function Ve(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var d=o.indexOf("--")===0,p=ht(o,t[o],d);o==="float"&&(o="cssFloat"),d?e.setProperty(o,p):e[o]=p}}var jn=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dt(e,t){if(t){if(jn[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function sn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=null;function ss(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tr=null,Sr=null,Vt=null;function qr(e){if(e=ei(e)){if(typeof tr!="function")throw Error(r(280));var t=e.stateNode;t&&(t=oo(t),tr(e.stateNode,e.type,t))}}function Ae(e){Sr?Vt?Vt.push(e):Vt=[e]:Sr=e}function Li(){if(Sr){var e=Sr,t=Vt;if(Vt=Sr=null,qr(e),t)for(e=0;e<t.length;e++)qr(t[e])}}function Ui(e,t){return e(t)}function Kt(){}var as=!1;function Rs(e,t,o){if(as)return e(t,o);as=!0;try{return Ui(e,t,o)}finally{as=!1,(Sr!==null||Vt!==null)&&(Kt(),Li())}}function an(e,t){var o=e.stateNode;if(o===null)return null;var d=oo(o);if(d===null)return null;o=d[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,t,typeof o));return o}var Rr=!1;if(h)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Rr=!1}function $t(e,t,o,d,p,b,R,$,H){var oe=Array.prototype.slice.call(arguments,3);try{t.apply(o,oe)}catch(ke){this.onError(ke)}}var En=!1,Ir=null,is=!1,Is=null,Os={onError:function(e){En=!0,Ir=e}};function Lt(e,t,o,d,p,b,R,$,H){En=!1,Ir=null,$t.apply(Os,arguments)}function Mi(e,t,o,d,p,b,R,$,H){if(Lt.apply(this,arguments),En){if(En){var oe=Ir;En=!1,Ir=null}else throw Error(r(198));is||(is=!0,Is=oe)}}function on(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function Ds(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fi(e){if(on(e)!==e)throw Error(r(188))}function Oa(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(r(188));return t!==e?null:e}for(var o=e,d=t;;){var p=o.return;if(p===null)break;var b=p.alternate;if(b===null){if(d=p.return,d!==null){o=d;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===o)return Fi(p),e;if(b===d)return Fi(p),t;b=b.sibling}throw Error(r(188))}if(o.return!==d.return)o=p,d=b;else{for(var R=!1,$=p.child;$;){if($===o){R=!0,o=p,d=b;break}if($===d){R=!0,d=p,o=b;break}$=$.sibling}if(!R){for($=b.child;$;){if($===o){R=!0,o=b,d=p;break}if($===d){R=!0,d=b,o=p;break}$=$.sibling}if(!R)throw Error(r(189))}}if(o.alternate!==d)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:t}function Da(e){return e=Oa(e),e!==null?os(e):null}function os(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=os(e);if(t!==null)return t;e=e.sibling}return null}var zi=n.unstable_scheduleCallback,fr=n.unstable_cancelCallback,Ls=n.unstable_shouldYield,La=n.unstable_requestPaint,yt=n.unstable_now,$i=n.unstable_getCurrentPriorityLevel,ln=n.unstable_ImmediatePriority,Ua=n.unstable_UserBlockingPriority,cn=n.unstable_NormalPriority,Bi=n.unstable_LowPriority,un=n.unstable_IdlePriority,Cn=null,mr=null;function Wi(e){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(Cn,e,void 0,(e.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:ut,wl=Math.log,Hr=Math.LN2;function ut(e){return e>>>=0,e===0?32:31-(wl(e)/Hr|0)|0}var jr=64,dn=4194304;function Gr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hn(e,t){var o=e.pendingLanes;if(o===0)return 0;var d=0,p=e.suspendedLanes,b=e.pingedLanes,R=o&268435455;if(R!==0){var $=R&~p;$!==0?d=Gr($):(b&=R,b!==0&&(d=Gr(b)))}else R=o&~p,R!==0?d=Gr(R):b!==0&&(d=Gr(b));if(d===0)return 0;if(t!==0&&t!==d&&(t&p)===0&&(p=d&-d,b=t&-t,p>=b||p===16&&(b&4194240)!==0))return t;if((d&4)!==0&&(d|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=d;0<t;)o=31-rr(t),p=1<<o,d|=e[o],t&=~p;return d}function Ma(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bl(e,t){for(var o=e.suspendedLanes,d=e.pingedLanes,p=e.expirationTimes,b=e.pendingLanes;0<b;){var R=31-rr(b),$=1<<R,H=p[R];H===-1?(($&o)===0||($&d)!==0)&&(p[R]=Ma($,t)):H<=t&&(e.expiredLanes|=$),b&=~$}}function Fa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tn(){var e=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),e}function Us(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function ls(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rr(t),e[t]=o}function za(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<o;){var p=31-rr(o),b=1<<p;t[p]=0,d[p]=-1,e[p]=-1,o&=~b}}function Ms(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var d=31-rr(o),p=1<<d;p&t|e[d]&t&&(e[d]|=t),o&=~p}}var st=0;function Fs(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var qi,An,cs,Vr,zs,gr=!1,pr=[],nr=null,Kr=null,Ue=null,fn=new Map,Qr=new Map,Or=[],Hi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pn(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Ue=null;break;case"pointerover":case"pointerout":fn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(t.pointerId)}}function sr(e,t,o,d,p,b){return e===null||e.nativeEvent!==b?(e={blockedOn:t,domEventName:o,eventSystemFlags:d,nativeEvent:b,targetContainers:[p]},t!==null&&(t=ei(t),t!==null&&An(t)),e):(e.eventSystemFlags|=d,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function us(e,t,o,d,p){switch(t){case"focusin":return nr=sr(nr,e,t,o,d,p),!0;case"dragenter":return Kr=sr(Kr,e,t,o,d,p),!0;case"mouseover":return Ue=sr(Ue,e,t,o,d,p),!0;case"pointerover":var b=p.pointerId;return fn.set(b,sr(fn.get(b)||null,e,t,o,d,p)),!0;case"gotpointercapture":return b=p.pointerId,Qr.set(b,sr(Qr.get(b)||null,e,t,o,d,p)),!0}return!1}function $s(e){var t=fs(e.target);if(t!==null){var o=on(t);if(o!==null){if(t=o.tag,t===13){if(t=Ds(o),t!==null){e.blockedOn=t,zs(e.priority,function(){cs(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function f(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Tt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var d=new o.constructor(o.type,o);_r=d,o.target.dispatchEvent(d),_r=null}else return t=ei(o),t!==null&&An(t),e.blockedOn=o,!1;t.shift()}return!0}function v(e,t,o){f(e)&&o.delete(t)}function A(){gr=!1,nr!==null&&f(nr)&&(nr=null),Kr!==null&&f(Kr)&&(Kr=null),Ue!==null&&f(Ue)&&(Ue=null),fn.forEach(v),Qr.forEach(v)}function O(e,t){e.blockedOn===t&&(e.blockedOn=null,gr||(gr=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,A)))}function W(e){function t(p){return O(p,e)}if(0<pr.length){O(pr[0],e);for(var o=1;o<pr.length;o++){var d=pr[o];d.blockedOn===e&&(d.blockedOn=null)}}for(nr!==null&&O(nr,e),Kr!==null&&O(Kr,e),Ue!==null&&O(Ue,e),fn.forEach(t),Qr.forEach(t),o=0;o<Or.length;o++)d=Or[o],d.blockedOn===e&&(d.blockedOn=null);for(;0<Or.length&&(o=Or[0],o.blockedOn===null);)$s(o),o.blockedOn===null&&Or.shift()}var te=D.ReactCurrentBatchConfig,ge=!0;function We(e,t,o,d){var p=st,b=te.transition;te.transition=null;try{st=1,Je(e,t,o,d)}finally{st=p,te.transition=b}}function tt(e,t,o,d){var p=st,b=te.transition;te.transition=null;try{st=4,Je(e,t,o,d)}finally{st=p,te.transition=b}}function Je(e,t,o,d){if(ge){var p=Tt(e,t,o,d);if(p===null)Wl(e,t,d,dt,o),Pn(e,d);else if(us(p,e,t,o,d))d.stopPropagation();else if(Pn(e,d),t&4&&-1<Hi.indexOf(e)){for(;p!==null;){var b=ei(p);if(b!==null&&qi(b),b=Tt(e,t,o,d),b===null&&Wl(e,t,d,dt,o),b===p)break;p=b}p!==null&&d.stopPropagation()}else Wl(e,t,d,null,o)}}var dt=null;function Tt(e,t,o,d){if(dt=null,e=ss(d),e=fs(e),e!==null)if(t=on(e),t===null)e=null;else if(o=t.tag,o===13){if(e=Ds(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dt=e,null}function $a(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($i()){case ln:return 1;case Ua:return 4;case cn:case Bi:return 16;case un:return 536870912;default:return 16}default:return 16}}var Zr=null,Bs=null,Ws=null;function Ba(){if(Ws)return Ws;var e,t=Bs,o=t.length,d,p="value"in Zr?Zr.value:Zr.textContent,b=p.length;for(e=0;e<o&&t[e]===p[e];e++);var R=o-e;for(d=1;d<=R&&t[o-d]===p[b-d];d++);return Ws=p.slice(e,1<d?1-d:void 0)}function qs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function Gi(){return!1}function Qt(e){function t(o,d,p,b,R){this._reactName=o,this._targetInst=p,this.type=d,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var $ in e)e.hasOwnProperty($)&&(o=e[$],this[$]=o?o(b):b[$]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Hs:Gi,this.isPropagationStopped=Gi,this}return Q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=Qt(Rn),ds=Q({},Rn,{view:0,detail:0}),kl=Qt(ds),Gs,qa,hs,Vs=Q({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hs&&(hs&&e.type==="mousemove"?(Gs=e.screenX-hs.screenX,qa=e.screenY-hs.screenY):qa=Gs=0,hs=e),Gs)},movementY:function(e){return"movementY"in e?e.movementY:qa}}),Vi=Qt(Vs),_l=Q({},Vs,{dataTransfer:0}),Sl=Qt(_l),jl=Q({},ds,{relatedTarget:0}),Ks=Qt(jl),Nl=Q({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),El=Qt(Nl),Cl=Q({},Rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tl=Qt(Cl),Al=Q({},Rn,{data:0}),Ki=Qt(Al),Qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Il(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rl[e])?!!t[e]:!1}function In(){return Il}var Zi=Q({},ds,{key:function(e){if(e.key){var t=Qi[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return e.type==="keypress"?qs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ji=Qt(Zi),Xi=Q({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=Qt(Xi),we=Q({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In}),Fe=Qt(we),qe=Q({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ze=Qt(qe),lt=Q({},Vs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yr=Qt(lt),ar=[9,13,27,32],Ut=h&&"CompositionEvent"in window,Mt=null;h&&"documentMode"in document&&(Mt=document.documentMode);var Ha=h&&"TextEvent"in window&&!Mt,Jr=h&&(!Ut||Mt&&8<Mt&&11>=Mt),Yi=" ",Vu=!1;function Ku(e,t){switch(e){case"keyup":return ar.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qs=!1;function bg(e,t){switch(e){case"compositionend":return Qu(t);case"keypress":return t.which!==32?null:(Vu=!0,Yi);case"textInput":return e=t.data,e===Yi&&Vu?null:e;default:return null}}function kg(e,t){if(Qs)return e==="compositionend"||!Ut&&Ku(e,t)?(e=Ba(),Ws=Bs=Zr=null,Qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jr&&t.locale!=="ko"?null:t.data;default:return null}}var _g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_g[e.type]:t==="textarea"}function Ju(e,t,o,d){Ae(d),t=so(t,"onChange"),0<t.length&&(o=new Wa("onChange","change",null,o,d),e.push({event:o,listeners:t}))}var Ga=null,Va=null;function Sg(e){gd(e,0)}function eo(e){var t=ea(e);if(ct(t))return e}function jg(e,t){if(e==="change")return t}var Xu=!1;if(h){var Ol;if(h){var Dl="oninput"in document;if(!Dl){var Yu=document.createElement("div");Yu.setAttribute("oninput","return;"),Dl=typeof Yu.oninput=="function"}Ol=Dl}else Ol=!1;Xu=Ol&&(!document.documentMode||9<document.documentMode)}function ed(){Ga&&(Ga.detachEvent("onpropertychange",td),Va=Ga=null)}function td(e){if(e.propertyName==="value"&&eo(Va)){var t=[];Ju(t,Va,e,ss(e)),Rs(Sg,t)}}function Ng(e,t,o){e==="focusin"?(ed(),Ga=t,Va=o,Ga.attachEvent("onpropertychange",td)):e==="focusout"&&ed()}function Eg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eo(Va)}function Cg(e,t){if(e==="click")return eo(t)}function Tg(e,t){if(e==="input"||e==="change")return eo(t)}function Ag(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dr=typeof Object.is=="function"?Object.is:Ag;function Ka(e,t){if(Dr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),d=Object.keys(t);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var p=o[d];if(!m.call(t,p)||!Dr(e[p],t[p]))return!1}return!0}function rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,t){var o=rd(e);e=0;for(var d;o;){if(o.nodeType===3){if(d=e+o.textContent.length,e<=t&&d>=t)return{node:o,offset:t-e};e=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=rd(o)}}function sd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ad(){for(var e=window,t=je();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=je(e.document)}return t}function Ll(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pg(e){var t=ad(),o=e.focusedElem,d=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&sd(o.ownerDocument.documentElement,o)){if(d!==null&&Ll(o)){if(t=d.start,e=d.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var p=o.textContent.length,b=Math.min(d.start,p);d=d.end===void 0?b:Math.min(d.end,p),!e.extend&&b>d&&(p=d,d=b,b=p),p=nd(o,b);var R=nd(o,d);p&&R&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==R.node||e.focusOffset!==R.offset)&&(t=t.createRange(),t.setStart(p.node,p.offset),e.removeAllRanges(),b>d?(e.addRange(t),e.extend(R.node,R.offset)):(t.setEnd(R.node,R.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rg=h&&"documentMode"in document&&11>=document.documentMode,Zs=null,Ul=null,Qa=null,Ml=!1;function id(e,t,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ml||Zs==null||Zs!==je(d)||(d=Zs,"selectionStart"in d&&Ll(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Qa&&Ka(Qa,d)||(Qa=d,d=so(Ul,"onSelect"),0<d.length&&(t=new Wa("onSelect","select",null,t,o),e.push({event:t,listeners:d}),t.target=Zs)))}function to(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Js={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},Fl={},od={};h&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function ro(e){if(Fl[e])return Fl[e];if(!Js[e])return e;var t=Js[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in od)return Fl[e]=t[o];return e}var ld=ro("animationend"),cd=ro("animationiteration"),ud=ro("animationstart"),dd=ro("transitionend"),hd=new Map,fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(e,t){hd.set(e,t),c(t,[e])}for(var zl=0;zl<fd.length;zl++){var $l=fd[zl],Ig=$l.toLowerCase(),Og=$l[0].toUpperCase()+$l.slice(1);On(Ig,"on"+Og)}On(ld,"onAnimationEnd"),On(cd,"onAnimationIteration"),On(ud,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(dd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Za));function md(e,t,o){var d=e.type||"unknown-event";e.currentTarget=o,Mi(d,t,void 0,e),e.currentTarget=null}function gd(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var d=e[o],p=d.event;d=d.listeners;e:{var b=void 0;if(t)for(var R=d.length-1;0<=R;R--){var $=d[R],H=$.instance,oe=$.currentTarget;if($=$.listener,H!==b&&p.isPropagationStopped())break e;md(p,$,oe),b=H}else for(R=0;R<d.length;R++){if($=d[R],H=$.instance,oe=$.currentTarget,$=$.listener,H!==b&&p.isPropagationStopped())break e;md(p,$,oe),b=H}}}if(is)throw e=Is,is=!1,Is=null,e}function gt(e,t){var o=t[Ql];o===void 0&&(o=t[Ql]=new Set);var d=e+"__bubble";o.has(d)||(pd(t,e,2,!1),o.add(d))}function Bl(e,t,o){var d=0;t&&(d|=4),pd(o,e,d,t)}var no="_reactListening"+Math.random().toString(36).slice(2);function Ja(e){if(!e[no]){e[no]=!0,s.forEach(function(o){o!=="selectionchange"&&(Dg.has(o)||Bl(o,!1,e),Bl(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[no]||(t[no]=!0,Bl("selectionchange",!1,t))}}function pd(e,t,o,d){switch($a(t)){case 1:var p=We;break;case 4:p=tt;break;default:p=Je}o=p.bind(null,t,o,e),p=void 0,!Rr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),d?p!==void 0?e.addEventListener(t,o,{capture:!0,passive:p}):e.addEventListener(t,o,!0):p!==void 0?e.addEventListener(t,o,{passive:p}):e.addEventListener(t,o,!1)}function Wl(e,t,o,d,p){var b=d;if((t&1)===0&&(t&2)===0&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var $=d.stateNode.containerInfo;if($===p||$.nodeType===8&&$.parentNode===p)break;if(R===4)for(R=d.return;R!==null;){var H=R.tag;if((H===3||H===4)&&(H=R.stateNode.containerInfo,H===p||H.nodeType===8&&H.parentNode===p))return;R=R.return}for(;$!==null;){if(R=fs($),R===null)return;if(H=R.tag,H===5||H===6){d=b=R;continue e}$=$.parentNode}}d=d.return}Rs(function(){var oe=b,ke=ss(o),_e=[];e:{var be=hd.get(e);if(be!==void 0){var Oe=Wa,Me=e;switch(e){case"keypress":if(qs(o)===0)break e;case"keydown":case"keyup":Oe=Ji;break;case"focusin":Me="focus",Oe=Ks;break;case"focusout":Me="blur",Oe=Ks;break;case"beforeblur":case"afterblur":Oe=Ks;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Vi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=Fe;break;case ld:case cd:case ud:Oe=El;break;case dd:Oe=Ze;break;case"scroll":Oe=kl;break;case"wheel":Oe=yr;break;case"copy":case"cut":case"paste":Oe=Tl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=X}var ze=(t&4)!==0,_t=!ze&&e==="scroll",re=ze?be!==null?be+"Capture":null:be;ze=[];for(var V=oe,ae;V!==null;){ae=V;var Ce=ae.stateNode;if(ae.tag===5&&Ce!==null&&(ae=Ce,re!==null&&(Ce=an(V,re),Ce!=null&&ze.push(Xa(V,Ce,ae)))),_t)break;V=V.return}0<ze.length&&(be=new Oe(be,Me,null,o,ke),_e.push({event:be,listeners:ze}))}}if((t&7)===0){e:{if(be=e==="mouseover"||e==="pointerover",Oe=e==="mouseout"||e==="pointerout",be&&o!==_r&&(Me=o.relatedTarget||o.fromElement)&&(fs(Me)||Me[mn]))break e;if((Oe||be)&&(be=ke.window===ke?ke:(be=ke.ownerDocument)?be.defaultView||be.parentWindow:window,Oe?(Me=o.relatedTarget||o.toElement,Oe=oe,Me=Me?fs(Me):null,Me!==null&&(_t=on(Me),Me!==_t||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Oe=null,Me=oe),Oe!==Me)){if(ze=Vi,Ce="onMouseLeave",re="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(ze=X,Ce="onPointerLeave",re="onPointerEnter",V="pointer"),_t=Oe==null?be:ea(Oe),ae=Me==null?be:ea(Me),be=new ze(Ce,V+"leave",Oe,o,ke),be.target=_t,be.relatedTarget=ae,Ce=null,fs(ke)===oe&&(ze=new ze(re,V+"enter",Me,o,ke),ze.target=ae,ze.relatedTarget=_t,Ce=ze),_t=Ce,Oe&&Me)t:{for(ze=Oe,re=Me,V=0,ae=ze;ae;ae=Xs(ae))V++;for(ae=0,Ce=re;Ce;Ce=Xs(Ce))ae++;for(;0<V-ae;)ze=Xs(ze),V--;for(;0<ae-V;)re=Xs(re),ae--;for(;V--;){if(ze===re||re!==null&&ze===re.alternate)break t;ze=Xs(ze),re=Xs(re)}ze=null}else ze=null;Oe!==null&&yd(_e,be,Oe,ze,!1),Me!==null&&_t!==null&&yd(_e,_t,Me,ze,!0)}}e:{if(be=oe?ea(oe):window,Oe=be.nodeName&&be.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&be.type==="file")var Be=jg;else if(Zu(be))if(Xu)Be=Tg;else{Be=Eg;var He=Ng}else(Oe=be.nodeName)&&Oe.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(Be=Cg);if(Be&&(Be=Be(e,oe))){Ju(_e,Be,o,ke);break e}He&&He(e,be,oe),e==="focusout"&&(He=be._wrapperState)&&He.controlled&&be.type==="number"&&K(be,"number",be.value)}switch(He=oe?ea(oe):window,e){case"focusin":(Zu(He)||He.contentEditable==="true")&&(Zs=He,Ul=oe,Qa=null);break;case"focusout":Qa=Ul=Zs=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,id(_e,o,ke);break;case"selectionchange":if(Rg)break;case"keydown":case"keyup":id(_e,o,ke)}var Ge;if(Ut)e:{switch(e){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Qs?Ku(e,o)&&(Qe="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Qe="onCompositionStart");Qe&&(Jr&&o.locale!=="ko"&&(Qs||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Qs&&(Ge=Ba()):(Zr=ke,Bs="value"in Zr?Zr.value:Zr.textContent,Qs=!0)),He=so(oe,Qe),0<He.length&&(Qe=new Ki(Qe,e,null,o,ke),_e.push({event:Qe,listeners:He}),Ge?Qe.data=Ge:(Ge=Qu(o),Ge!==null&&(Qe.data=Ge)))),(Ge=Ha?bg(e,o):kg(e,o))&&(oe=so(oe,"onBeforeInput"),0<oe.length&&(ke=new Ki("onBeforeInput","beforeinput",null,o,ke),_e.push({event:ke,listeners:oe}),ke.data=Ge))}gd(_e,t)})}function Xa(e,t,o){return{instance:e,listener:t,currentTarget:o}}function so(e,t){for(var o=t+"Capture",d=[];e!==null;){var p=e,b=p.stateNode;p.tag===5&&b!==null&&(p=b,b=an(e,o),b!=null&&d.unshift(Xa(e,b,p)),b=an(e,t),b!=null&&d.push(Xa(e,b,p))),e=e.return}return d}function Xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yd(e,t,o,d,p){for(var b=t._reactName,R=[];o!==null&&o!==d;){var $=o,H=$.alternate,oe=$.stateNode;if(H!==null&&H===d)break;$.tag===5&&oe!==null&&($=oe,p?(H=an(o,b),H!=null&&R.unshift(Xa(o,H,$))):p||(H=an(o,b),H!=null&&R.push(Xa(o,H,$)))),o=o.return}R.length!==0&&e.push({event:t,listeners:R})}var Lg=/\r\n?/g,Ug=/\u0000|\uFFFD/g;function vd(e){return(typeof e=="string"?e:""+e).replace(Lg,`
`).replace(Ug,"")}function ao(e,t,o){if(t=vd(t),vd(e)!==t&&o)throw Error(r(425))}function io(){}var ql=null,Hl=null;function Gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,Mg=typeof clearTimeout=="function"?clearTimeout:void 0,xd=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof xd<"u"?function(e){return xd.resolve(null).then(e).catch(zg)}:Vl;function zg(e){setTimeout(function(){throw e})}function Kl(e,t){var o=t,d=0;do{var p=o.nextSibling;if(e.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(d===0){e.removeChild(p),W(t);return}d--}else o!=="$"&&o!=="$?"&&o!=="$!"||d++;o=p}while(o);W(t)}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Ys,Ya="__reactProps$"+Ys,mn="__reactContainer$"+Ys,Ql="__reactEvents$"+Ys,$g="__reactListeners$"+Ys,Bg="__reactHandles$"+Ys;function fs(e){var t=e[Xr];if(t)return t;for(var o=e.parentNode;o;){if(t=o[mn]||o[Xr]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=wd(e);e!==null;){if(o=e[Xr])return o;e=wd(e)}return t}e=o,o=e.parentNode}return null}function ei(e){return e=e[Xr]||e[mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ea(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function oo(e){return e[Ya]||null}var Zl=[],ta=-1;function Ln(e){return{current:e}}function pt(e){0>ta||(e.current=Zl[ta],Zl[ta]=null,ta--)}function ft(e,t){ta++,Zl[ta]=e.current,e.current=t}var Un={},Bt=Ln(Un),ir=Ln(!1),ms=Un;function ra(e,t){var o=e.type.contextTypes;if(!o)return Un;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===t)return d.__reactInternalMemoizedMaskedChildContext;var p={},b;for(b in o)p[b]=t[b];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=p),p}function or(e){return e=e.childContextTypes,e!=null}function lo(){pt(ir),pt(Bt)}function bd(e,t,o){if(Bt.current!==Un)throw Error(r(168));ft(Bt,t),ft(ir,o)}function kd(e,t,o){var d=e.stateNode;if(t=t.childContextTypes,typeof d.getChildContext!="function")return o;d=d.getChildContext();for(var p in d)if(!(p in t))throw Error(r(108,Ie(e)||"Unknown",p));return Q({},o,d)}function co(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Un,ms=Bt.current,ft(Bt,e),ft(ir,ir.current),!0}function _d(e,t,o){var d=e.stateNode;if(!d)throw Error(r(169));o?(e=kd(e,t,ms),d.__reactInternalMemoizedMergedChildContext=e,pt(ir),pt(Bt),ft(Bt,e)):pt(ir),ft(ir,o)}var gn=null,uo=!1,Jl=!1;function Sd(e){gn===null?gn=[e]:gn.push(e)}function Wg(e){uo=!0,Sd(e)}function Mn(){if(!Jl&&gn!==null){Jl=!0;var e=0,t=st;try{var o=gn;for(st=1;e<o.length;e++){var d=o[e];do d=d(!0);while(d!==null)}gn=null,uo=!1}catch(p){throw gn!==null&&(gn=gn.slice(e+1)),zi(ln,Mn),p}finally{st=t,Jl=!1}}return null}var na=[],sa=0,ho=null,fo=0,Nr=[],Er=0,gs=null,pn=1,yn="";function ps(e,t){na[sa++]=fo,na[sa++]=ho,ho=e,fo=t}function jd(e,t,o){Nr[Er++]=pn,Nr[Er++]=yn,Nr[Er++]=gs,gs=e;var d=pn;e=yn;var p=32-rr(d)-1;d&=~(1<<p),o+=1;var b=32-rr(t)+p;if(30<b){var R=p-p%5;b=(d&(1<<R)-1).toString(32),d>>=R,p-=R,pn=1<<32-rr(t)+p|o<<p|d,yn=b+e}else pn=1<<b|o<<p|d,yn=e}function Xl(e){e.return!==null&&(ps(e,1),jd(e,1,0))}function Yl(e){for(;e===ho;)ho=na[--sa],na[sa]=null,fo=na[--sa],na[sa]=null;for(;e===gs;)gs=Nr[--Er],Nr[Er]=null,yn=Nr[--Er],Nr[Er]=null,pn=Nr[--Er],Nr[Er]=null}var vr=null,xr=null,vt=!1,Lr=null;function Nd(e,t){var o=Pr(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function Ed(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vr=e,xr=Dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vr=e,xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=gs!==null?{id:pn,overflow:yn}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=Pr(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,vr=e,xr=null,!0):!1;default:return!1}}function ec(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tc(e){if(vt){var t=xr;if(t){var o=t;if(!Ed(e,t)){if(ec(e))throw Error(r(418));t=Dn(o.nextSibling);var d=vr;t&&Ed(e,t)?Nd(d,o):(e.flags=e.flags&-4097|2,vt=!1,vr=e)}}else{if(ec(e))throw Error(r(418));e.flags=e.flags&-4097|2,vt=!1,vr=e}}}function Cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vr=e}function mo(e){if(e!==vr)return!1;if(!vt)return Cd(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gl(e.type,e.memoizedProps)),t&&(t=xr)){if(ec(e))throw Td(),Error(r(418));for(;t;)Nd(e,t),t=Dn(t.nextSibling)}if(Cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){xr=Dn(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}xr=null}}else xr=vr?Dn(e.stateNode.nextSibling):null;return!0}function Td(){for(var e=xr;e;)e=Dn(e.nextSibling)}function aa(){xr=vr=null,vt=!1}function rc(e){Lr===null?Lr=[e]:Lr.push(e)}var qg=D.ReactCurrentBatchConfig;function ti(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var d=o.stateNode}if(!d)throw Error(r(147,e));var p=d,b=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===b?t.ref:(t=function(R){var $=p.refs;R===null?delete $[b]:$[b]=R},t._stringRef=b,t)}if(typeof e!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ad(e){var t=e._init;return t(e._payload)}function Pd(e){function t(re,V){if(e){var ae=re.deletions;ae===null?(re.deletions=[V],re.flags|=16):ae.push(V)}}function o(re,V){if(!e)return null;for(;V!==null;)t(re,V),V=V.sibling;return null}function d(re,V){for(re=new Map;V!==null;)V.key!==null?re.set(V.key,V):re.set(V.index,V),V=V.sibling;return re}function p(re,V){return re=Gn(re,V),re.index=0,re.sibling=null,re}function b(re,V,ae){return re.index=ae,e?(ae=re.alternate,ae!==null?(ae=ae.index,ae<V?(re.flags|=2,V):ae):(re.flags|=2,V)):(re.flags|=1048576,V)}function R(re){return e&&re.alternate===null&&(re.flags|=2),re}function $(re,V,ae,Ce){return V===null||V.tag!==6?(V=Vc(ae,re.mode,Ce),V.return=re,V):(V=p(V,ae),V.return=re,V)}function H(re,V,ae,Ce){var Be=ae.type;return Be===q?ke(re,V,ae.props.children,Ce,ae.key):V!==null&&(V.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Te&&Ad(Be)===V.type)?(Ce=p(V,ae.props),Ce.ref=ti(re,V,ae),Ce.return=re,Ce):(Ce=Fo(ae.type,ae.key,ae.props,null,re.mode,Ce),Ce.ref=ti(re,V,ae),Ce.return=re,Ce)}function oe(re,V,ae,Ce){return V===null||V.tag!==4||V.stateNode.containerInfo!==ae.containerInfo||V.stateNode.implementation!==ae.implementation?(V=Kc(ae,re.mode,Ce),V.return=re,V):(V=p(V,ae.children||[]),V.return=re,V)}function ke(re,V,ae,Ce,Be){return V===null||V.tag!==7?(V=Ss(ae,re.mode,Ce,Be),V.return=re,V):(V=p(V,ae),V.return=re,V)}function _e(re,V,ae){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Vc(""+V,re.mode,ae),V.return=re,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M:return ae=Fo(V.type,V.key,V.props,null,re.mode,ae),ae.ref=ti(re,null,V),ae.return=re,ae;case z:return V=Kc(V,re.mode,ae),V.return=re,V;case Te:var Ce=V._init;return _e(re,Ce(V._payload),ae)}if(ve(V)||J(V))return V=Ss(V,re.mode,ae,null),V.return=re,V;go(re,V)}return null}function be(re,V,ae,Ce){var Be=V!==null?V.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return Be!==null?null:$(re,V,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case M:return ae.key===Be?H(re,V,ae,Ce):null;case z:return ae.key===Be?oe(re,V,ae,Ce):null;case Te:return Be=ae._init,be(re,V,Be(ae._payload),Ce)}if(ve(ae)||J(ae))return Be!==null?null:ke(re,V,ae,Ce,null);go(re,ae)}return null}function Oe(re,V,ae,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return re=re.get(ae)||null,$(V,re,""+Ce,Be);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:return re=re.get(Ce.key===null?ae:Ce.key)||null,H(V,re,Ce,Be);case z:return re=re.get(Ce.key===null?ae:Ce.key)||null,oe(V,re,Ce,Be);case Te:var He=Ce._init;return Oe(re,V,ae,He(Ce._payload),Be)}if(ve(Ce)||J(Ce))return re=re.get(ae)||null,ke(V,re,Ce,Be,null);go(V,Ce)}return null}function Me(re,V,ae,Ce){for(var Be=null,He=null,Ge=V,Qe=V=0,Rt=null;Ge!==null&&Qe<ae.length;Qe++){Ge.index>Qe?(Rt=Ge,Ge=null):Rt=Ge.sibling;var ot=be(re,Ge,ae[Qe],Ce);if(ot===null){Ge===null&&(Ge=Rt);break}e&&Ge&&ot.alternate===null&&t(re,Ge),V=b(ot,V,Qe),He===null?Be=ot:He.sibling=ot,He=ot,Ge=Rt}if(Qe===ae.length)return o(re,Ge),vt&&ps(re,Qe),Be;if(Ge===null){for(;Qe<ae.length;Qe++)Ge=_e(re,ae[Qe],Ce),Ge!==null&&(V=b(Ge,V,Qe),He===null?Be=Ge:He.sibling=Ge,He=Ge);return vt&&ps(re,Qe),Be}for(Ge=d(re,Ge);Qe<ae.length;Qe++)Rt=Oe(Ge,re,Qe,ae[Qe],Ce),Rt!==null&&(e&&Rt.alternate!==null&&Ge.delete(Rt.key===null?Qe:Rt.key),V=b(Rt,V,Qe),He===null?Be=Rt:He.sibling=Rt,He=Rt);return e&&Ge.forEach(function(Vn){return t(re,Vn)}),vt&&ps(re,Qe),Be}function ze(re,V,ae,Ce){var Be=J(ae);if(typeof Be!="function")throw Error(r(150));if(ae=Be.call(ae),ae==null)throw Error(r(151));for(var He=Be=null,Ge=V,Qe=V=0,Rt=null,ot=ae.next();Ge!==null&&!ot.done;Qe++,ot=ae.next()){Ge.index>Qe?(Rt=Ge,Ge=null):Rt=Ge.sibling;var Vn=be(re,Ge,ot.value,Ce);if(Vn===null){Ge===null&&(Ge=Rt);break}e&&Ge&&Vn.alternate===null&&t(re,Ge),V=b(Vn,V,Qe),He===null?Be=Vn:He.sibling=Vn,He=Vn,Ge=Rt}if(ot.done)return o(re,Ge),vt&&ps(re,Qe),Be;if(Ge===null){for(;!ot.done;Qe++,ot=ae.next())ot=_e(re,ot.value,Ce),ot!==null&&(V=b(ot,V,Qe),He===null?Be=ot:He.sibling=ot,He=ot);return vt&&ps(re,Qe),Be}for(Ge=d(re,Ge);!ot.done;Qe++,ot=ae.next())ot=Oe(Ge,re,Qe,ot.value,Ce),ot!==null&&(e&&ot.alternate!==null&&Ge.delete(ot.key===null?Qe:ot.key),V=b(ot,V,Qe),He===null?Be=ot:He.sibling=ot,He=ot);return e&&Ge.forEach(function(_p){return t(re,_p)}),vt&&ps(re,Qe),Be}function _t(re,V,ae,Ce){if(typeof ae=="object"&&ae!==null&&ae.type===q&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case M:e:{for(var Be=ae.key,He=V;He!==null;){if(He.key===Be){if(Be=ae.type,Be===q){if(He.tag===7){o(re,He.sibling),V=p(He,ae.props.children),V.return=re,re=V;break e}}else if(He.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Te&&Ad(Be)===He.type){o(re,He.sibling),V=p(He,ae.props),V.ref=ti(re,He,ae),V.return=re,re=V;break e}o(re,He);break}else t(re,He);He=He.sibling}ae.type===q?(V=Ss(ae.props.children,re.mode,Ce,ae.key),V.return=re,re=V):(Ce=Fo(ae.type,ae.key,ae.props,null,re.mode,Ce),Ce.ref=ti(re,V,ae),Ce.return=re,re=Ce)}return R(re);case z:e:{for(He=ae.key;V!==null;){if(V.key===He)if(V.tag===4&&V.stateNode.containerInfo===ae.containerInfo&&V.stateNode.implementation===ae.implementation){o(re,V.sibling),V=p(V,ae.children||[]),V.return=re,re=V;break e}else{o(re,V);break}else t(re,V);V=V.sibling}V=Kc(ae,re.mode,Ce),V.return=re,re=V}return R(re);case Te:return He=ae._init,_t(re,V,He(ae._payload),Ce)}if(ve(ae))return Me(re,V,ae,Ce);if(J(ae))return ze(re,V,ae,Ce);go(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,V!==null&&V.tag===6?(o(re,V.sibling),V=p(V,ae),V.return=re,re=V):(o(re,V),V=Vc(ae,re.mode,Ce),V.return=re,re=V),R(re)):o(re,V)}return _t}var ia=Pd(!0),Rd=Pd(!1),po=Ln(null),yo=null,oa=null,nc=null;function sc(){nc=oa=yo=null}function ac(e){var t=po.current;pt(po),e._currentValue=t}function ic(e,t,o){for(;e!==null;){var d=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,d!==null&&(d.childLanes|=t)):d!==null&&(d.childLanes&t)!==t&&(d.childLanes|=t),e===o)break;e=e.return}}function la(e,t){yo=e,nc=oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(lr=!0),e.firstContext=null)}function Cr(e){var t=e._currentValue;if(nc!==e)if(e={context:e,memoizedValue:t,next:null},oa===null){if(yo===null)throw Error(r(308));oa=e,yo.dependencies={lanes:0,firstContext:e}}else oa=oa.next=e;return t}var ys=null;function oc(e){ys===null?ys=[e]:ys.push(e)}function Id(e,t,o,d){var p=t.interleaved;return p===null?(o.next=o,oc(t)):(o.next=p.next,p.next=o),t.interleaved=o,vn(e,d)}function vn(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Fn=!1;function lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Od(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,o){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,(at&2)!==0){var p=d.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),d.pending=t,vn(e,o)}return p=d.interleaved,p===null?(t.next=t,oc(d)):(t.next=p.next,p.next=t),d.interleaved=t,vn(e,o)}function vo(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var d=t.lanes;d&=e.pendingLanes,o|=d,t.lanes=o,Ms(e,o)}}function Dd(e,t){var o=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var p=null,b=null;if(o=o.firstBaseUpdate,o!==null){do{var R={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};b===null?p=b=R:b=b.next=R,o=o.next}while(o!==null);b===null?p=b=t:b=b.next=t}else p=b=t;o={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:d.shared,effects:d.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function xo(e,t,o,d){var p=e.updateQueue;Fn=!1;var b=p.firstBaseUpdate,R=p.lastBaseUpdate,$=p.shared.pending;if($!==null){p.shared.pending=null;var H=$,oe=H.next;H.next=null,R===null?b=oe:R.next=oe,R=H;var ke=e.alternate;ke!==null&&(ke=ke.updateQueue,$=ke.lastBaseUpdate,$!==R&&($===null?ke.firstBaseUpdate=oe:$.next=oe,ke.lastBaseUpdate=H))}if(b!==null){var _e=p.baseState;R=0,ke=oe=H=null,$=b;do{var be=$.lane,Oe=$.eventTime;if((d&be)===be){ke!==null&&(ke=ke.next={eventTime:Oe,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Me=e,ze=$;switch(be=t,Oe=o,ze.tag){case 1:if(Me=ze.payload,typeof Me=="function"){_e=Me.call(Oe,_e,be);break e}_e=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=ze.payload,be=typeof Me=="function"?Me.call(Oe,_e,be):Me,be==null)break e;_e=Q({},_e,be);break e;case 2:Fn=!0}}$.callback!==null&&$.lane!==0&&(e.flags|=64,be=p.effects,be===null?p.effects=[$]:be.push($))}else Oe={eventTime:Oe,lane:be,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ke===null?(oe=ke=Oe,H=_e):ke=ke.next=Oe,R|=be;if($=$.next,$===null){if($=p.shared.pending,$===null)break;be=$,$=be.next,be.next=null,p.lastBaseUpdate=be,p.shared.pending=null}}while(!0);if(ke===null&&(H=_e),p.baseState=H,p.firstBaseUpdate=oe,p.lastBaseUpdate=ke,t=p.shared.interleaved,t!==null){p=t;do R|=p.lane,p=p.next;while(p!==t)}else b===null&&(p.shared.lanes=0);ws|=R,e.lanes=R,e.memoizedState=_e}}function Ld(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var d=e[t],p=d.callback;if(p!==null){if(d.callback=null,d=o,typeof p!="function")throw Error(r(191,p));p.call(d)}}}var ri={},Yr=Ln(ri),ni=Ln(ri),si=Ln(ri);function vs(e){if(e===ri)throw Error(r(174));return e}function cc(e,t){switch(ft(si,t),ft(ni,e),ft(Yr,ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:et(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=et(t,e)}pt(Yr),ft(Yr,t)}function ca(){pt(Yr),pt(ni),pt(si)}function Ud(e){vs(si.current);var t=vs(Yr.current),o=et(t,e.type);t!==o&&(ft(ni,e),ft(Yr,o))}function uc(e){ni.current===e&&(pt(Yr),pt(ni))}var xt=Ln(0);function wo(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dc=[];function hc(){for(var e=0;e<dc.length;e++)dc[e]._workInProgressVersionPrimary=null;dc.length=0}var bo=D.ReactCurrentDispatcher,fc=D.ReactCurrentBatchConfig,xs=0,wt=null,jt=null,At=null,ko=!1,ai=!1,ii=0,Hg=0;function Wt(){throw Error(r(321))}function mc(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Dr(e[o],t[o]))return!1;return!0}function gc(e,t,o,d,p,b){if(xs=b,wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bo.current=e===null||e.memoizedState===null?Qg:Zg,e=o(d,p),ai){b=0;do{if(ai=!1,ii=0,25<=b)throw Error(r(301));b+=1,At=jt=null,t.updateQueue=null,bo.current=Jg,e=o(d,p)}while(ai)}if(bo.current=jo,t=jt!==null&&jt.next!==null,xs=0,At=jt=wt=null,ko=!1,t)throw Error(r(300));return e}function pc(){var e=ii!==0;return ii=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?wt.memoizedState=At=e:At=At.next=e,At}function Tr(){if(jt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=jt.next;var t=At===null?wt.memoizedState:At.next;if(t!==null)At=t,jt=e;else{if(e===null)throw Error(r(310));jt=e,e={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},At===null?wt.memoizedState=At=e:At=At.next=e}return At}function oi(e,t){return typeof t=="function"?t(e):t}function yc(e){var t=Tr(),o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var d=jt,p=d.baseQueue,b=o.pending;if(b!==null){if(p!==null){var R=p.next;p.next=b.next,b.next=R}d.baseQueue=p=b,o.pending=null}if(p!==null){b=p.next,d=d.baseState;var $=R=null,H=null,oe=b;do{var ke=oe.lane;if((xs&ke)===ke)H!==null&&(H=H.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),d=oe.hasEagerState?oe.eagerState:e(d,oe.action);else{var _e={lane:ke,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};H===null?($=H=_e,R=d):H=H.next=_e,wt.lanes|=ke,ws|=ke}oe=oe.next}while(oe!==null&&oe!==b);H===null?R=d:H.next=$,Dr(d,t.memoizedState)||(lr=!0),t.memoizedState=d,t.baseState=R,t.baseQueue=H,o.lastRenderedState=d}if(e=o.interleaved,e!==null){p=e;do b=p.lane,wt.lanes|=b,ws|=b,p=p.next;while(p!==e)}else p===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function vc(e){var t=Tr(),o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var d=o.dispatch,p=o.pending,b=t.memoizedState;if(p!==null){o.pending=null;var R=p=p.next;do b=e(b,R.action),R=R.next;while(R!==p);Dr(b,t.memoizedState)||(lr=!0),t.memoizedState=b,t.baseQueue===null&&(t.baseState=b),o.lastRenderedState=b}return[b,d]}function Md(){}function Fd(e,t){var o=wt,d=Tr(),p=t(),b=!Dr(d.memoizedState,p);if(b&&(d.memoizedState=p,lr=!0),d=d.queue,xc(Bd.bind(null,o,d,e),[e]),d.getSnapshot!==t||b||At!==null&&At.memoizedState.tag&1){if(o.flags|=2048,li(9,$d.bind(null,o,d,p,t),void 0,null),Pt===null)throw Error(r(349));(xs&30)!==0||zd(o,t,p)}return p}function zd(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function $d(e,t,o,d){t.value=o,t.getSnapshot=d,Wd(t)&&qd(e)}function Bd(e,t,o){return o(function(){Wd(t)&&qd(e)})}function Wd(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Dr(e,o)}catch{return!0}}function qd(e){var t=vn(e,1);t!==null&&zr(t,e,1,-1)}function Hd(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:e},t.queue=e,e=e.dispatch=Kg.bind(null,wt,e),[t.memoizedState,e]}function li(e,t,o,d){return e={tag:e,create:t,destroy:o,deps:d,next:null},t=wt.updateQueue,t===null?(t={lastEffect:null,stores:null},wt.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(d=o.next,o.next=e,e.next=d,t.lastEffect=e)),e}function Gd(){return Tr().memoizedState}function _o(e,t,o,d){var p=en();wt.flags|=e,p.memoizedState=li(1|t,o,void 0,d===void 0?null:d)}function So(e,t,o,d){var p=Tr();d=d===void 0?null:d;var b=void 0;if(jt!==null){var R=jt.memoizedState;if(b=R.destroy,d!==null&&mc(d,R.deps)){p.memoizedState=li(t,o,b,d);return}}wt.flags|=e,p.memoizedState=li(1|t,o,b,d)}function Vd(e,t){return _o(8390656,8,e,t)}function xc(e,t){return So(2048,8,e,t)}function Kd(e,t){return So(4,2,e,t)}function Qd(e,t){return So(4,4,e,t)}function Zd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jd(e,t,o){return o=o!=null?o.concat([e]):null,So(4,4,Zd.bind(null,t,e),o)}function wc(){}function Xd(e,t){var o=Tr();t=t===void 0?null:t;var d=o.memoizedState;return d!==null&&t!==null&&mc(t,d[1])?d[0]:(o.memoizedState=[e,t],e)}function Yd(e,t){var o=Tr();t=t===void 0?null:t;var d=o.memoizedState;return d!==null&&t!==null&&mc(t,d[1])?d[0]:(e=e(),o.memoizedState=[e,t],e)}function eh(e,t,o){return(xs&21)===0?(e.baseState&&(e.baseState=!1,lr=!0),e.memoizedState=o):(Dr(o,t)||(o=Tn(),wt.lanes|=o,ws|=o,e.baseState=!0),t)}function Gg(e,t){var o=st;st=o!==0&&4>o?o:4,e(!0);var d=fc.transition;fc.transition={};try{e(!1),t()}finally{st=o,fc.transition=d}}function th(){return Tr().memoizedState}function Vg(e,t,o){var d=qn(e);if(o={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null},rh(e))nh(t,o);else if(o=Id(e,t,o,d),o!==null){var p=Jt();zr(o,e,d,p),sh(o,t,d)}}function Kg(e,t,o){var d=qn(e),p={lane:d,action:o,hasEagerState:!1,eagerState:null,next:null};if(rh(e))nh(t,p);else{var b=e.alternate;if(e.lanes===0&&(b===null||b.lanes===0)&&(b=t.lastRenderedReducer,b!==null))try{var R=t.lastRenderedState,$=b(R,o);if(p.hasEagerState=!0,p.eagerState=$,Dr($,R)){var H=t.interleaved;H===null?(p.next=p,oc(t)):(p.next=H.next,H.next=p),t.interleaved=p;return}}catch{}finally{}o=Id(e,t,p,d),o!==null&&(p=Jt(),zr(o,e,d,p),sh(o,t,d))}}function rh(e){var t=e.alternate;return e===wt||t!==null&&t===wt}function nh(e,t){ai=ko=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function sh(e,t,o){if((o&4194240)!==0){var d=t.lanes;d&=e.pendingLanes,o|=d,t.lanes=o,Ms(e,o)}}var jo={readContext:Cr,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Qg={readContext:Cr,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Cr,useEffect:Vd,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,_o(4194308,4,Zd.bind(null,t,e),o)},useLayoutEffect:function(e,t){return _o(4194308,4,e,t)},useInsertionEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var o=en();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var d=en();return t=o!==void 0?o(t):t,d.memoizedState=d.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},d.queue=e,e=e.dispatch=Vg.bind(null,wt,e),[d.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:Hd,useDebugValue:wc,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=Hd(!1),t=e[0];return e=Gg.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var d=wt,p=en();if(vt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=t(),Pt===null)throw Error(r(349));(xs&30)!==0||zd(d,t,o)}p.memoizedState=o;var b={value:o,getSnapshot:t};return p.queue=b,Vd(Bd.bind(null,d,b,e),[e]),d.flags|=2048,li(9,$d.bind(null,d,b,o,t),void 0,null),o},useId:function(){var e=en(),t=Pt.identifierPrefix;if(vt){var o=yn,d=pn;o=(d&~(1<<32-rr(d)-1)).toString(32)+o,t=":"+t+"R"+o,o=ii++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=Hg++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zg={readContext:Cr,useCallback:Xd,useContext:Cr,useEffect:xc,useImperativeHandle:Jd,useInsertionEffect:Kd,useLayoutEffect:Qd,useMemo:Yd,useReducer:yc,useRef:Gd,useState:function(){return yc(oi)},useDebugValue:wc,useDeferredValue:function(e){var t=Tr();return eh(t,jt.memoizedState,e)},useTransition:function(){var e=yc(oi)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:Md,useSyncExternalStore:Fd,useId:th,unstable_isNewReconciler:!1},Jg={readContext:Cr,useCallback:Xd,useContext:Cr,useEffect:xc,useImperativeHandle:Jd,useInsertionEffect:Kd,useLayoutEffect:Qd,useMemo:Yd,useReducer:vc,useRef:Gd,useState:function(){return vc(oi)},useDebugValue:wc,useDeferredValue:function(e){var t=Tr();return jt===null?t.memoizedState=e:eh(t,jt.memoizedState,e)},useTransition:function(){var e=vc(oi)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:Md,useSyncExternalStore:Fd,useId:th,unstable_isNewReconciler:!1};function Ur(e,t){if(e&&e.defaultProps){t=Q({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function bc(e,t,o,d){t=e.memoizedState,o=o(d,t),o=o==null?t:Q({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var No={isMounted:function(e){return(e=e._reactInternals)?on(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var d=Jt(),p=qn(e),b=xn(d,p);b.payload=t,o!=null&&(b.callback=o),t=zn(e,b,p),t!==null&&(zr(t,e,p,d),vo(t,e,p))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var d=Jt(),p=qn(e),b=xn(d,p);b.tag=1,b.payload=t,o!=null&&(b.callback=o),t=zn(e,b,p),t!==null&&(zr(t,e,p,d),vo(t,e,p))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Jt(),d=qn(e),p=xn(o,d);p.tag=2,t!=null&&(p.callback=t),t=zn(e,p,d),t!==null&&(zr(t,e,d,o),vo(t,e,d))}};function ah(e,t,o,d,p,b,R){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,b,R):t.prototype&&t.prototype.isPureReactComponent?!Ka(o,d)||!Ka(p,b):!0}function ih(e,t,o){var d=!1,p=Un,b=t.contextType;return typeof b=="object"&&b!==null?b=Cr(b):(p=or(t)?ms:Bt.current,d=t.contextTypes,b=(d=d!=null)?ra(e,p):Un),t=new t(o,b),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=No,e.stateNode=t,t._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=b),t}function oh(e,t,o,d){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,d),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,d),t.state!==e&&No.enqueueReplaceState(t,t.state,null)}function kc(e,t,o,d){var p=e.stateNode;p.props=o,p.state=e.memoizedState,p.refs={},lc(e);var b=t.contextType;typeof b=="object"&&b!==null?p.context=Cr(b):(b=or(t)?ms:Bt.current,p.context=ra(e,b)),p.state=e.memoizedState,b=t.getDerivedStateFromProps,typeof b=="function"&&(bc(e,t,b,o),p.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(t=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),t!==p.state&&No.enqueueReplaceState(p,p.state,null),xo(e,o,p,d),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function ua(e,t){try{var o="",d=t;do o+=ie(d),d=d.return;while(d);var p=o}catch(b){p=`
Error generating stack: `+b.message+`
`+b.stack}return{value:e,source:t,stack:p,digest:null}}function _c(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function Sc(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var Xg=typeof WeakMap=="function"?WeakMap:Map;function lh(e,t,o){o=xn(-1,o),o.tag=3,o.payload={element:null};var d=t.value;return o.callback=function(){Io||(Io=!0,Fc=d),Sc(e,t)},o}function ch(e,t,o){o=xn(-1,o),o.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var p=t.value;o.payload=function(){return d(p)},o.callback=function(){Sc(e,t)}}var b=e.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(o.callback=function(){Sc(e,t),typeof d!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var R=t.stack;this.componentDidCatch(t.value,{componentStack:R!==null?R:""})}),o}function uh(e,t,o){var d=e.pingCache;if(d===null){d=e.pingCache=new Xg;var p=new Set;d.set(t,p)}else p=d.get(t),p===void 0&&(p=new Set,d.set(t,p));p.has(o)||(p.add(o),e=hp.bind(null,e,t,o),t.then(e,e))}function dh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hh(e,t,o,d,p){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=xn(-1,1),t.tag=2,zn(o,t,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var Yg=D.ReactCurrentOwner,lr=!1;function Zt(e,t,o,d){t.child=e===null?Rd(t,null,o,d):ia(t,e.child,o,d)}function fh(e,t,o,d,p){o=o.render;var b=t.ref;return la(t,p),d=gc(e,t,o,d,b,p),o=pc(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,wn(e,t,p)):(vt&&o&&Xl(t),t.flags|=1,Zt(e,t,d,p),t.child)}function mh(e,t,o,d,p){if(e===null){var b=o.type;return typeof b=="function"&&!Gc(b)&&b.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=b,gh(e,t,b,d,p)):(e=Fo(o.type,null,d,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(b=e.child,(e.lanes&p)===0){var R=b.memoizedProps;if(o=o.compare,o=o!==null?o:Ka,o(R,d)&&e.ref===t.ref)return wn(e,t,p)}return t.flags|=1,e=Gn(b,d),e.ref=t.ref,e.return=t,t.child=e}function gh(e,t,o,d,p){if(e!==null){var b=e.memoizedProps;if(Ka(b,d)&&e.ref===t.ref)if(lr=!1,t.pendingProps=d=b,(e.lanes&p)!==0)(e.flags&131072)!==0&&(lr=!0);else return t.lanes=e.lanes,wn(e,t,p)}return jc(e,t,o,d,p)}function ph(e,t,o){var d=t.pendingProps,p=d.children,b=e!==null?e.memoizedState:null;if(d.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ha,wr),wr|=o;else{if((o&1073741824)===0)return e=b!==null?b.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(ha,wr),wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=b!==null?b.baseLanes:o,ft(ha,wr),wr|=d}else b!==null?(d=b.baseLanes|o,t.memoizedState=null):d=o,ft(ha,wr),wr|=d;return Zt(e,t,p,o),t.child}function yh(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function jc(e,t,o,d,p){var b=or(o)?ms:Bt.current;return b=ra(t,b),la(t,p),o=gc(e,t,o,d,b,p),d=pc(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~p,wn(e,t,p)):(vt&&d&&Xl(t),t.flags|=1,Zt(e,t,o,p),t.child)}function vh(e,t,o,d,p){if(or(o)){var b=!0;co(t)}else b=!1;if(la(t,p),t.stateNode===null)Co(e,t),ih(t,o,d),kc(t,o,d,p),d=!0;else if(e===null){var R=t.stateNode,$=t.memoizedProps;R.props=$;var H=R.context,oe=o.contextType;typeof oe=="object"&&oe!==null?oe=Cr(oe):(oe=or(o)?ms:Bt.current,oe=ra(t,oe));var ke=o.getDerivedStateFromProps,_e=typeof ke=="function"||typeof R.getSnapshotBeforeUpdate=="function";_e||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||($!==d||H!==oe)&&oh(t,R,d,oe),Fn=!1;var be=t.memoizedState;R.state=be,xo(t,d,R,p),H=t.memoizedState,$!==d||be!==H||ir.current||Fn?(typeof ke=="function"&&(bc(t,o,ke,d),H=t.memoizedState),($=Fn||ah(t,o,$,d,be,H,oe))?(_e||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(t.flags|=4194308)):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=d,t.memoizedState=H),R.props=d,R.state=H,R.context=oe,d=$):(typeof R.componentDidMount=="function"&&(t.flags|=4194308),d=!1)}else{R=t.stateNode,Od(e,t),$=t.memoizedProps,oe=t.type===t.elementType?$:Ur(t.type,$),R.props=oe,_e=t.pendingProps,be=R.context,H=o.contextType,typeof H=="object"&&H!==null?H=Cr(H):(H=or(o)?ms:Bt.current,H=ra(t,H));var Oe=o.getDerivedStateFromProps;(ke=typeof Oe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||($!==_e||be!==H)&&oh(t,R,d,H),Fn=!1,be=t.memoizedState,R.state=be,xo(t,d,R,p);var Me=t.memoizedState;$!==_e||be!==Me||ir.current||Fn?(typeof Oe=="function"&&(bc(t,o,Oe,d),Me=t.memoizedState),(oe=Fn||ah(t,o,oe,d,be,Me,H)||!1)?(ke||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(d,Me,H),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(d,Me,H)),typeof R.componentDidUpdate=="function"&&(t.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof R.componentDidUpdate!="function"||$===e.memoizedProps&&be===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&be===e.memoizedState||(t.flags|=1024),t.memoizedProps=d,t.memoizedState=Me),R.props=d,R.state=Me,R.context=H,d=oe):(typeof R.componentDidUpdate!="function"||$===e.memoizedProps&&be===e.memoizedState||(t.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||$===e.memoizedProps&&be===e.memoizedState||(t.flags|=1024),d=!1)}return Nc(e,t,o,d,b,p)}function Nc(e,t,o,d,p,b){yh(e,t);var R=(t.flags&128)!==0;if(!d&&!R)return p&&_d(t,o,!1),wn(e,t,b);d=t.stateNode,Yg.current=t;var $=R&&typeof o.getDerivedStateFromError!="function"?null:d.render();return t.flags|=1,e!==null&&R?(t.child=ia(t,e.child,null,b),t.child=ia(t,null,$,b)):Zt(e,t,$,b),t.memoizedState=d.state,p&&_d(t,o,!0),t.child}function xh(e){var t=e.stateNode;t.pendingContext?bd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bd(e,t.context,!1),cc(e,t.containerInfo)}function wh(e,t,o,d,p){return aa(),rc(p),t.flags|=256,Zt(e,t,o,d),t.child}var Ec={dehydrated:null,treeContext:null,retryLane:0};function Cc(e){return{baseLanes:e,cachePool:null,transitions:null}}function bh(e,t,o){var d=t.pendingProps,p=xt.current,b=!1,R=(t.flags&128)!==0,$;if(($=R)||($=e!==null&&e.memoizedState===null?!1:(p&2)!==0),$?(b=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),ft(xt,p&1),e===null)return tc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(R=d.children,e=d.fallback,b?(d=t.mode,b=t.child,R={mode:"hidden",children:R},(d&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=R):b=zo(R,d,0,null),e=Ss(e,d,o,null),b.return=t,e.return=t,b.sibling=e,t.child=b,t.child.memoizedState=Cc(o),t.memoizedState=Ec,e):Tc(t,R));if(p=e.memoizedState,p!==null&&($=p.dehydrated,$!==null))return ep(e,t,R,d,$,p,o);if(b){b=d.fallback,R=t.mode,p=e.child,$=p.sibling;var H={mode:"hidden",children:d.children};return(R&1)===0&&t.child!==p?(d=t.child,d.childLanes=0,d.pendingProps=H,t.deletions=null):(d=Gn(p,H),d.subtreeFlags=p.subtreeFlags&14680064),$!==null?b=Gn($,b):(b=Ss(b,R,o,null),b.flags|=2),b.return=t,d.return=t,d.sibling=b,t.child=d,d=b,b=t.child,R=e.child.memoizedState,R=R===null?Cc(o):{baseLanes:R.baseLanes|o,cachePool:null,transitions:R.transitions},b.memoizedState=R,b.childLanes=e.childLanes&~o,t.memoizedState=Ec,d}return b=e.child,e=b.sibling,d=Gn(b,{mode:"visible",children:d.children}),(t.mode&1)===0&&(d.lanes=o),d.return=t,d.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=d,t.memoizedState=null,d}function Tc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Eo(e,t,o,d){return d!==null&&rc(d),ia(t,e.child,null,o),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ep(e,t,o,d,p,b,R){if(o)return t.flags&256?(t.flags&=-257,d=_c(Error(r(422))),Eo(e,t,R,d)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(b=d.fallback,p=t.mode,d=zo({mode:"visible",children:d.children},p,0,null),b=Ss(b,p,R,null),b.flags|=2,d.return=t,b.return=t,d.sibling=b,t.child=d,(t.mode&1)!==0&&ia(t,e.child,null,R),t.child.memoizedState=Cc(R),t.memoizedState=Ec,b);if((t.mode&1)===0)return Eo(e,t,R,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var $=d.dgst;return d=$,b=Error(r(419)),d=_c(b,d,void 0),Eo(e,t,R,d)}if($=(R&e.childLanes)!==0,lr||$){if(d=Pt,d!==null){switch(R&-R){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|R))!==0?0:p,p!==0&&p!==b.retryLane&&(b.retryLane=p,vn(e,p),zr(d,e,p,-1))}return Hc(),d=_c(Error(r(421))),Eo(e,t,R,d)}return p.data==="$?"?(t.flags|=128,t.child=e.child,t=fp.bind(null,e),p._reactRetry=t,null):(e=b.treeContext,xr=Dn(p.nextSibling),vr=t,vt=!0,Lr=null,e!==null&&(Nr[Er++]=pn,Nr[Er++]=yn,Nr[Er++]=gs,pn=e.id,yn=e.overflow,gs=t),t=Tc(t,d.children),t.flags|=4096,t)}function kh(e,t,o){e.lanes|=t;var d=e.alternate;d!==null&&(d.lanes|=t),ic(e.return,t,o)}function Ac(e,t,o,d,p){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:p}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=o,b.tailMode=p)}function _h(e,t,o){var d=t.pendingProps,p=d.revealOrder,b=d.tail;if(Zt(e,t,d.children,o),d=xt.current,(d&2)!==0)d=d&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kh(e,o,t);else if(e.tag===19)kh(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(ft(xt,d),(t.mode&1)===0)t.memoizedState=null;else switch(p){case"forwards":for(o=t.child,p=null;o!==null;)e=o.alternate,e!==null&&wo(e)===null&&(p=o),o=o.sibling;o=p,o===null?(p=t.child,t.child=null):(p=o.sibling,o.sibling=null),Ac(t,!1,p,o,b);break;case"backwards":for(o=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&wo(e)===null){t.child=p;break}e=p.sibling,p.sibling=o,o=p,p=e}Ac(t,!0,o,null,b);break;case"together":Ac(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Co(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wn(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),ws|=t.lanes,(o&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,o=Gn(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=Gn(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function tp(e,t,o){switch(t.tag){case 3:xh(t),aa();break;case 5:Ud(t);break;case 1:or(t.type)&&co(t);break;case 4:cc(t,t.stateNode.containerInfo);break;case 10:var d=t.type._context,p=t.memoizedProps.value;ft(po,d._currentValue),d._currentValue=p;break;case 13:if(d=t.memoizedState,d!==null)return d.dehydrated!==null?(ft(xt,xt.current&1),t.flags|=128,null):(o&t.child.childLanes)!==0?bh(e,t,o):(ft(xt,xt.current&1),e=wn(e,t,o),e!==null?e.sibling:null);ft(xt,xt.current&1);break;case 19:if(d=(o&t.childLanes)!==0,(e.flags&128)!==0){if(d)return _h(e,t,o);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ft(xt,xt.current),d)break;return null;case 22:case 23:return t.lanes=0,ph(e,t,o)}return wn(e,t,o)}var Sh,Pc,jh,Nh;Sh=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Pc=function(){},jh=function(e,t,o,d){var p=e.memoizedProps;if(p!==d){e=t.stateNode,vs(Yr.current);var b=null;switch(o){case"input":p=N(e,p),d=N(e,d),b=[];break;case"select":p=Q({},p,{value:void 0}),d=Q({},d,{value:void 0}),b=[];break;case"textarea":p=se(e,p),d=se(e,d),b=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=io)}Dt(o,d);var R;o=null;for(oe in p)if(!d.hasOwnProperty(oe)&&p.hasOwnProperty(oe)&&p[oe]!=null)if(oe==="style"){var $=p[oe];for(R in $)$.hasOwnProperty(R)&&(o||(o={}),o[R]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(l.hasOwnProperty(oe)?b||(b=[]):(b=b||[]).push(oe,null));for(oe in d){var H=d[oe];if($=p?.[oe],d.hasOwnProperty(oe)&&H!==$&&(H!=null||$!=null))if(oe==="style")if($){for(R in $)!$.hasOwnProperty(R)||H&&H.hasOwnProperty(R)||(o||(o={}),o[R]="");for(R in H)H.hasOwnProperty(R)&&$[R]!==H[R]&&(o||(o={}),o[R]=H[R])}else o||(b||(b=[]),b.push(oe,o)),o=H;else oe==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,$=$?$.__html:void 0,H!=null&&$!==H&&(b=b||[]).push(oe,H)):oe==="children"?typeof H!="string"&&typeof H!="number"||(b=b||[]).push(oe,""+H):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(l.hasOwnProperty(oe)?(H!=null&&oe==="onScroll"&&gt("scroll",e),b||$===H||(b=[])):(b=b||[]).push(oe,H))}o&&(b=b||[]).push("style",o);var oe=b;(t.updateQueue=oe)&&(t.flags|=4)}},Nh=function(e,t,o,d){o!==d&&(t.flags|=4)};function ci(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,d=0;if(t)for(var p=e.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)o|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=d,e.childLanes=o,t}function rp(e,t,o){var d=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(t),null;case 1:return or(t.type)&&lo(),qt(t),null;case 3:return d=t.stateNode,ca(),pt(ir),pt(Bt),hc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&(mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Lr!==null&&(Bc(Lr),Lr=null))),Pc(e,t),qt(t),null;case 5:uc(t);var p=vs(si.current);if(o=t.type,e!==null&&t.stateNode!=null)jh(e,t,o,d,p),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!d){if(t.stateNode===null)throw Error(r(166));return qt(t),null}if(e=vs(Yr.current),mo(t)){d=t.stateNode,o=t.type;var b=t.memoizedProps;switch(d[Xr]=t,d[Ya]=b,e=(t.mode&1)!==0,o){case"dialog":gt("cancel",d),gt("close",d);break;case"iframe":case"object":case"embed":gt("load",d);break;case"video":case"audio":for(p=0;p<Za.length;p++)gt(Za[p],d);break;case"source":gt("error",d);break;case"img":case"image":case"link":gt("error",d),gt("load",d);break;case"details":gt("toggle",d);break;case"input":he(d,b),gt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!b.multiple},gt("invalid",d);break;case"textarea":Se(d,b),gt("invalid",d)}Dt(o,b),p=null;for(var R in b)if(b.hasOwnProperty(R)){var $=b[R];R==="children"?typeof $=="string"?d.textContent!==$&&(b.suppressHydrationWarning!==!0&&ao(d.textContent,$,e),p=["children",$]):typeof $=="number"&&d.textContent!==""+$&&(b.suppressHydrationWarning!==!0&&ao(d.textContent,$,e),p=["children",""+$]):l.hasOwnProperty(R)&&$!=null&&R==="onScroll"&&gt("scroll",d)}switch(o){case"input":it(d),L(d,b,!0);break;case"textarea":it(d),Ne(d);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(d.onclick=io)}d=p,t.updateQueue=d,d!==null&&(t.flags|=4)}else{R=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$e(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=R.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=R.createElement(o,{is:d.is}):(e=R.createElement(o),o==="select"&&(R=e,d.multiple?R.multiple=!0:d.size&&(R.size=d.size))):e=R.createElementNS(e,o),e[Xr]=t,e[Ya]=d,Sh(e,t,!1,!1),t.stateNode=e;e:{switch(R=sn(o,d),o){case"dialog":gt("cancel",e),gt("close",e),p=d;break;case"iframe":case"object":case"embed":gt("load",e),p=d;break;case"video":case"audio":for(p=0;p<Za.length;p++)gt(Za[p],e);p=d;break;case"source":gt("error",e),p=d;break;case"img":case"image":case"link":gt("error",e),gt("load",e),p=d;break;case"details":gt("toggle",e),p=d;break;case"input":he(e,d),p=N(e,d),gt("invalid",e);break;case"option":p=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},p=Q({},d,{value:void 0}),gt("invalid",e);break;case"textarea":Se(e,d),p=se(e,d),gt("invalid",e);break;default:p=d}Dt(o,p),$=p;for(b in $)if($.hasOwnProperty(b)){var H=$[b];b==="style"?Ve(e,H):b==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Et(e,H)):b==="children"?typeof H=="string"?(o!=="textarea"||H!=="")&&er(e,H):typeof H=="number"&&er(e,""+H):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(l.hasOwnProperty(b)?H!=null&&b==="onScroll"&&gt("scroll",e):H!=null&&P(e,b,H,R))}switch(o){case"input":it(e),L(e,d,!1);break;case"textarea":it(e),Ne(e);break;case"option":d.value!=null&&e.setAttribute("value",""+Pe(d.value));break;case"select":e.multiple=!!d.multiple,b=d.value,b!=null?xe(e,!!d.multiple,b,!1):d.defaultValue!=null&&xe(e,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=io)}switch(o){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qt(t),null;case 6:if(e&&t.stateNode!=null)Nh(e,t,e.memoizedProps,d);else{if(typeof d!="string"&&t.stateNode===null)throw Error(r(166));if(o=vs(si.current),vs(Yr.current),mo(t)){if(d=t.stateNode,o=t.memoizedProps,d[Xr]=t,(b=d.nodeValue!==o)&&(e=vr,e!==null))switch(e.tag){case 3:ao(d.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ao(d.nodeValue,o,(e.mode&1)!==0)}b&&(t.flags|=4)}else d=(o.nodeType===9?o:o.ownerDocument).createTextNode(d),d[Xr]=t,t.stateNode=d}return qt(t),null;case 13:if(pt(xt),d=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&xr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Td(),aa(),t.flags|=98560,b=!1;else if(b=mo(t),d!==null&&d.dehydrated!==null){if(e===null){if(!b)throw Error(r(318));if(b=t.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Xr]=t}else aa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qt(t),b=!1}else Lr!==null&&(Bc(Lr),Lr=null),b=!0;if(!b)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=o,t):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(xt.current&1)!==0?Nt===0&&(Nt=3):Hc())),t.updateQueue!==null&&(t.flags|=4),qt(t),null);case 4:return ca(),Pc(e,t),e===null&&Ja(t.stateNode.containerInfo),qt(t),null;case 10:return ac(t.type._context),qt(t),null;case 17:return or(t.type)&&lo(),qt(t),null;case 19:if(pt(xt),b=t.memoizedState,b===null)return qt(t),null;if(d=(t.flags&128)!==0,R=b.rendering,R===null)if(d)ci(b,!1);else{if(Nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(R=wo(e),R!==null){for(t.flags|=128,ci(b,!1),d=R.updateQueue,d!==null&&(t.updateQueue=d,t.flags|=4),t.subtreeFlags=0,d=o,o=t.child;o!==null;)b=o,e=d,b.flags&=14680066,R=b.alternate,R===null?(b.childLanes=0,b.lanes=e,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=R.childLanes,b.lanes=R.lanes,b.child=R.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=R.memoizedProps,b.memoizedState=R.memoizedState,b.updateQueue=R.updateQueue,b.type=R.type,e=R.dependencies,b.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return ft(xt,xt.current&1|2),t.child}e=e.sibling}b.tail!==null&&yt()>fa&&(t.flags|=128,d=!0,ci(b,!1),t.lanes=4194304)}else{if(!d)if(e=wo(R),e!==null){if(t.flags|=128,d=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),ci(b,!0),b.tail===null&&b.tailMode==="hidden"&&!R.alternate&&!vt)return qt(t),null}else 2*yt()-b.renderingStartTime>fa&&o!==1073741824&&(t.flags|=128,d=!0,ci(b,!1),t.lanes=4194304);b.isBackwards?(R.sibling=t.child,t.child=R):(o=b.last,o!==null?o.sibling=R:t.child=R,b.last=R)}return b.tail!==null?(t=b.tail,b.rendering=t,b.tail=t.sibling,b.renderingStartTime=yt(),t.sibling=null,o=xt.current,ft(xt,d?o&1|2:o&1),t):(qt(t),null);case 22:case 23:return qc(),d=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(t.flags|=8192),d&&(t.mode&1)!==0?(wr&1073741824)!==0&&(qt(t),t.subtreeFlags&6&&(t.flags|=8192)):qt(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function np(e,t){switch(Yl(t),t.tag){case 1:return or(t.type)&&lo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ca(),pt(ir),pt(Bt),hc(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return uc(t),null;case 13:if(pt(xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pt(xt),null;case 4:return ca(),null;case 10:return ac(t.type._context),null;case 22:case 23:return qc(),null;case 24:return null;default:return null}}var To=!1,Ht=!1,sp=typeof WeakSet=="function"?WeakSet:Set,Le=null;function da(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(d){bt(e,t,d)}else o.current=null}function Rc(e,t,o){try{o()}catch(d){bt(e,t,d)}}var Eh=!1;function ap(e,t){if(ql=ge,e=ad(),Ll(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var p=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{o.nodeType,b.nodeType}catch{o=null;break e}var R=0,$=-1,H=-1,oe=0,ke=0,_e=e,be=null;t:for(;;){for(var Oe;_e!==o||p!==0&&_e.nodeType!==3||($=R+p),_e!==b||d!==0&&_e.nodeType!==3||(H=R+d),_e.nodeType===3&&(R+=_e.nodeValue.length),(Oe=_e.firstChild)!==null;)be=_e,_e=Oe;for(;;){if(_e===e)break t;if(be===o&&++oe===p&&($=R),be===b&&++ke===d&&(H=R),(Oe=_e.nextSibling)!==null)break;_e=be,be=_e.parentNode}_e=Oe}o=$===-1||H===-1?null:{start:$,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(Hl={focusedElem:e,selectionRange:o},ge=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var Me=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var ze=Me.memoizedProps,_t=Me.memoizedState,re=t.stateNode,V=re.getSnapshotBeforeUpdate(t.elementType===t.type?ze:Ur(t.type,ze),_t);re.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var ae=t.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ce){bt(t,t.return,Ce)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return Me=Eh,Eh=!1,Me}function ui(e,t,o){var d=t.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&e)===e){var b=p.destroy;p.destroy=void 0,b!==void 0&&Rc(t,o,b)}p=p.next}while(p!==d)}}function Ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var d=o.create;o.destroy=d()}o=o.next}while(o!==t)}}function Ic(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function Ch(e){var t=e.alternate;t!==null&&(e.alternate=null,Ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xr],delete t[Ya],delete t[Ql],delete t[$g],delete t[Bg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Th(e){return e.tag===5||e.tag===3||e.tag===4}function Ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oc(e,t,o){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=io));else if(d!==4&&(e=e.child,e!==null))for(Oc(e,t,o),e=e.sibling;e!==null;)Oc(e,t,o),e=e.sibling}function Dc(e,t,o){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(Dc(e,t,o),e=e.sibling;e!==null;)Dc(e,t,o),e=e.sibling}var Ft=null,Mr=!1;function $n(e,t,o){for(o=o.child;o!==null;)Ph(e,t,o),o=o.sibling}function Ph(e,t,o){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(Cn,o)}catch{}switch(o.tag){case 5:Ht||da(o,t);case 6:var d=Ft,p=Mr;Ft=null,$n(e,t,o),Ft=d,Mr=p,Ft!==null&&(Mr?(e=Ft,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Ft.removeChild(o.stateNode));break;case 18:Ft!==null&&(Mr?(e=Ft,o=o.stateNode,e.nodeType===8?Kl(e.parentNode,o):e.nodeType===1&&Kl(e,o),W(e)):Kl(Ft,o.stateNode));break;case 4:d=Ft,p=Mr,Ft=o.stateNode.containerInfo,Mr=!0,$n(e,t,o),Ft=d,Mr=p;break;case 0:case 11:case 14:case 15:if(!Ht&&(d=o.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var b=p,R=b.destroy;b=b.tag,R!==void 0&&((b&2)!==0||(b&4)!==0)&&Rc(o,t,R),p=p.next}while(p!==d)}$n(e,t,o);break;case 1:if(!Ht&&(da(o,t),d=o.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=o.memoizedProps,d.state=o.memoizedState,d.componentWillUnmount()}catch($){bt(o,t,$)}$n(e,t,o);break;case 21:$n(e,t,o);break;case 22:o.mode&1?(Ht=(d=Ht)||o.memoizedState!==null,$n(e,t,o),Ht=d):$n(e,t,o);break;default:$n(e,t,o)}}function Rh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new sp),t.forEach(function(d){var p=mp.bind(null,e,d);o.has(d)||(o.add(d),d.then(p,p))})}}function Fr(e,t){var o=t.deletions;if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];try{var b=e,R=t,$=R;e:for(;$!==null;){switch($.tag){case 5:Ft=$.stateNode,Mr=!1;break e;case 3:Ft=$.stateNode.containerInfo,Mr=!0;break e;case 4:Ft=$.stateNode.containerInfo,Mr=!0;break e}$=$.return}if(Ft===null)throw Error(r(160));Ph(b,R,p),Ft=null,Mr=!1;var H=p.alternate;H!==null&&(H.return=null),p.return=null}catch(oe){bt(p,t,oe)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ih(t,e),t=t.sibling}function Ih(e,t){var o=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fr(t,e),tn(e),d&4){try{ui(3,e,e.return),Ao(3,e)}catch(ze){bt(e,e.return,ze)}try{ui(5,e,e.return)}catch(ze){bt(e,e.return,ze)}}break;case 1:Fr(t,e),tn(e),d&512&&o!==null&&da(o,o.return);break;case 5:if(Fr(t,e),tn(e),d&512&&o!==null&&da(o,o.return),e.flags&32){var p=e.stateNode;try{er(p,"")}catch(ze){bt(e,e.return,ze)}}if(d&4&&(p=e.stateNode,p!=null)){var b=e.memoizedProps,R=o!==null?o.memoizedProps:b,$=e.type,H=e.updateQueue;if(e.updateQueue=null,H!==null)try{$==="input"&&b.type==="radio"&&b.name!=null&&Y(p,b),sn($,R);var oe=sn($,b);for(R=0;R<H.length;R+=2){var ke=H[R],_e=H[R+1];ke==="style"?Ve(p,_e):ke==="dangerouslySetInnerHTML"?Et(p,_e):ke==="children"?er(p,_e):P(p,ke,_e,oe)}switch($){case"input":F(p,b);break;case"textarea":Re(p,b);break;case"select":var be=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!b.multiple;var Oe=b.value;Oe!=null?xe(p,!!b.multiple,Oe,!1):be!==!!b.multiple&&(b.defaultValue!=null?xe(p,!!b.multiple,b.defaultValue,!0):xe(p,!!b.multiple,b.multiple?[]:"",!1))}p[Ya]=b}catch(ze){bt(e,e.return,ze)}}break;case 6:if(Fr(t,e),tn(e),d&4){if(e.stateNode===null)throw Error(r(162));p=e.stateNode,b=e.memoizedProps;try{p.nodeValue=b}catch(ze){bt(e,e.return,ze)}}break;case 3:if(Fr(t,e),tn(e),d&4&&o!==null&&o.memoizedState.isDehydrated)try{W(t.containerInfo)}catch(ze){bt(e,e.return,ze)}break;case 4:Fr(t,e),tn(e);break;case 13:Fr(t,e),tn(e),p=e.child,p.flags&8192&&(b=p.memoizedState!==null,p.stateNode.isHidden=b,!b||p.alternate!==null&&p.alternate.memoizedState!==null||(Mc=yt())),d&4&&Rh(e);break;case 22:if(ke=o!==null&&o.memoizedState!==null,e.mode&1?(Ht=(oe=Ht)||ke,Fr(t,e),Ht=oe):Fr(t,e),tn(e),d&8192){if(oe=e.memoizedState!==null,(e.stateNode.isHidden=oe)&&!ke&&(e.mode&1)!==0)for(Le=e,ke=e.child;ke!==null;){for(_e=Le=ke;Le!==null;){switch(be=Le,Oe=be.child,be.tag){case 0:case 11:case 14:case 15:ui(4,be,be.return);break;case 1:da(be,be.return);var Me=be.stateNode;if(typeof Me.componentWillUnmount=="function"){d=be,o=be.return;try{t=d,Me.props=t.memoizedProps,Me.state=t.memoizedState,Me.componentWillUnmount()}catch(ze){bt(d,o,ze)}}break;case 5:da(be,be.return);break;case 22:if(be.memoizedState!==null){Lh(_e);continue}}Oe!==null?(Oe.return=be,Le=Oe):Lh(_e)}ke=ke.sibling}e:for(ke=null,_e=e;;){if(_e.tag===5){if(ke===null){ke=_e;try{p=_e.stateNode,oe?(b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):($=_e.stateNode,H=_e.memoizedProps.style,R=H!=null&&H.hasOwnProperty("display")?H.display:null,$.style.display=ht("display",R))}catch(ze){bt(e,e.return,ze)}}}else if(_e.tag===6){if(ke===null)try{_e.stateNode.nodeValue=oe?"":_e.memoizedProps}catch(ze){bt(e,e.return,ze)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===e)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)break e;ke===_e&&(ke=null),_e=_e.return}ke===_e&&(ke=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:Fr(t,e),tn(e),d&4&&Rh(e);break;case 21:break;default:Fr(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(Th(o)){var d=o;break e}o=o.return}throw Error(r(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(er(p,""),d.flags&=-33);var b=Ah(e);Dc(e,b,p);break;case 3:case 4:var R=d.stateNode.containerInfo,$=Ah(e);Oc(e,$,R);break;default:throw Error(r(161))}}catch(H){bt(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ip(e,t,o){Le=e,Oh(e)}function Oh(e,t,o){for(var d=(e.mode&1)!==0;Le!==null;){var p=Le,b=p.child;if(p.tag===22&&d){var R=p.memoizedState!==null||To;if(!R){var $=p.alternate,H=$!==null&&$.memoizedState!==null||Ht;$=To;var oe=Ht;if(To=R,(Ht=H)&&!oe)for(Le=p;Le!==null;)R=Le,H=R.child,R.tag===22&&R.memoizedState!==null?Uh(p):H!==null?(H.return=R,Le=H):Uh(p);for(;b!==null;)Le=b,Oh(b),b=b.sibling;Le=p,To=$,Ht=oe}Dh(e)}else(p.subtreeFlags&8772)!==0&&b!==null?(b.return=p,Le=b):Dh(e)}}function Dh(e){for(;Le!==null;){var t=Le;if((t.flags&8772)!==0){var o=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ht||Ao(5,t);break;case 1:var d=t.stateNode;if(t.flags&4&&!Ht)if(o===null)d.componentDidMount();else{var p=t.elementType===t.type?o.memoizedProps:Ur(t.type,o.memoizedProps);d.componentDidUpdate(p,o.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var b=t.updateQueue;b!==null&&Ld(t,b,d);break;case 3:var R=t.updateQueue;if(R!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}Ld(t,R,o)}break;case 5:var $=t.stateNode;if(o===null&&t.flags&4){o=$;var H=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&o.focus();break;case"img":H.src&&(o.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var oe=t.alternate;if(oe!==null){var ke=oe.memoizedState;if(ke!==null){var _e=ke.dehydrated;_e!==null&&W(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ht||t.flags&512&&Ic(t)}catch(be){bt(t,t.return,be)}}if(t===e){Le=null;break}if(o=t.sibling,o!==null){o.return=t.return,Le=o;break}Le=t.return}}function Lh(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Le=o;break}Le=t.return}}function Uh(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{Ao(4,t)}catch(H){bt(t,o,H)}break;case 1:var d=t.stateNode;if(typeof d.componentDidMount=="function"){var p=t.return;try{d.componentDidMount()}catch(H){bt(t,p,H)}}var b=t.return;try{Ic(t)}catch(H){bt(t,b,H)}break;case 5:var R=t.return;try{Ic(t)}catch(H){bt(t,R,H)}}}catch(H){bt(t,t.return,H)}if(t===e){Le=null;break}var $=t.sibling;if($!==null){$.return=t.return,Le=$;break}Le=t.return}}var op=Math.ceil,Po=D.ReactCurrentDispatcher,Lc=D.ReactCurrentOwner,Ar=D.ReactCurrentBatchConfig,at=0,Pt=null,St=null,zt=0,wr=0,ha=Ln(0),Nt=0,di=null,ws=0,Ro=0,Uc=0,hi=null,cr=null,Mc=0,fa=1/0,bn=null,Io=!1,Fc=null,Bn=null,Oo=!1,Wn=null,Do=0,fi=0,zc=null,Lo=-1,Uo=0;function Jt(){return(at&6)!==0?yt():Lo!==-1?Lo:Lo=yt()}function qn(e){return(e.mode&1)===0?1:(at&2)!==0&&zt!==0?zt&-zt:qg.transition!==null?(Uo===0&&(Uo=Tn()),Uo):(e=st,e!==0||(e=window.event,e=e===void 0?16:$a(e.type)),e)}function zr(e,t,o,d){if(50<fi)throw fi=0,zc=null,Error(r(185));ls(e,o,d),((at&2)===0||e!==Pt)&&(e===Pt&&((at&2)===0&&(Ro|=o),Nt===4&&Hn(e,zt)),ur(e,d),o===1&&at===0&&(t.mode&1)===0&&(fa=yt()+500,uo&&Mn()))}function ur(e,t){var o=e.callbackNode;bl(e,t);var d=hn(e,e===Pt?zt:0);if(d===0)o!==null&&fr(o),e.callbackNode=null,e.callbackPriority=0;else if(t=d&-d,e.callbackPriority!==t){if(o!=null&&fr(o),t===1)e.tag===0?Wg(Fh.bind(null,e)):Sd(Fh.bind(null,e)),Fg(function(){(at&6)===0&&Mn()}),o=null;else{switch(Fs(d)){case 1:o=ln;break;case 4:o=Ua;break;case 16:o=cn;break;case 536870912:o=un;break;default:o=cn}o=Vh(o,Mh.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function Mh(e,t){if(Lo=-1,Uo=0,(at&6)!==0)throw Error(r(327));var o=e.callbackNode;if(ma()&&e.callbackNode!==o)return null;var d=hn(e,e===Pt?zt:0);if(d===0)return null;if((d&30)!==0||(d&e.expiredLanes)!==0||t)t=Mo(e,d);else{t=d;var p=at;at|=2;var b=$h();(Pt!==e||zt!==t)&&(bn=null,fa=yt()+500,ks(e,t));do try{up();break}catch($){zh(e,$)}while(!0);sc(),Po.current=b,at=p,St!==null?t=0:(Pt=null,zt=0,t=Nt)}if(t!==0){if(t===2&&(p=Fa(e),p!==0&&(d=p,t=$c(e,p))),t===1)throw o=di,ks(e,0),Hn(e,d),ur(e,yt()),o;if(t===6)Hn(e,d);else{if(p=e.current.alternate,(d&30)===0&&!lp(p)&&(t=Mo(e,d),t===2&&(b=Fa(e),b!==0&&(d=b,t=$c(e,b))),t===1))throw o=di,ks(e,0),Hn(e,d),ur(e,yt()),o;switch(e.finishedWork=p,e.finishedLanes=d,t){case 0:case 1:throw Error(r(345));case 2:_s(e,cr,bn);break;case 3:if(Hn(e,d),(d&130023424)===d&&(t=Mc+500-yt(),10<t)){if(hn(e,0)!==0)break;if(p=e.suspendedLanes,(p&d)!==d){Jt(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=Vl(_s.bind(null,e,cr,bn),t);break}_s(e,cr,bn);break;case 4:if(Hn(e,d),(d&4194240)===d)break;for(t=e.eventTimes,p=-1;0<d;){var R=31-rr(d);b=1<<R,R=t[R],R>p&&(p=R),d&=~b}if(d=p,d=yt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*op(d/1960))-d,10<d){e.timeoutHandle=Vl(_s.bind(null,e,cr,bn),d);break}_s(e,cr,bn);break;case 5:_s(e,cr,bn);break;default:throw Error(r(329))}}}return ur(e,yt()),e.callbackNode===o?Mh.bind(null,e):null}function $c(e,t){var o=hi;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=Mo(e,t),e!==2&&(t=cr,cr=o,t!==null&&Bc(t)),e}function Bc(e){cr===null?cr=e:cr.push.apply(cr,e)}function lp(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var d=0;d<o.length;d++){var p=o[d],b=p.getSnapshot;p=p.value;try{if(!Dr(b(),p))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hn(e,t){for(t&=~Uc,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-rr(t),d=1<<o;e[o]=-1,t&=~d}}function Fh(e){if((at&6)!==0)throw Error(r(327));ma();var t=hn(e,0);if((t&1)===0)return ur(e,yt()),null;var o=Mo(e,t);if(e.tag!==0&&o===2){var d=Fa(e);d!==0&&(t=d,o=$c(e,d))}if(o===1)throw o=di,ks(e,0),Hn(e,t),ur(e,yt()),o;if(o===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_s(e,cr,bn),ur(e,yt()),null}function Wc(e,t){var o=at;at|=1;try{return e(t)}finally{at=o,at===0&&(fa=yt()+500,uo&&Mn())}}function bs(e){Wn!==null&&Wn.tag===0&&(at&6)===0&&ma();var t=at;at|=1;var o=Ar.transition,d=st;try{if(Ar.transition=null,st=1,e)return e()}finally{st=d,Ar.transition=o,at=t,(at&6)===0&&Mn()}}function qc(){wr=ha.current,pt(ha)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Mg(o)),St!==null)for(o=St.return;o!==null;){var d=o;switch(Yl(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&lo();break;case 3:ca(),pt(ir),pt(Bt),hc();break;case 5:uc(d);break;case 4:ca();break;case 13:pt(xt);break;case 19:pt(xt);break;case 10:ac(d.type._context);break;case 22:case 23:qc()}o=o.return}if(Pt=e,St=e=Gn(e.current,null),zt=wr=t,Nt=0,di=null,Uc=Ro=ws=0,cr=hi=null,ys!==null){for(t=0;t<ys.length;t++)if(o=ys[t],d=o.interleaved,d!==null){o.interleaved=null;var p=d.next,b=o.pending;if(b!==null){var R=b.next;b.next=p,d.next=R}o.pending=d}ys=null}return e}function zh(e,t){do{var o=St;try{if(sc(),bo.current=jo,ko){for(var d=wt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}ko=!1}if(xs=0,At=jt=wt=null,ai=!1,ii=0,Lc.current=null,o===null||o.return===null){Nt=1,di=t,St=null;break}e:{var b=e,R=o.return,$=o,H=t;if(t=zt,$.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var oe=H,ke=$,_e=ke.tag;if((ke.mode&1)===0&&(_e===0||_e===11||_e===15)){var be=ke.alternate;be?(ke.updateQueue=be.updateQueue,ke.memoizedState=be.memoizedState,ke.lanes=be.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var Oe=dh(R);if(Oe!==null){Oe.flags&=-257,hh(Oe,R,$,b,t),Oe.mode&1&&uh(b,oe,t),t=Oe,H=oe;var Me=t.updateQueue;if(Me===null){var ze=new Set;ze.add(H),t.updateQueue=ze}else Me.add(H);break e}else{if((t&1)===0){uh(b,oe,t),Hc();break e}H=Error(r(426))}}else if(vt&&$.mode&1){var _t=dh(R);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),hh(_t,R,$,b,t),rc(ua(H,$));break e}}b=H=ua(H,$),Nt!==4&&(Nt=2),hi===null?hi=[b]:hi.push(b),b=R;do{switch(b.tag){case 3:b.flags|=65536,t&=-t,b.lanes|=t;var re=lh(b,H,t);Dd(b,re);break e;case 1:$=H;var V=b.type,ae=b.stateNode;if((b.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(Bn===null||!Bn.has(ae)))){b.flags|=65536,t&=-t,b.lanes|=t;var Ce=ch(b,$,t);Dd(b,Ce);break e}}b=b.return}while(b!==null)}Wh(o)}catch(Be){t=Be,St===o&&o!==null&&(St=o=o.return);continue}break}while(!0)}function $h(){var e=Po.current;return Po.current=jo,e===null?jo:e}function Hc(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Pt===null||(ws&268435455)===0&&(Ro&268435455)===0||Hn(Pt,zt)}function Mo(e,t){var o=at;at|=2;var d=$h();(Pt!==e||zt!==t)&&(bn=null,ks(e,t));do try{cp();break}catch(p){zh(e,p)}while(!0);if(sc(),at=o,Po.current=d,St!==null)throw Error(r(261));return Pt=null,zt=0,Nt}function cp(){for(;St!==null;)Bh(St)}function up(){for(;St!==null&&!Ls();)Bh(St)}function Bh(e){var t=Gh(e.alternate,e,wr);e.memoizedProps=e.pendingProps,t===null?Wh(e):St=t,Lc.current=null}function Wh(e){var t=e;do{var o=t.alternate;if(e=t.return,(t.flags&32768)===0){if(o=rp(o,t,wr),o!==null){St=o;return}}else{if(o=np(o,t),o!==null){o.flags&=32767,St=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nt=6,St=null;return}}if(t=t.sibling,t!==null){St=t;return}St=t=e}while(t!==null);Nt===0&&(Nt=5)}function _s(e,t,o){var d=st,p=Ar.transition;try{Ar.transition=null,st=1,dp(e,t,o,d)}finally{Ar.transition=p,st=d}return null}function dp(e,t,o,d){do ma();while(Wn!==null);if((at&6)!==0)throw Error(r(327));o=e.finishedWork;var p=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var b=o.lanes|o.childLanes;if(za(e,b),e===Pt&&(St=Pt=null,zt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Oo||(Oo=!0,Vh(cn,function(){return ma(),null})),b=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||b){b=Ar.transition,Ar.transition=null;var R=st;st=1;var $=at;at|=4,Lc.current=null,ap(e,o),Ih(o,e),Pg(Hl),ge=!!ql,Hl=ql=null,e.current=o,ip(o),La(),at=$,st=R,Ar.transition=b}else e.current=o;if(Oo&&(Oo=!1,Wn=e,Do=p),b=e.pendingLanes,b===0&&(Bn=null),Wi(o.stateNode),ur(e,yt()),t!==null)for(d=e.onRecoverableError,o=0;o<t.length;o++)p=t[o],d(p.value,{componentStack:p.stack,digest:p.digest});if(Io)throw Io=!1,e=Fc,Fc=null,e;return(Do&1)!==0&&e.tag!==0&&ma(),b=e.pendingLanes,(b&1)!==0?e===zc?fi++:(fi=0,zc=e):fi=0,Mn(),null}function ma(){if(Wn!==null){var e=Fs(Do),t=Ar.transition,o=st;try{if(Ar.transition=null,st=16>e?16:e,Wn===null)var d=!1;else{if(e=Wn,Wn=null,Do=0,(at&6)!==0)throw Error(r(331));var p=at;for(at|=4,Le=e.current;Le!==null;){var b=Le,R=b.child;if((Le.flags&16)!==0){var $=b.deletions;if($!==null){for(var H=0;H<$.length;H++){var oe=$[H];for(Le=oe;Le!==null;){var ke=Le;switch(ke.tag){case 0:case 11:case 15:ui(8,ke,b)}var _e=ke.child;if(_e!==null)_e.return=ke,Le=_e;else for(;Le!==null;){ke=Le;var be=ke.sibling,Oe=ke.return;if(Ch(ke),ke===oe){Le=null;break}if(be!==null){be.return=Oe,Le=be;break}Le=Oe}}}var Me=b.alternate;if(Me!==null){var ze=Me.child;if(ze!==null){Me.child=null;do{var _t=ze.sibling;ze.sibling=null,ze=_t}while(ze!==null)}}Le=b}}if((b.subtreeFlags&2064)!==0&&R!==null)R.return=b,Le=R;else e:for(;Le!==null;){if(b=Le,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ui(9,b,b.return)}var re=b.sibling;if(re!==null){re.return=b.return,Le=re;break e}Le=b.return}}var V=e.current;for(Le=V;Le!==null;){R=Le;var ae=R.child;if((R.subtreeFlags&2064)!==0&&ae!==null)ae.return=R,Le=ae;else e:for(R=V;Le!==null;){if($=Le,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Ao(9,$)}}catch(Be){bt($,$.return,Be)}if($===R){Le=null;break e}var Ce=$.sibling;if(Ce!==null){Ce.return=$.return,Le=Ce;break e}Le=$.return}}if(at=p,Mn(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(Cn,e)}catch{}d=!0}return d}finally{st=o,Ar.transition=t}}return!1}function qh(e,t,o){t=ua(o,t),t=lh(e,t,1),e=zn(e,t,1),t=Jt(),e!==null&&(ls(e,1,t),ur(e,t))}function bt(e,t,o){if(e.tag===3)qh(e,e,o);else for(;t!==null;){if(t.tag===3){qh(t,e,o);break}else if(t.tag===1){var d=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Bn===null||!Bn.has(d))){e=ua(o,e),e=ch(t,e,1),t=zn(t,e,1),e=Jt(),t!==null&&(ls(t,1,e),ur(t,e));break}}t=t.return}}function hp(e,t,o){var d=e.pingCache;d!==null&&d.delete(t),t=Jt(),e.pingedLanes|=e.suspendedLanes&o,Pt===e&&(zt&o)===o&&(Nt===4||Nt===3&&(zt&130023424)===zt&&500>yt()-Mc?ks(e,0):Uc|=o),ur(e,t)}function Hh(e,t){t===0&&((e.mode&1)===0?t=1:(t=dn,dn<<=1,(dn&130023424)===0&&(dn=4194304)));var o=Jt();e=vn(e,t),e!==null&&(ls(e,t,o),ur(e,o))}function fp(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Hh(e,o)}function mp(e,t){var o=0;switch(e.tag){case 13:var d=e.stateNode,p=e.memoizedState;p!==null&&(o=p.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(r(314))}d!==null&&d.delete(t),Hh(e,o)}var Gh;Gh=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)lr=!0;else{if((e.lanes&o)===0&&(t.flags&128)===0)return lr=!1,tp(e,t,o);lr=(e.flags&131072)!==0}else lr=!1,vt&&(t.flags&1048576)!==0&&jd(t,fo,t.index);switch(t.lanes=0,t.tag){case 2:var d=t.type;Co(e,t),e=t.pendingProps;var p=ra(t,Bt.current);la(t,o),p=gc(null,t,d,e,p,o);var b=pc();return t.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,or(d)?(b=!0,co(t)):b=!1,t.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,lc(t),p.updater=No,t.stateNode=p,p._reactInternals=t,kc(t,d,e,o),t=Nc(null,t,d,!0,b,o)):(t.tag=0,vt&&b&&Xl(t),Zt(null,t,p,o),t=t.child),t;case 16:d=t.elementType;e:{switch(Co(e,t),e=t.pendingProps,p=d._init,d=p(d._payload),t.type=d,p=t.tag=pp(d),e=Ur(d,e),p){case 0:t=jc(null,t,d,e,o);break e;case 1:t=vh(null,t,d,e,o);break e;case 11:t=fh(null,t,d,e,o);break e;case 14:t=mh(null,t,d,Ur(d.type,e),o);break e}throw Error(r(306,d,""))}return t;case 0:return d=t.type,p=t.pendingProps,p=t.elementType===d?p:Ur(d,p),jc(e,t,d,p,o);case 1:return d=t.type,p=t.pendingProps,p=t.elementType===d?p:Ur(d,p),vh(e,t,d,p,o);case 3:e:{if(xh(t),e===null)throw Error(r(387));d=t.pendingProps,b=t.memoizedState,p=b.element,Od(e,t),xo(t,d,null,o);var R=t.memoizedState;if(d=R.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},t.updateQueue.baseState=b,t.memoizedState=b,t.flags&256){p=ua(Error(r(423)),t),t=wh(e,t,d,o,p);break e}else if(d!==p){p=ua(Error(r(424)),t),t=wh(e,t,d,o,p);break e}else for(xr=Dn(t.stateNode.containerInfo.firstChild),vr=t,vt=!0,Lr=null,o=Rd(t,null,d,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(aa(),d===p){t=wn(e,t,o);break e}Zt(e,t,d,o)}t=t.child}return t;case 5:return Ud(t),e===null&&tc(t),d=t.type,p=t.pendingProps,b=e!==null?e.memoizedProps:null,R=p.children,Gl(d,p)?R=null:b!==null&&Gl(d,b)&&(t.flags|=32),yh(e,t),Zt(e,t,R,o),t.child;case 6:return e===null&&tc(t),null;case 13:return bh(e,t,o);case 4:return cc(t,t.stateNode.containerInfo),d=t.pendingProps,e===null?t.child=ia(t,null,d,o):Zt(e,t,d,o),t.child;case 11:return d=t.type,p=t.pendingProps,p=t.elementType===d?p:Ur(d,p),fh(e,t,d,p,o);case 7:return Zt(e,t,t.pendingProps,o),t.child;case 8:return Zt(e,t,t.pendingProps.children,o),t.child;case 12:return Zt(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(d=t.type._context,p=t.pendingProps,b=t.memoizedProps,R=p.value,ft(po,d._currentValue),d._currentValue=R,b!==null)if(Dr(b.value,R)){if(b.children===p.children&&!ir.current){t=wn(e,t,o);break e}}else for(b=t.child,b!==null&&(b.return=t);b!==null;){var $=b.dependencies;if($!==null){R=b.child;for(var H=$.firstContext;H!==null;){if(H.context===d){if(b.tag===1){H=xn(-1,o&-o),H.tag=2;var oe=b.updateQueue;if(oe!==null){oe=oe.shared;var ke=oe.pending;ke===null?H.next=H:(H.next=ke.next,ke.next=H),oe.pending=H}}b.lanes|=o,H=b.alternate,H!==null&&(H.lanes|=o),ic(b.return,o,t),$.lanes|=o;break}H=H.next}}else if(b.tag===10)R=b.type===t.type?null:b.child;else if(b.tag===18){if(R=b.return,R===null)throw Error(r(341));R.lanes|=o,$=R.alternate,$!==null&&($.lanes|=o),ic(R,o,t),R=b.sibling}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===t){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}Zt(e,t,p.children,o),t=t.child}return t;case 9:return p=t.type,d=t.pendingProps.children,la(t,o),p=Cr(p),d=d(p),t.flags|=1,Zt(e,t,d,o),t.child;case 14:return d=t.type,p=Ur(d,t.pendingProps),p=Ur(d.type,p),mh(e,t,d,p,o);case 15:return gh(e,t,t.type,t.pendingProps,o);case 17:return d=t.type,p=t.pendingProps,p=t.elementType===d?p:Ur(d,p),Co(e,t),t.tag=1,or(d)?(e=!0,co(t)):e=!1,la(t,o),ih(t,d,p),kc(t,d,p,o),Nc(null,t,d,!0,e,o);case 19:return _h(e,t,o);case 22:return ph(e,t,o)}throw Error(r(156,t.tag))};function Vh(e,t){return zi(e,t)}function gp(e,t,o,d){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,o,d){return new gp(e,t,o,d)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pp(e){if(typeof e=="function")return Gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===B)return 11;if(e===ue)return 14}return 2}function Gn(e,t){var o=e.alternate;return o===null?(o=Pr(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Fo(e,t,o,d,p,b){var R=2;if(d=e,typeof e=="function")Gc(e)&&(R=1);else if(typeof e=="string")R=5;else e:switch(e){case q:return Ss(o.children,p,b,t);case ne:R=8,p|=8;break;case ee:return e=Pr(12,o,t,p|2),e.elementType=ee,e.lanes=b,e;case Z:return e=Pr(13,o,t,p),e.elementType=Z,e.lanes=b,e;case T:return e=Pr(19,o,t,p),e.elementType=T,e.lanes=b,e;case me:return zo(o,p,b,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:R=10;break e;case pe:R=9;break e;case B:R=11;break e;case ue:R=14;break e;case Te:R=16,d=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=Pr(R,o,t,p),t.elementType=e,t.type=d,t.lanes=b,t}function Ss(e,t,o,d){return e=Pr(7,e,d,t),e.lanes=o,e}function zo(e,t,o,d){return e=Pr(22,e,d,t),e.elementType=me,e.lanes=o,e.stateNode={isHidden:!1},e}function Vc(e,t,o){return e=Pr(6,e,null,t),e.lanes=o,e}function Kc(e,t,o){return t=Pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yp(e,t,o,d,p){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Qc(e,t,o,d,p,b,R,$,H){return e=new yp(e,t,o,$,H),t===1?(t=1,b===!0&&(t|=8)):t=0,b=Pr(3,null,null,t),e.current=b,b.stateNode=e,b.memoizedState={element:d,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},lc(b),e}function vp(e,t,o){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:d==null?null:""+d,children:e,containerInfo:t,implementation:o}}function Kh(e){if(!e)return Un;e=e._reactInternals;e:{if(on(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var o=e.type;if(or(o))return kd(e,o,t)}return t}function Qh(e,t,o,d,p,b,R,$,H){return e=Qc(o,d,!0,e,p,b,R,$,H),e.context=Kh(null),o=e.current,d=Jt(),p=qn(o),b=xn(d,p),b.callback=t??null,zn(o,b,p),e.current.lanes=p,ls(e,p,d),ur(e,d),e}function $o(e,t,o,d){var p=t.current,b=Jt(),R=qn(p);return o=Kh(o),t.context===null?t.context=o:t.pendingContext=o,t=xn(b,R),t.payload={element:e},d=d===void 0?null:d,d!==null&&(t.callback=d),e=zn(p,t,R),e!==null&&(zr(e,p,R,b),vo(e,p,R)),R}function Bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Zc(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function xp(){return null}var Jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}Wo.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));$o(e,t,null,null)},Wo.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bs(function(){$o(null,e,null,null)}),t[mn]=null}};function Wo(e){this._internalRoot=e}Wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vr();e={blockedOn:null,target:e,priority:t};for(var o=0;o<Or.length&&t!==0&&t<Or[o].priority;o++);Or.splice(o,0,e),o===0&&$s(e)}};function Xc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xh(){}function wp(e,t,o,d,p){if(p){if(typeof d=="function"){var b=d;d=function(){var oe=Bo(R);b.call(oe)}}var R=Qh(t,d,e,0,null,!1,!1,"",Xh);return e._reactRootContainer=R,e[mn]=R.current,Ja(e.nodeType===8?e.parentNode:e),bs(),R}for(;p=e.lastChild;)e.removeChild(p);if(typeof d=="function"){var $=d;d=function(){var oe=Bo(H);$.call(oe)}}var H=Qc(e,0,!1,null,null,!1,!1,"",Xh);return e._reactRootContainer=H,e[mn]=H.current,Ja(e.nodeType===8?e.parentNode:e),bs(function(){$o(t,H,o,d)}),H}function Ho(e,t,o,d,p){var b=o._reactRootContainer;if(b){var R=b;if(typeof p=="function"){var $=p;p=function(){var H=Bo(R);$.call(H)}}$o(t,R,e,p)}else R=wp(o,t,e,p,d);return Bo(R)}qi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=Gr(t.pendingLanes);o!==0&&(Ms(t,o|1),ur(t,yt()),(at&6)===0&&(fa=yt()+500,Mn()))}break;case 13:bs(function(){var d=vn(e,1);if(d!==null){var p=Jt();zr(d,e,1,p)}}),Zc(e,1)}},An=function(e){if(e.tag===13){var t=vn(e,134217728);if(t!==null){var o=Jt();zr(t,e,134217728,o)}Zc(e,134217728)}},cs=function(e){if(e.tag===13){var t=qn(e),o=vn(e,t);if(o!==null){var d=Jt();zr(o,e,t,d)}Zc(e,t)}},Vr=function(){return st},zs=function(e,t){var o=st;try{return st=e,t()}finally{st=o}},tr=function(e,t,o){switch(t){case"input":if(F(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var d=o[t];if(d!==e&&d.form===e.form){var p=oo(d);if(!p)throw Error(r(90));ct(d),F(d,p)}}}break;case"textarea":Re(e,o);break;case"select":t=o.value,t!=null&&xe(e,!!o.multiple,t,!1)}},Ui=Wc,Kt=bs;var bp={usingClientEntryPoint:!1,Events:[ei,ea,oo,Ae,Li,Wc]},mi={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kp={bundleType:mi.bundleType,version:mi.version,rendererPackageName:mi.rendererPackageName,rendererConfig:mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Da(e),e===null?null:e.stateNode},findFiberByHostInstance:mi.findFiberByHostInstance||xp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{Cn=Go.inject(kp),mr=Go}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bp,dr.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(t))throw Error(r(200));return vp(e,t,null,o)},dr.createRoot=function(e,t){if(!Xc(e))throw Error(r(299));var o=!1,d="",p=Jh;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(d=t.identifierPrefix),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Qc(e,1,!1,null,null,o,!1,d,p),e[mn]=t.current,Ja(e.nodeType===8?e.parentNode:e),new Jc(t)},dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Da(t),e=e===null?null:e.stateNode,e},dr.flushSync=function(e){return bs(e)},dr.hydrate=function(e,t,o){if(!qo(t))throw Error(r(200));return Ho(null,e,t,!0,o)},dr.hydrateRoot=function(e,t,o){if(!Xc(e))throw Error(r(405));var d=o!=null&&o.hydratedSources||null,p=!1,b="",R=Jh;if(o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(b=o.identifierPrefix),o.onRecoverableError!==void 0&&(R=o.onRecoverableError)),t=Qh(t,null,e,1,o??null,p,!1,b,R),e[mn]=t.current,Ja(e),d)for(e=0;e<d.length;e++)o=d[e],p=o._getVersion,p=p(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,p]:t.mutableSourceEagerHydrationData.push(o,p);return new Wo(t)},dr.render=function(e,t,o){if(!qo(t))throw Error(r(200));return Ho(null,e,t,!1,o)},dr.unmountComponentAtNode=function(e){if(!qo(e))throw Error(r(40));return e._reactRootContainer?(bs(function(){Ho(null,null,e,!1,function(){e._reactRootContainer=null,e[mn]=null})}),!0):!1},dr.unstable_batchedUpdates=Wc,dr.unstable_renderSubtreeIntoContainer=function(e,t,o,d){if(!qo(o))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Ho(e,t,o,!1,d)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var of;function Tm(){if(of)return tu.exports;of=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),tu.exports=Pp(),tu.exports}var lf;function Rp(){if(lf)return Ko;lf=1;var i=Tm();return Ko.createRoot=i.createRoot,Ko.hydrateRoot=i.hydrateRoot,Ko}var Ip=Rp();const Op=Ta(Ip);class hl{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){const r={listener:n};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Uu=typeof window>"u"||"Deno"in window;function Br(){}function Dp(i,n){return typeof i=="function"?i(n):i}function Lp(i){return typeof i=="number"&&i>=0&&i!==1/0}function Up(i,n){return Math.max(i+(n||0)-Date.now(),0)}function Qo(i,n,r){return fl(i)?typeof n=="function"?{...r,queryKey:i,queryFn:n}:{...n,queryKey:i}:i}function Jn(i,n,r){return fl(i)?[{...n,queryKey:i},r]:[i||{},n]}function cf(i,n){const{type:r="all",exact:s,fetchStatus:l,predicate:c,queryKey:u,stale:h}=i;if(fl(u)){if(s){if(n.queryHash!==Mu(u,n.options))return!1}else if(!sl(n.queryKey,u))return!1}if(r!=="all"){const m=n.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof h=="boolean"&&n.isStale()!==h||typeof l<"u"&&l!==n.state.fetchStatus||c&&!c(n))}function uf(i,n){const{exact:r,fetching:s,predicate:l,mutationKey:c}=i;if(fl(c)){if(!n.options.mutationKey)return!1;if(r){if(As(n.options.mutationKey)!==As(c))return!1}else if(!sl(n.options.mutationKey,c))return!1}return!(typeof s=="boolean"&&n.state.status==="loading"!==s||l&&!l(n))}function Mu(i,n){return(n?.queryKeyHashFn||As)(i)}function As(i){return JSON.stringify(i,(n,r)=>ku(r)?Object.keys(r).sort().reduce((s,l)=>(s[l]=r[l],s),{}):r)}function sl(i,n){return Am(i,n)}function Am(i,n){return i===n?!0:typeof i!=typeof n?!1:i&&n&&typeof i=="object"&&typeof n=="object"?!Object.keys(n).some(r=>!Am(i[r],n[r])):!1}function Pm(i,n){if(i===n)return i;const r=df(i)&&df(n);if(r||ku(i)&&ku(n)){const s=r?i.length:Object.keys(i).length,l=r?n:Object.keys(n),c=l.length,u=r?[]:{};let h=0;for(let m=0;m<c;m++){const g=r?m:l[m];u[g]=Pm(i[g],n[g]),u[g]===i[g]&&h++}return s===c&&h===s?i:u}return n}function df(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function ku(i){if(!hf(i))return!1;const n=i.constructor;if(typeof n>"u")return!0;const r=n.prototype;return!(!hf(r)||!r.hasOwnProperty("isPrototypeOf"))}function hf(i){return Object.prototype.toString.call(i)==="[object Object]"}function fl(i){return Array.isArray(i)}function Rm(i){return new Promise(n=>{setTimeout(n,i)})}function ff(i){Rm(0).then(i)}function Mp(){if(typeof AbortController=="function")return new AbortController}function Fp(i,n,r){return r.isDataEqual!=null&&r.isDataEqual(i,n)?i:typeof r.structuralSharing=="function"?r.structuralSharing(i,n):r.structuralSharing!==!1?Pm(i,n):n}class zp extends hl{constructor(){super(),this.setup=n=>{if(!Uu&&window.addEventListener){const r=()=>n();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}}setEventListener(n){var r;this.setup=n,(r=this.cleanup)==null||r.call(this),this.cleanup=n(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(n){this.focused!==n&&(this.focused=n,this.onFocus())}onFocus(){this.listeners.forEach(({listener:n})=>{n()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const _u=new zp,mf=["online","offline"];class $p extends hl{constructor(){super(),this.setup=n=>{if(!Uu&&window.addEventListener){const r=()=>n();return mf.forEach(s=>{window.addEventListener(s,r,!1)}),()=>{mf.forEach(s=>{window.removeEventListener(s,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var n;(n=this.cleanup)==null||n.call(this),this.cleanup=void 0}}setEventListener(n){var r;this.setup=n,(r=this.cleanup)==null||r.call(this),this.cleanup=n(s=>{typeof s=="boolean"?this.setOnline(s):this.onOnline()})}setOnline(n){this.online!==n&&(this.online=n,this.onOnline())}onOnline(){this.listeners.forEach(({listener:n})=>{n()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const al=new $p;function Bp(i){return Math.min(1e3*2**i,3e4)}function Fu(i){return(i??"online")==="online"?al.isOnline():!0}class Im{constructor(n){this.revert=n?.revert,this.silent=n?.silent}}function su(i){return i instanceof Im}function Om(i){let n=!1,r=0,s=!1,l,c,u;const h=new Promise((j,_)=>{c=j,u=_}),m=j=>{s||(w(new Im(j)),i.abort==null||i.abort())},g=()=>{n=!0},y=()=>{n=!1},x=()=>!_u.isFocused()||i.networkMode!=="always"&&!al.isOnline(),k=j=>{s||(s=!0,i.onSuccess==null||i.onSuccess(j),l?.(),c(j))},w=j=>{s||(s=!0,i.onError==null||i.onError(j),l?.(),u(j))},C=()=>new Promise(j=>{l=_=>{const E=s||!x();return E&&j(_),E},i.onPause==null||i.onPause()}).then(()=>{l=void 0,s||i.onContinue==null||i.onContinue()}),S=()=>{if(s)return;let j;try{j=i.fn()}catch(_){j=Promise.reject(_)}Promise.resolve(j).then(k).catch(_=>{var E,P;if(s)return;const D=(E=i.retry)!=null?E:3,M=(P=i.retryDelay)!=null?P:Bp,z=typeof M=="function"?M(r,_):M,q=D===!0||typeof D=="number"&&r<D||typeof D=="function"&&D(r,_);if(n||!q){w(_);return}r++,i.onFail==null||i.onFail(r,_),Rm(z).then(()=>{if(x())return C()}).then(()=>{n?w(_):S()})})};return Fu(i.networkMode)?S():C().then(S),{promise:h,cancel:m,continue:()=>l?.()?h:Promise.resolve(),cancelRetry:g,continueRetry:y}}const zu=console;function Wp(){let i=[],n=0,r=y=>{y()},s=y=>{y()};const l=y=>{let x;n++;try{x=y()}finally{n--,n||h()}return x},c=y=>{n?i.push(y):ff(()=>{r(y)})},u=y=>(...x)=>{c(()=>{y(...x)})},h=()=>{const y=i;i=[],y.length&&ff(()=>{s(()=>{y.forEach(x=>{r(x)})})})};return{batch:l,batchCalls:u,schedule:c,setNotifyFunction:y=>{r=y},setBatchNotifyFunction:y=>{s=y}}}const Yt=Wp();class Dm{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lp(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(n){this.cacheTime=Math.max(this.cacheTime||0,n??(Uu?1/0:300*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class qp extends Dm{constructor(n){super(),this.abortSignalConsumed=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.logger=n.logger||zu,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||Hp(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(n){this.options={...this.defaultOptions,...n},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(n,r){const s=Fp(this.state.data,n,this.options);return this.dispatch({data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(n,r){this.dispatch({type:"setState",state:n,setStateOptions:r})}cancel(n){var r;const s=this.promise;return(r=this.retryer)==null||r.cancel(n),s?s.then(Br).catch(Br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(n=>n.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(n=>n.getCurrentResult().isStale)}isStaleByTime(n=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Up(this.state.dataUpdatedAt,n)}onFocus(){var n;const r=this.observers.find(s=>s.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(n=this.retryer)==null||n.continue()}onOnline(){var n;const r=this.observers.find(s=>s.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(n=this.retryer)==null||n.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(n,r){var s,l;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){const w=this.observers.find(C=>C.options.queryFn);w&&this.setOptions(w.options)}const u=Mp(),h={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},m=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>{if(u)return this.abortSignalConsumed=!0,u.signal}})};m(h);const g=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(h)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),y={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:g};if(m(y),(s=this.options.behavior)==null||s.onFetch(y),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=y.fetchOptions)==null?void 0:l.meta)){var x;this.dispatch({type:"fetch",meta:(x=y.fetchOptions)==null?void 0:x.meta})}const k=w=>{if(su(w)&&w.silent||this.dispatch({type:"error",error:w}),!su(w)){var C,S,j,_;(C=(S=this.cache.config).onError)==null||C.call(S,w,this),(j=(_=this.cache.config).onSettled)==null||j.call(_,this.state.data,w,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Om({fn:y.fetchFn,abort:u?.abort.bind(u),onSuccess:w=>{var C,S,j,_;if(typeof w>"u"){k(new Error(this.queryHash+" data is undefined"));return}this.setData(w),(C=(S=this.cache.config).onSuccess)==null||C.call(S,w,this),(j=(_=this.cache.config).onSettled)==null||j.call(_,w,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:k,onFail:(w,C)=>{this.dispatch({type:"failed",failureCount:w,error:C})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(n){const r=s=>{var l,c;switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(l=n.meta)!=null?l:null,fetchStatus:Fu(this.options.networkMode)?"fetching":"paused",...!s.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:(c=n.dataUpdatedAt)!=null?c:Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=n.error;return su(u)&&u.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...s,error:u,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Yt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate(n)}),this.cache.notify({query:this,type:"updated",action:n})})}}function Hp(i){const n=typeof i.initialData=="function"?i.initialData():i.initialData,r=typeof n<"u",s=r?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class Gp extends hl{constructor(n){super(),this.config=n||{},this.queries=[],this.queriesMap={}}build(n,r,s){var l;const c=r.queryKey,u=(l=r.queryHash)!=null?l:Mu(c,r);let h=this.get(u);return h||(h=new qp({cache:this,logger:n.getLogger(),queryKey:c,queryHash:u,options:n.defaultQueryOptions(r),state:s,defaultOptions:n.getQueryDefaults(c)}),this.add(h)),h}add(n){this.queriesMap[n.queryHash]||(this.queriesMap[n.queryHash]=n,this.queries.push(n),this.notify({type:"added",query:n}))}remove(n){const r=this.queriesMap[n.queryHash];r&&(n.destroy(),this.queries=this.queries.filter(s=>s!==n),r===n&&delete this.queriesMap[n.queryHash],this.notify({type:"removed",query:n}))}clear(){Yt.batch(()=>{this.queries.forEach(n=>{this.remove(n)})})}get(n){return this.queriesMap[n]}getAll(){return this.queries}find(n,r){const[s]=Jn(n,r);return typeof s.exact>"u"&&(s.exact=!0),this.queries.find(l=>cf(s,l))}findAll(n,r){const[s]=Jn(n,r);return Object.keys(s).length>0?this.queries.filter(l=>cf(s,l)):this.queries}notify(n){Yt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(n)})})}onFocus(){Yt.batch(()=>{this.queries.forEach(n=>{n.onFocus()})})}onOnline(){Yt.batch(()=>{this.queries.forEach(n=>{n.onOnline()})})}}class Vp extends Dm{constructor(n){super(),this.defaultOptions=n.defaultOptions,this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.logger=n.logger||zu,this.observers=[],this.state=n.state||Kp(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options={...this.defaultOptions,...n},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(n){this.dispatch({type:"setState",state:n})}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.observers=this.observers.filter(r=>r!==n),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var n,r;return(n=(r=this.retryer)==null?void 0:r.continue())!=null?n:this.execute()}async execute(){const n=()=>{var q;return this.retryer=Om({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(ne,ee)=>{this.dispatch({type:"failed",failureCount:ne,error:ee})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(q=this.options.retry)!=null?q:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var s,l,c,u,h,m,g,y;if(!r){var x,k,w,C;this.dispatch({type:"loading",variables:this.options.variables}),await((x=(k=this.mutationCache.config).onMutate)==null?void 0:x.call(k,this.state.variables,this));const ne=await((w=(C=this.options).onMutate)==null?void 0:w.call(C,this.state.variables));ne!==this.state.context&&this.dispatch({type:"loading",context:ne,variables:this.state.variables})}const q=await n();return await((s=(l=this.mutationCache.config).onSuccess)==null?void 0:s.call(l,q,this.state.variables,this.state.context,this)),await((c=(u=this.options).onSuccess)==null?void 0:c.call(u,q,this.state.variables,this.state.context)),await((h=(m=this.mutationCache.config).onSettled)==null?void 0:h.call(m,q,null,this.state.variables,this.state.context,this)),await((g=(y=this.options).onSettled)==null?void 0:g.call(y,q,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:q}),q}catch(q){try{var S,j,_,E,P,D,M,z;throw await((S=(j=this.mutationCache.config).onError)==null?void 0:S.call(j,q,this.state.variables,this.state.context,this)),await((_=(E=this.options).onError)==null?void 0:_.call(E,q,this.state.variables,this.state.context)),await((P=(D=this.mutationCache.config).onSettled)==null?void 0:P.call(D,void 0,q,this.state.variables,this.state.context,this)),await((M=(z=this.options).onSettled)==null?void 0:M.call(z,void 0,q,this.state.variables,this.state.context)),q}finally{this.dispatch({type:"error",error:q})}}}dispatch(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"loading":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Fu(this.options.networkMode),status:"loading",variables:n.variables};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"};case"setState":return{...s,...n.state}}};this.state=r(this.state),Yt.batch(()=>{this.observers.forEach(s=>{s.onMutationUpdate(n)}),this.mutationCache.notify({mutation:this,type:"updated",action:n})})}}function Kp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Qp extends hl{constructor(n){super(),this.config=n||{},this.mutations=[],this.mutationId=0}build(n,r,s){const l=new Vp({mutationCache:this,logger:n.getLogger(),mutationId:++this.mutationId,options:n.defaultMutationOptions(r),state:s,defaultOptions:r.mutationKey?n.getMutationDefaults(r.mutationKey):void 0});return this.add(l),l}add(n){this.mutations.push(n),this.notify({type:"added",mutation:n})}remove(n){this.mutations=this.mutations.filter(r=>r!==n),this.notify({type:"removed",mutation:n})}clear(){Yt.batch(()=>{this.mutations.forEach(n=>{this.remove(n)})})}getAll(){return this.mutations}find(n){return typeof n.exact>"u"&&(n.exact=!0),this.mutations.find(r=>uf(n,r))}findAll(n){return this.mutations.filter(r=>uf(n,r))}notify(n){Yt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(n)})})}resumePausedMutations(){var n;return this.resuming=((n=this.resuming)!=null?n:Promise.resolve()).then(()=>{const r=this.mutations.filter(s=>s.state.isPaused);return Yt.batch(()=>r.reduce((s,l)=>s.then(()=>l.continue().catch(Br)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Zp(){return{onFetch:i=>{i.fetchFn=()=>{var n,r,s,l,c,u;const h=(n=i.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,m=(s=i.fetchOptions)==null||(l=s.meta)==null?void 0:l.fetchMore,g=m?.pageParam,y=m?.direction==="forward",x=m?.direction==="backward",k=((c=i.state.data)==null?void 0:c.pages)||[],w=((u=i.state.data)==null?void 0:u.pageParams)||[];let C=w,S=!1;const j=z=>{Object.defineProperty(z,"signal",{enumerable:!0,get:()=>{var q;if((q=i.signal)!=null&&q.aborted)S=!0;else{var ne;(ne=i.signal)==null||ne.addEventListener("abort",()=>{S=!0})}return i.signal}})},_=i.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+i.options.queryHash+"'")),E=(z,q,ne,ee)=>(C=ee?[q,...C]:[...C,q],ee?[ne,...z]:[...z,ne]),P=(z,q,ne,ee)=>{if(S)return Promise.reject("Cancelled");if(typeof ne>"u"&&!q&&z.length)return Promise.resolve(z);const fe={queryKey:i.queryKey,pageParam:ne,meta:i.options.meta};j(fe);const pe=_(fe);return Promise.resolve(pe).then(Z=>E(z,ne,Z,ee))};let D;if(!k.length)D=P([]);else if(y){const z=typeof g<"u",q=z?g:gf(i.options,k);D=P(k,z,q)}else if(x){const z=typeof g<"u",q=z?g:Jp(i.options,k);D=P(k,z,q,!0)}else{C=[];const z=typeof i.options.getNextPageParam>"u";D=(h&&k[0]?h(k[0],0,k):!0)?P([],z,w[0]):Promise.resolve(E([],w[0],k[0]));for(let ne=1;ne<k.length;ne++)D=D.then(ee=>{if(h&&k[ne]?h(k[ne],ne,k):!0){const pe=z?w[ne]:gf(i.options,ee);return P(ee,z,pe)}return Promise.resolve(E(ee,w[ne],k[ne]))})}return D.then(z=>({pages:z,pageParams:C}))}}}}function gf(i,n){return i.getNextPageParam==null?void 0:i.getNextPageParam(n[n.length-1],n)}function Jp(i,n){return i.getPreviousPageParam==null?void 0:i.getPreviousPageParam(n[0],n)}class Xp{constructor(n={}){this.queryCache=n.queryCache||new Gp,this.mutationCache=n.mutationCache||new Qp,this.logger=n.logger||zu,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=_u.subscribe(()=>{_u.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=al.subscribe(()=>{al.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var n,r;this.mountCount--,this.mountCount===0&&((n=this.unsubscribeFocus)==null||n.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(n,r){const[s]=Jn(n,r);return s.fetchStatus="fetching",this.queryCache.findAll(s).length}isMutating(n){return this.mutationCache.findAll({...n,fetching:!0}).length}getQueryData(n,r){var s;return(s=this.queryCache.find(n,r))==null?void 0:s.state.data}ensureQueryData(n,r,s){const l=Qo(n,r,s),c=this.getQueryData(l.queryKey);return c?Promise.resolve(c):this.fetchQuery(l)}getQueriesData(n){return this.getQueryCache().findAll(n).map(({queryKey:r,state:s})=>{const l=s.data;return[r,l]})}setQueryData(n,r,s){const l=this.queryCache.find(n),c=l?.state.data,u=Dp(r,c);if(typeof u>"u")return;const h=Qo(n),m=this.defaultQueryOptions(h);return this.queryCache.build(this,m).setData(u,{...s,manual:!0})}setQueriesData(n,r,s){return Yt.batch(()=>this.getQueryCache().findAll(n).map(({queryKey:l})=>[l,this.setQueryData(l,r,s)]))}getQueryState(n,r){var s;return(s=this.queryCache.find(n,r))==null?void 0:s.state}removeQueries(n,r){const[s]=Jn(n,r),l=this.queryCache;Yt.batch(()=>{l.findAll(s).forEach(c=>{l.remove(c)})})}resetQueries(n,r,s){const[l,c]=Jn(n,r,s),u=this.queryCache,h={type:"active",...l};return Yt.batch(()=>(u.findAll(l).forEach(m=>{m.reset()}),this.refetchQueries(h,c)))}cancelQueries(n,r,s){const[l,c={}]=Jn(n,r,s);typeof c.revert>"u"&&(c.revert=!0);const u=Yt.batch(()=>this.queryCache.findAll(l).map(h=>h.cancel(c)));return Promise.all(u).then(Br).catch(Br)}invalidateQueries(n,r,s){const[l,c]=Jn(n,r,s);return Yt.batch(()=>{var u,h;if(this.queryCache.findAll(l).forEach(g=>{g.invalidate()}),l.refetchType==="none")return Promise.resolve();const m={...l,type:(u=(h=l.refetchType)!=null?h:l.type)!=null?u:"active"};return this.refetchQueries(m,c)})}refetchQueries(n,r,s){const[l,c]=Jn(n,r,s),u=Yt.batch(()=>this.queryCache.findAll(l).filter(m=>!m.isDisabled()).map(m=>{var g;return m.fetch(void 0,{...c,cancelRefetch:(g=c?.cancelRefetch)!=null?g:!0,meta:{refetchPage:l.refetchPage}})}));let h=Promise.all(u).then(Br);return c!=null&&c.throwOnError||(h=h.catch(Br)),h}fetchQuery(n,r,s){const l=Qo(n,r,s),c=this.defaultQueryOptions(l);typeof c.retry>"u"&&(c.retry=!1);const u=this.queryCache.build(this,c);return u.isStaleByTime(c.staleTime)?u.fetch(c):Promise.resolve(u.state.data)}prefetchQuery(n,r,s){return this.fetchQuery(n,r,s).then(Br).catch(Br)}fetchInfiniteQuery(n,r,s){const l=Qo(n,r,s);return l.behavior=Zp(),this.fetchQuery(l)}prefetchInfiniteQuery(n,r,s){return this.fetchInfiniteQuery(n,r,s).then(Br).catch(Br)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(n){this.defaultOptions=n}setQueryDefaults(n,r){const s=this.queryDefaults.find(l=>As(n)===As(l.queryKey));s?s.defaultOptions=r:this.queryDefaults.push({queryKey:n,defaultOptions:r})}getQueryDefaults(n){if(!n)return;const r=this.queryDefaults.find(s=>sl(n,s.queryKey));return r?.defaultOptions}setMutationDefaults(n,r){const s=this.mutationDefaults.find(l=>As(n)===As(l.mutationKey));s?s.defaultOptions=r:this.mutationDefaults.push({mutationKey:n,defaultOptions:r})}getMutationDefaults(n){if(!n)return;const r=this.mutationDefaults.find(s=>sl(n,s.mutationKey));return r?.defaultOptions}defaultQueryOptions(n){if(n!=null&&n._defaulted)return n;const r={...this.defaultOptions.queries,...this.getQueryDefaults(n?.queryKey),...n,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=Mu(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...this.defaultOptions.mutations,...this.getMutationDefaults(n?.mutationKey),...n,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}var pf=Tm(),au={exports:{}},iu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf;function Yp(){if(yf)return iu;yf=1;var i=Ci();function n(x,k){return x===k&&(x!==0||1/x===1/k)||x!==x&&k!==k}var r=typeof Object.is=="function"?Object.is:n,s=i.useState,l=i.useEffect,c=i.useLayoutEffect,u=i.useDebugValue;function h(x,k){var w=k(),C=s({inst:{value:w,getSnapshot:k}}),S=C[0].inst,j=C[1];return c(function(){S.value=w,S.getSnapshot=k,m(S)&&j({inst:S})},[x,w,k]),l(function(){return m(S)&&j({inst:S}),x(function(){m(S)&&j({inst:S})})},[x]),u(w),w}function m(x){var k=x.getSnapshot;x=x.value;try{var w=k();return!r(x,w)}catch{return!0}}function g(x,k){return k()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:h;return iu.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,iu}var vf;function e0(){return vf||(vf=1,au.exports=Yp()),au.exports}const xf=G.createContext(void 0),t0=G.createContext(!1);function r0(i,n){return i||(n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=xf),window.ReactQueryClientContext):xf)}const n0=({client:i,children:n,context:r,contextSharing:s=!1})=>{G.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]);const l=r0(r,s);return G.createElement(t0.Provider,{value:!r&&s},G.createElement(l.Provider,{value:i},n))};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Si(){return Si=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},Si.apply(this,arguments)}var es;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(es||(es={}));const wf="popstate";function s0(i){i===void 0&&(i={});function n(s,l){let{pathname:c,search:u,hash:h}=s.location;return Su("",{pathname:c,search:u,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:il(l)}return i0(n,r,null,i)}function kt(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Lm(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function a0(){return Math.random().toString(36).substr(2,8)}function bf(i,n){return{usr:i.state,key:i.key,idx:n}}function Su(i,n,r,s){return r===void 0&&(r=null),Si({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof n=="string"?Aa(n):n,{state:r,key:n&&n.key||s||a0()})}function il(i){let{pathname:n="/",search:r="",hash:s=""}=i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Aa(i){let n={};if(i){let r=i.indexOf("#");r>=0&&(n.hash=i.substr(r),i=i.substr(0,r));let s=i.indexOf("?");s>=0&&(n.search=i.substr(s),i=i.substr(0,s)),i&&(n.pathname=i)}return n}function i0(i,n,r,s){s===void 0&&(s={});let{window:l=document.defaultView,v5Compat:c=!1}=s,u=l.history,h=es.Pop,m=null,g=y();g==null&&(g=0,u.replaceState(Si({},u.state,{idx:g}),""));function y(){return(u.state||{idx:null}).idx}function x(){h=es.Pop;let j=y(),_=j==null?null:j-g;g=j,m&&m({action:h,location:S.location,delta:_})}function k(j,_){h=es.Push;let E=Su(S.location,j,_);g=y()+1;let P=bf(E,g),D=S.createHref(E);try{u.pushState(P,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;l.location.assign(D)}c&&m&&m({action:h,location:S.location,delta:1})}function w(j,_){h=es.Replace;let E=Su(S.location,j,_);g=y();let P=bf(E,g),D=S.createHref(E);u.replaceState(P,"",D),c&&m&&m({action:h,location:S.location,delta:0})}function C(j){let _=l.location.origin!=="null"?l.location.origin:l.location.href,E=typeof j=="string"?j:il(j);return E=E.replace(/ $/,"%20"),kt(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let S={get action(){return h},get location(){return i(l,u)},listen(j){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(wf,x),m=j,()=>{l.removeEventListener(wf,x),m=null}},createHref(j){return n(l,j)},createURL:C,encodeLocation(j){let _=C(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:k,replace:w,go(j){return u.go(j)}};return S}var kf;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(kf||(kf={}));function o0(i,n,r){return r===void 0&&(r="/"),l0(i,n,r)}function l0(i,n,r,s){let l=typeof n=="string"?Aa(n):n,c=Ea(l.pathname||"/",r);if(c==null)return null;let u=Um(i);c0(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let g=w0(c);h=v0(u[m],g)}return h}function Um(i,n,r,s){n===void 0&&(n=[]),r===void 0&&(r=[]),s===void 0&&(s="");let l=(c,u,h)=>{let m={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};m.relativePath.startsWith("/")&&(kt(m.relativePath.startsWith(s),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(s.length));let g=ts([s,m.relativePath]),y=r.concat(m);c.children&&c.children.length>0&&(kt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Um(c.children,n,y,g)),!(c.path==null&&!c.index)&&n.push({path:g,score:p0(g,c.index),routesMeta:y})};return i.forEach((c,u)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))l(c,u);else for(let m of Mm(c.path))l(c,u,m)}),n}function Mm(i){let n=i.split("/");if(n.length===0)return[];let[r,...s]=n,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(s.length===0)return l?[c,""]:[c];let u=Mm(s.join("/")),h=[];return h.push(...u.map(m=>m===""?c:[c,m].join("/"))),l&&h.push(...u),h.map(m=>i.startsWith("/")&&m===""?"/":m)}function c0(i){i.sort((n,r)=>n.score!==r.score?r.score-n.score:y0(n.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const u0=/^:[\w-]+$/,d0=3,h0=2,f0=1,m0=10,g0=-2,_f=i=>i==="*";function p0(i,n){let r=i.split("/"),s=r.length;return r.some(_f)&&(s+=g0),n&&(s+=h0),r.filter(l=>!_f(l)).reduce((l,c)=>l+(u0.test(c)?d0:c===""?f0:m0),s)}function y0(i,n){return i.length===n.length&&i.slice(0,-1).every((s,l)=>s===n[l])?i[i.length-1]-n[n.length-1]:0}function v0(i,n,r){let{routesMeta:s}=i,l={},c="/",u=[];for(let h=0;h<s.length;++h){let m=s[h],g=h===s.length-1,y=c==="/"?n:n.slice(c.length)||"/",x=ju({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),k=m.route;if(!x)return null;Object.assign(l,x.params),u.push({params:l,pathname:ts([c,x.pathname]),pathnameBase:S0(ts([c,x.pathnameBase])),route:k}),x.pathnameBase!=="/"&&(c=ts([c,x.pathnameBase]))}return u}function ju(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[r,s]=x0(i.path,i.caseSensitive,i.end),l=n.match(r);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:s.reduce((g,y,x)=>{let{paramName:k,isOptional:w}=y;if(k==="*"){let S=h[x]||"";u=c.slice(0,c.length-S.length).replace(/(.)\/+$/,"$1")}const C=h[x];return w&&!C?g[k]=void 0:g[k]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:u,pattern:i}}function x0(i,n,r){n===void 0&&(n=!1),r===void 0&&(r=!0),Lm(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(s.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),s]}function w0(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Lm(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),i}}function Ea(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,s=i.charAt(r);return s&&s!=="/"?null:i.slice(r)||"/"}function b0(i,n){n===void 0&&(n="/");let{pathname:r,search:s="",hash:l=""}=typeof i=="string"?Aa(i):i;return{pathname:r?r.startsWith("/")?r:k0(r,n):n,search:j0(s),hash:N0(l)}}function k0(i,n){let r=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function ou(i,n,r,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _0(i){return i.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Fm(i,n){let r=_0(i);return n?r.map((s,l)=>l===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function zm(i,n,r,s){s===void 0&&(s=!1);let l;typeof i=="string"?l=Aa(i):(l=Si({},i),kt(!l.pathname||!l.pathname.includes("?"),ou("?","pathname","search",l)),kt(!l.pathname||!l.pathname.includes("#"),ou("#","pathname","hash",l)),kt(!l.search||!l.search.includes("#"),ou("#","search","hash",l)));let c=i===""||l.pathname==="",u=c?"/":l.pathname,h;if(u==null)h=r;else{let x=n.length-1;if(!s&&u.startsWith("..")){let k=u.split("/");for(;k[0]==="..";)k.shift(),x-=1;l.pathname=k.join("/")}h=x>=0?n[x]:"/"}let m=b0(l,h),g=u&&u!=="/"&&u.endsWith("/"),y=(c||u===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}const ts=i=>i.join("/").replace(/\/\/+/g,"/"),S0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),j0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,N0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function E0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const $m=["post","put","patch","delete"];new Set($m);const C0=["get",...$m];new Set(C0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ji(){return ji=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},ji.apply(this,arguments)}const ml=G.createContext(null),Bm=G.createContext(null),rs=G.createContext(null),gl=G.createContext(null),Sn=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Wm=G.createContext(null);function T0(i,n){let{relative:r}=n===void 0?{}:n;Ti()||kt(!1);let{basename:s,navigator:l}=G.useContext(rs),{hash:c,pathname:u,search:h}=pl(i,{relative:r}),m=u;return s!=="/"&&(m=u==="/"?s:ts([s,u])),l.createHref({pathname:m,search:h,hash:c})}function Ti(){return G.useContext(gl)!=null}function Ai(){return Ti()||kt(!1),G.useContext(gl).location}function qm(i){G.useContext(rs).static||G.useLayoutEffect(i)}function Pa(){let{isDataRoute:i}=G.useContext(Sn);return i?H0():A0()}function A0(){Ti()||kt(!1);let i=G.useContext(ml),{basename:n,future:r,navigator:s}=G.useContext(rs),{matches:l}=G.useContext(Sn),{pathname:c}=Ai(),u=JSON.stringify(Fm(l,r.v7_relativeSplatPath)),h=G.useRef(!1);return qm(()=>{h.current=!0}),G.useCallback(function(g,y){if(y===void 0&&(y={}),!h.current)return;if(typeof g=="number"){s.go(g);return}let x=zm(g,JSON.parse(u),c,y.relative==="path");i==null&&n!=="/"&&(x.pathname=x.pathname==="/"?n:ts([n,x.pathname])),(y.replace?s.replace:s.push)(x,y.state,y)},[n,s,u,c,i])}const P0=G.createContext(null);function R0(i){let n=G.useContext(Sn).outlet;return n&&G.createElement(P0.Provider,{value:i},n)}function I0(){let{matches:i}=G.useContext(Sn),n=i[i.length-1];return n?n.params:{}}function pl(i,n){let{relative:r}=n===void 0?{}:n,{future:s}=G.useContext(rs),{matches:l}=G.useContext(Sn),{pathname:c}=Ai(),u=JSON.stringify(Fm(l,s.v7_relativeSplatPath));return G.useMemo(()=>zm(i,JSON.parse(u),c,r==="path"),[i,u,c,r])}function O0(i,n){return D0(i,n)}function D0(i,n,r,s){Ti()||kt(!1);let{navigator:l}=G.useContext(rs),{matches:c}=G.useContext(Sn),u=c[c.length-1],h=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let g=Ai(),y;if(n){var x;let j=typeof n=="string"?Aa(n):n;m==="/"||(x=j.pathname)!=null&&x.startsWith(m)||kt(!1),y=j}else y=g;let k=y.pathname||"/",w=k;if(m!=="/"){let j=m.replace(/^\//,"").split("/");w="/"+k.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=o0(i,{pathname:w}),S=z0(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:ts([m,l.encodeLocation?l.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?m:ts([m,l.encodeLocation?l.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,r,s);return n&&S?G.createElement(gl.Provider,{value:{location:ji({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:es.Pop}},S):S}function L0(){let i=q0(),n=E0(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),r=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},n),r?G.createElement("pre",{style:l},r):null,null)}const U0=G.createElement(L0,null);class M0 extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?G.createElement(Sn.Provider,{value:this.props.routeContext},G.createElement(Wm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F0(i){let{routeContext:n,match:r,children:s}=i,l=G.useContext(ml);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),G.createElement(Sn.Provider,{value:n},s)}function z0(i,n,r,s){var l;if(n===void 0&&(n=[]),r===void 0&&(r=null),s===void 0&&(s=null),i==null){var c;if(!r)return null;if(r.errors)i=r.matches;else if((c=s)!=null&&c.v7_partialHydration&&n.length===0&&!r.initialized&&r.matches.length>0)i=r.matches;else return null}let u=i,h=(l=r)==null?void 0:l.errors;if(h!=null){let y=u.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);y>=0||kt(!1),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,g=-1;if(r&&s&&s.v7_partialHydration)for(let y=0;y<u.length;y++){let x=u[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:k,errors:w}=r,C=x.route.loader&&k[x.route.id]===void 0&&(!w||w[x.route.id]===void 0);if(x.route.lazy||C){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((y,x,k)=>{let w,C=!1,S=null,j=null;r&&(w=h&&x.route.id?h[x.route.id]:void 0,S=x.route.errorElement||U0,m&&(g<0&&k===0?(G0("route-fallback"),C=!0,j=null):g===k&&(C=!0,j=x.route.hydrateFallbackElement||null)));let _=n.concat(u.slice(0,k+1)),E=()=>{let P;return w?P=S:C?P=j:x.route.Component?P=G.createElement(x.route.Component,null):x.route.element?P=x.route.element:P=y,G.createElement(F0,{match:x,routeContext:{outlet:y,matches:_,isDataRoute:r!=null},children:P})};return r&&(x.route.ErrorBoundary||x.route.errorElement||k===0)?G.createElement(M0,{location:r.location,revalidation:r.revalidation,component:S,error:w,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var Hm=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(Hm||{}),Gm=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Gm||{});function $0(i){let n=G.useContext(ml);return n||kt(!1),n}function B0(i){let n=G.useContext(Bm);return n||kt(!1),n}function W0(i){let n=G.useContext(Sn);return n||kt(!1),n}function Vm(i){let n=W0(),r=n.matches[n.matches.length-1];return r.route.id||kt(!1),r.route.id}function q0(){var i;let n=G.useContext(Wm),r=B0(),s=Vm();return n!==void 0?n:(i=r.errors)==null?void 0:i[s]}function H0(){let{router:i}=$0(Hm.UseNavigateStable),n=Vm(Gm.UseNavigateStable),r=G.useRef(!1);return qm(()=>{r.current=!0}),G.useCallback(function(l,c){c===void 0&&(c={}),r.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,ji({fromRouteId:n},c)))},[i,n])}const Sf={};function G0(i,n,r){Sf[i]||(Sf[i]=!0)}function V0(i,n){i?.v7_startTransition,i?.v7_relativeSplatPath}function K0(i){return R0(i.context)}function kr(i){kt(!1)}function Q0(i){let{basename:n="/",children:r=null,location:s,navigationType:l=es.Pop,navigator:c,static:u=!1,future:h}=i;Ti()&&kt(!1);let m=n.replace(/^\/*/,"/"),g=G.useMemo(()=>({basename:m,navigator:c,static:u,future:ji({v7_relativeSplatPath:!1},h)}),[m,h,c,u]);typeof s=="string"&&(s=Aa(s));let{pathname:y="/",search:x="",hash:k="",state:w=null,key:C="default"}=s,S=G.useMemo(()=>{let j=Ea(y,m);return j==null?null:{location:{pathname:j,search:x,hash:k,state:w,key:C},navigationType:l}},[m,y,x,k,w,C,l]);return S==null?null:G.createElement(rs.Provider,{value:g},G.createElement(gl.Provider,{children:r,value:S}))}function Z0(i){let{children:n,location:r}=i;return O0(Nu(n),r)}new Promise(()=>{});function Nu(i,n){n===void 0&&(n=[]);let r=[];return G.Children.forEach(i,(s,l)=>{if(!G.isValidElement(s))return;let c=[...n,l];if(s.type===G.Fragment){r.push.apply(r,Nu(s.props.children,c));return}s.type!==kr&&kt(!1),!s.props.index||!s.props.children||kt(!1);let u={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Nu(s.props.children,c)),r.push(u)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},ol.apply(this,arguments)}function Km(i,n){if(i==null)return{};var r={},s=Object.keys(i),l,c;for(c=0;c<s.length;c++)l=s[c],!(n.indexOf(l)>=0)&&(r[l]=i[l]);return r}function J0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function X0(i,n){return i.button===0&&(!n||n==="_self")&&!J0(i)}const Y0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ey=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ty="6";try{window.__reactRouterVersion=ty}catch{}const ry=G.createContext({isTransitioning:!1}),ny="startTransition",jf=Cp[ny];function sy(i){let{basename:n,children:r,future:s,window:l}=i,c=G.useRef();c.current==null&&(c.current=s0({window:l,v5Compat:!0}));let u=c.current,[h,m]=G.useState({action:u.action,location:u.location}),{v7_startTransition:g}=s||{},y=G.useCallback(x=>{g&&jf?jf(()=>m(x)):m(x)},[m,g]);return G.useLayoutEffect(()=>u.listen(y),[u,y]),G.useEffect(()=>V0(s),[s]),G.createElement(Q0,{basename:n,children:r,location:h.location,navigationType:h.action,navigator:u,future:s})}const ay=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xi=G.forwardRef(function(n,r){let{onClick:s,relative:l,reloadDocument:c,replace:u,state:h,target:m,to:g,preventScrollReset:y,viewTransition:x}=n,k=Km(n,Y0),{basename:w}=G.useContext(rs),C,S=!1;if(typeof g=="string"&&iy.test(g)&&(C=g,ay))try{let P=new URL(window.location.href),D=g.startsWith("//")?new URL(P.protocol+g):new URL(g),M=Ea(D.pathname,w);D.origin===P.origin&&M!=null?g=M+D.search+D.hash:S=!0}catch{}let j=T0(g,{relative:l}),_=cy(g,{replace:u,state:h,target:m,preventScrollReset:y,relative:l,viewTransition:x});function E(P){s&&s(P),P.defaultPrevented||_(P)}return G.createElement("a",ol({},k,{href:C||j,onClick:S||c?s:E,ref:r,target:m}))}),oy=G.forwardRef(function(n,r){let{"aria-current":s="page",caseSensitive:l=!1,className:c="",end:u=!1,style:h,to:m,viewTransition:g,children:y}=n,x=Km(n,ey),k=pl(m,{relative:x.relative}),w=Ai(),C=G.useContext(Bm),{navigator:S,basename:j}=G.useContext(rs),_=C!=null&&uy(k)&&g===!0,E=S.encodeLocation?S.encodeLocation(k).pathname:k.pathname,P=w.pathname,D=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;l||(P=P.toLowerCase(),D=D?D.toLowerCase():null,E=E.toLowerCase()),D&&j&&(D=Ea(D,j)||D);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let z=P===E||!u&&P.startsWith(E)&&P.charAt(M)==="/",q=D!=null&&(D===E||!u&&D.startsWith(E)&&D.charAt(E.length)==="/"),ne={isActive:z,isPending:q,isTransitioning:_},ee=z?s:void 0,fe;typeof c=="function"?fe=c(ne):fe=[c,z?"active":null,q?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let pe=typeof h=="function"?h(ne):h;return G.createElement(xi,ol({},x,{"aria-current":ee,className:fe,ref:r,style:pe,to:m,viewTransition:g}),typeof y=="function"?y(ne):y)});var Eu;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Eu||(Eu={}));var Nf;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Nf||(Nf={}));function ly(i){let n=G.useContext(ml);return n||kt(!1),n}function cy(i,n){let{target:r,replace:s,state:l,preventScrollReset:c,relative:u,viewTransition:h}=n===void 0?{}:n,m=Pa(),g=Ai(),y=pl(i,{relative:u});return G.useCallback(x=>{if(X0(x,r)){x.preventDefault();let k=s!==void 0?s:il(g)===il(y);m(i,{replace:k,state:l,preventScrollReset:c,relative:u,viewTransition:h})}},[g,m,y,s,l,r,i,c,u,h])}function uy(i,n){n===void 0&&(n={});let r=G.useContext(ry);r==null&&kt(!1);let{basename:s}=ly(Eu.useViewTransitionState),l=pl(i,{relative:n.relative});if(!r.isTransitioning)return!1;let c=Ea(r.currentLocation.pathname,s)||r.currentLocation.pathname,u=Ea(r.nextLocation.pathname,s)||r.nextLocation.pathname;return ju(l.pathname,u)!=null||ju(l.pathname,c)!=null}const dy="modulepreload",hy=function(i){return"/"+i},Ef={},Ra=function(n,r,s){let l=Promise.resolve();if(r&&r.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var u=g;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=h?.nonce||h?.getAttribute("nonce");l=g(r.map(y=>{if(y=hy(y),y in Ef)return;Ef[y]=!0;const x=y.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":dy,x||(w.as="script"),w.crossOrigin="",w.href=y,m&&w.setAttribute("nonce",m),document.head.appendChild(w),x)return new Promise((C,S)=>{w.addEventListener("load",C),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return l.then(h=>{for(const m of h||[])m.status==="rejected"&&c(m.reason);return n().catch(c)})};function fy(i={}){const{immediate:n=!1,onNeedRefresh:r,onOfflineReady:s,onRegistered:l,onRegisteredSW:c,onRegisterError:u}=i;let h,m;const g=async(x=!0)=>{await m};async function y(){if("serviceWorker"in navigator){if(h=await Ra(async()=>{const{Workbox:x}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:x}},[]).then(({Workbox:x})=>new x("/sw.js",{scope:"/",type:"classic"})).catch(x=>{u?.(x)}),!h)return;h.addEventListener("activated",x=>{(x.isUpdate||x.isExternal)&&window.location.reload()}),h.addEventListener("installed",x=>{x.isUpdate||s?.()}),h.register({immediate:n}).then(x=>{c?c("/sw.js",x):l?.(x)}).catch(x=>{u?.(x)})}}return m=y(),g}function my(i={}){const{immediate:n=!0,onNeedRefresh:r,onOfflineReady:s,onRegistered:l,onRegisteredSW:c,onRegisterError:u}=i,[h,m]=G.useState(!1),[g,y]=G.useState(!1),[x]=G.useState(()=>fy({immediate:n,onOfflineReady(){y(!0),s?.()},onNeedRefresh(){m(!0),r?.()},onRegistered:l,onRegisteredSW:c,onRegisterError:u}));return{needRefresh:[h,m],offlineReady:[g,y],updateServiceWorker:x}}const gy={},Cf=i=>{let n;const r=new Set,s=(y,x)=>{const k=typeof y=="function"?y(n):y;if(!Object.is(k,n)){const w=n;n=x??(typeof k!="object"||k===null)?k:Object.assign({},n,k),r.forEach(C=>C(n,w))}},l=()=>n,m={setState:s,getState:l,getInitialState:()=>g,subscribe:y=>(r.add(y),()=>r.delete(y)),destroy:()=>{(gy?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},g=n=i(s,l,m);return m},py=i=>i?Cf(i):Cf;var lu={exports:{}},cu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf;function yy(){if(Tf)return cu;Tf=1;var i=Ci(),n=e0();function r(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var s=typeof Object.is=="function"?Object.is:r,l=n.useSyncExternalStore,c=i.useRef,u=i.useEffect,h=i.useMemo,m=i.useDebugValue;return cu.useSyncExternalStoreWithSelector=function(g,y,x,k,w){var C=c(null);if(C.current===null){var S={hasValue:!1,value:null};C.current=S}else S=C.current;C=h(function(){function _(z){if(!E){if(E=!0,P=z,z=k(z),w!==void 0&&S.hasValue){var q=S.value;if(w(q,z))return D=q}return D=z}if(q=D,s(P,z))return q;var ne=k(z);return w!==void 0&&w(q,ne)?(P=z,q):(P=z,D=ne)}var E=!1,P,D,M=x===void 0?null:x;return[function(){return _(y())},M===null?void 0:function(){return _(M())}]},[y,x,k,w]);var j=l(g,C[0],C[1]);return u(function(){S.hasValue=!0,S.value=j},[j]),m(j),j},cu}var Af;function vy(){return Af||(Af=1,lu.exports=yy()),lu.exports}var xy=vy();const wy=Ta(xy),Qm={},{useDebugValue:by}=dl,{useSyncExternalStoreWithSelector:ky}=wy;let Pf=!1;const _y=i=>i;function Sy(i,n=_y,r){(Qm?"production":void 0)!=="production"&&r&&!Pf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Pf=!0);const s=ky(i.subscribe,i.getState,i.getServerState||i.getInitialState,n,r);return by(s),s}const jy=i=>{(Qm?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof i=="function"?py(i):i,r=(s,l)=>Sy(n,s,l);return Object.assign(r,n),r},Pi=i=>jy,Ny={};function Ey(i,n){let r;try{r=i()}catch{return}return{getItem:l=>{var c;const u=m=>m===null?null:JSON.parse(m,void 0),h=(c=r.getItem(l))!=null?c:null;return h instanceof Promise?h.then(u):u(h)},setItem:(l,c)=>r.setItem(l,JSON.stringify(c,void 0)),removeItem:l=>r.removeItem(l)}}const Ni=i=>n=>{try{const r=i(n);return r instanceof Promise?r:{then(s){return Ni(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return Ni(s)(r)}}}},Cy=(i,n)=>(r,s,l)=>{let c={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,_)=>({..._,...j}),...n},u=!1;const h=new Set,m=new Set;let g;try{g=c.getStorage()}catch{}if(!g)return i((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),r(...j)},s,l);const y=Ni(c.serialize),x=()=>{const j=c.partialize({...s()});let _;const E=y({state:j,version:c.version}).then(P=>g.setItem(c.name,P)).catch(P=>{_=P});if(_)throw _;return E},k=l.setState;l.setState=(j,_)=>{k(j,_),x()};const w=i((...j)=>{r(...j),x()},s,l);let C;const S=()=>{var j;if(!g)return;u=!1,h.forEach(E=>E(s()));const _=((j=c.onRehydrateStorage)==null?void 0:j.call(c,s()))||void 0;return Ni(g.getItem.bind(g))(c.name).then(E=>{if(E)return c.deserialize(E)}).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==c.version){if(c.migrate)return c.migrate(E.state,E.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return E.state}).then(E=>{var P;return C=c.merge(E,(P=s())!=null?P:w),r(C,!0),x()}).then(()=>{_?.(C,void 0),u=!0,m.forEach(E=>E(C))}).catch(E=>{_?.(void 0,E)})};return l.persist={setOptions:j=>{c={...c,...j},j.getStorage&&(g=j.getStorage())},clearStorage:()=>{g?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>S(),hasHydrated:()=>u,onHydrate:j=>(h.add(j),()=>{h.delete(j)}),onFinishHydration:j=>(m.add(j),()=>{m.delete(j)})},S(),C||w},Ty=(i,n)=>(r,s,l)=>{let c={storage:Ey(()=>localStorage),partialize:S=>S,version:0,merge:(S,j)=>({...j,...S}),...n},u=!1;const h=new Set,m=new Set;let g=c.storage;if(!g)return i((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),r(...S)},s,l);const y=()=>{const S=c.partialize({...s()});return g.setItem(c.name,{state:S,version:c.version})},x=l.setState;l.setState=(S,j)=>{x(S,j),y()};const k=i((...S)=>{r(...S),y()},s,l);l.getInitialState=()=>k;let w;const C=()=>{var S,j;if(!g)return;u=!1,h.forEach(E=>{var P;return E((P=s())!=null?P:k)});const _=((j=c.onRehydrateStorage)==null?void 0:j.call(c,(S=s())!=null?S:k))||void 0;return Ni(g.getItem.bind(g))(c.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==c.version){if(c.migrate)return[!0,c.migrate(E.state,E.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var P;const[D,M]=E;if(w=c.merge(M,(P=s())!=null?P:k),r(w,!0),D)return y()}).then(()=>{_?.(w,void 0),w=s(),u=!0,m.forEach(E=>E(w))}).catch(E=>{_?.(void 0,E)})};return l.persist={setOptions:S=>{c={...c,...S},S.storage&&(g=S.storage)},clearStorage:()=>{g?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>C(),hasHydrated:()=>u,onHydrate:S=>(h.add(S),()=>{h.delete(S)}),onFinishHydration:S=>(m.add(S),()=>{m.delete(S)})},c.skipHydration||C(),w||k},Ay=(i,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((Ny?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Cy(i,n)):Ty(i,n),yl=Ay,Zm=Pi()(yl((i,n)=>({theme:"system",systemTheme:"light",setTheme:r=>{i({theme:r});const{systemTheme:s}=n();(r==="system"?s:r)==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},toggleTheme:()=>{const{theme:r}=n(),s=r==="light"?"dark":"light";n().setTheme(s)},initializeTheme:()=>{const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";i({systemTheme:r}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",c=>{const u=c.matches?"dark":"light";i({systemTheme:u});const{theme:h}=n();h==="system"&&(u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))});const{theme:s}=n();(s==="system"?r:s)==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}),{name:"theme-storage",partialize:i=>({theme:i.theme})})),Py=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Ra(async()=>{const{default:s}=await Promise.resolve().then(()=>Ia);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)};class $u extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class Ry extends $u{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Rf extends $u{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class If extends $u{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Cu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Cu||(Cu={}));var Iy=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};class Oy{constructor(n,{headers:r={},customFetch:s,region:l=Cu.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=Py(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,r={}){var s;return Iy(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=r;let h={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:y}).catch(S=>{throw new Ry(S)}),k=x.headers.get("x-relay-error");if(k&&k==="true")throw new Rf(x);if(!x.ok)throw new If(x);let w=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return w==="application/json"?C=yield x.json():w==="application/octet-stream"?C=yield x.blob():w==="text/event-stream"?C=x:w==="multipart/form-data"?C=yield x.formData():C=yield x.text(),{data:C,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof If||l instanceof Rf?l.context:void 0}}})}}var It={},ga={},pa={},ya={},va={},xa={},Dy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ca=Dy();const Ly=Ca.fetch,Jm=Ca.fetch.bind(Ca),Xm=Ca.Headers,Uy=Ca.Request,My=Ca.Response,Ia=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xm,Request:Uy,Response:My,default:Jm,fetch:Ly},Symbol.toStringTag,{value:"Module"})),Fy=Cm(Ia);var Zo={},Of;function Ym(){if(Of)return Zo;Of=1,Object.defineProperty(Zo,"__esModule",{value:!0});class i extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Zo.default=i,Zo}var Df;function eg(){if(Df)return xa;Df=1;var i=xa&&xa.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(xa,"__esModule",{value:!0});const n=i(Fy),r=i(Ym());class s{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=Object.assign({},this.headers),this.headers[c]=u,this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let m=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,x,k;let w=null,C=null,S=null,j=g.status,_=g.statusText;if(g.ok){if(this.method!=="HEAD"){const M=await g.text();M===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?C=M:C=JSON.parse(M))}const P=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(x=g.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");P&&D&&D.length>1&&(S=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(w={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,S=null,j=406,_="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const P=await g.text();try{w=JSON.parse(P),Array.isArray(w)&&g.status===404&&(C=[],w=null,j=200,_="OK")}catch{g.status===404&&P===""?(j=204,_="No Content"):w={message:P}}if(w&&this.isMaybeSingle&&(!((k=w?.details)===null||k===void 0)&&k.includes("0 rows"))&&(w=null,j=200,_="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:C,count:S,status:j,statusText:_}});return this.shouldThrowOnError||(m=m.catch(g=>{var y,x,k;return{error:{message:`${(y=g?.name)!==null&&y!==void 0?y:"FetchError"}: ${g?.message}`,details:`${(x=g?.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(k=g?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),m.then(c,u)}returns(){return this}overrideTypes(){return this}}return xa.default=s,xa}var Lf;function tg(){if(Lf)return va;Lf=1;var i=va&&va.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(va,"__esModule",{value:!0});const n=i(eg());class r extends n.default{select(l){let c=!1;const u=(l??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:h,referencedTable:m=h}={}){const g=m?`${m}.order`:"order",y=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${y?`${y},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:h=u}={}){const m=typeof h>"u"?"offset":`${h}.offset`,g=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(m,`${l}`),this.url.searchParams.set(g,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:h=!1,wal:m=!1,format:g="text"}={}){var y;const x=[l?"analyze":null,c?"verbose":null,u?"settings":null,h?"buffers":null,m?"wal":null].filter(Boolean).join("|"),k=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${k}"; options=${x};`,g==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return va.default=r,va}var Uf;function Bu(){if(Uf)return ya;Uf=1;var i=ya&&ya.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ya,"__esModule",{value:!0});const n=i(tg());class r extends n.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const g=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${m}fts${g}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return ya.default=r,ya}var Mf;function rg(){if(Mf)return pa;Mf=1;var i=pa&&pa.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pa,"__esModule",{value:!0});const n=i(Bu());class r{constructor(l,{headers:c={},schema:u,fetch:h}){this.url=l,this.headers=c,this.schema=u,this.fetch=h}select(l,{head:c=!1,count:u}={}){const h=c?"HEAD":"GET";let m=!1;const g=(l??"*").split("").map(y=>/\s/.test(y)&&!m?"":(y==='"'&&(m=!m),y)).join("");return this.url.searchParams.set("select",g),u&&(this.headers.Prefer=`count=${u}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:c,defaultToNull:u=!0}={}){const h="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),c&&m.push(`count=${c}`),u||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(l)){const g=l.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(g.length>0){const y=[...new Set(g)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:h,defaultToNull:m=!0}={}){const g="POST",y=[`resolution=${u?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&y.push(this.headers.Prefer),h&&y.push(`count=${h}`),m||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(l)){const x=l.reduce((k,w)=>k.concat(Object.keys(w)),[]);if(x.length>0){const k=[...new Set(x)].map(w=>`"${w}"`);this.url.searchParams.set("columns",k.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:c}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),c&&h.push(`count=${c}`),this.headers.Prefer=h.join(","),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const c="DELETE",u=[];return l&&u.push(`count=${l}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new n.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pa.default=r,pa}var pi={},yi={},Ff;function zy(){return Ff||(Ff=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.version=void 0,yi.version="0.0.0-automated"),yi}var zf;function $y(){if(zf)return pi;zf=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.DEFAULT_HEADERS=void 0;const i=zy();return pi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i.version}`},pi}var $f;function By(){if($f)return ga;$f=1;var i=ga&&ga.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ga,"__esModule",{value:!0});const n=i(rg()),r=i(Bu()),s=$y();class l{constructor(u,{headers:h={},schema:m,fetch:g}={}){this.url=u,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),h),this.schemaName=m,this.fetch=g}from(u){const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:m=!1,get:g=!1,count:y}={}){let x;const k=new URL(`${this.url}/rpc/${u}`);let w;m||g?(x=m?"HEAD":"GET",Object.entries(h).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{k.searchParams.append(S,j)})):(x="POST",w=h);const C=Object.assign({},this.headers);return y&&(C.Prefer=`count=${y}`),new r.default({method:x,url:k,headers:C,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return ga.default=l,ga}var Bf;function Wy(){if(Bf)return It;Bf=1;var i=It&&It.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(It,"__esModule",{value:!0}),It.PostgrestError=It.PostgrestBuilder=It.PostgrestTransformBuilder=It.PostgrestFilterBuilder=It.PostgrestQueryBuilder=It.PostgrestClient=void 0;const n=i(By());It.PostgrestClient=n.default;const r=i(rg());It.PostgrestQueryBuilder=r.default;const s=i(Bu());It.PostgrestFilterBuilder=s.default;const l=i(tg());It.PostgrestTransformBuilder=l.default;const c=i(eg());It.PostgrestBuilder=c.default;const u=i(Ym());return It.PostgrestError=u.default,It.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},It}var qy=Wy();const Hy=Ta(qy),{PostgrestClient:Gy,PostgrestQueryBuilder:Ow,PostgrestFilterBuilder:Dw,PostgrestTransformBuilder:Lw,PostgrestBuilder:Uw,PostgrestError:Mw}=Hy;function Vy(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Ky=Vy(),Qy="2.11.15",Zy=`realtime-js/${Qy}`,Jy="1.0.0",ng=1e4,Xy=1e3;var ki;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ki||(ki={}));var Gt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Gt||(Gt={}));var Wr;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Wr||(Wr={}));var Tu;(function(i){i.websocket="websocket"})(Tu||(Tu={}));var Cs;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Cs||(Cs={}));class Yy{constructor(){this.HEADER_LENGTH=1}decode(n,r){return n.constructor===ArrayBuffer?r(this._binaryDecode(n)):r(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const r=new DataView(n),s=new TextDecoder;return this._decodeBroadcast(n,r,s)}_decodeBroadcast(n,r,s){const l=r.getUint8(1),c=r.getUint8(2);let u=this.HEADER_LENGTH+2;const h=s.decode(n.slice(u,u+l));u=u+l;const m=s.decode(n.slice(u,u+c));u=u+c;const g=JSON.parse(s.decode(n.slice(u,n.byteLength)));return{ref:null,topic:h,event:m,payload:g}}}class sg{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(mt||(mt={}));const Wf=(i,n,r={})=>{var s;const l=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(n).reduce((c,u)=>(c[u]=ev(u,i,n,l),c),{})},ev=(i,n,r,s)=>{const l=n.find(h=>h.name===i),c=l?.type,u=r[i];return c&&!s.includes(c)?ag(c,u):Au(u)},ag=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return sv(n,r)}switch(i){case mt.bool:return tv(n);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return rv(n);case mt.json:case mt.jsonb:return nv(n);case mt.timestamp:return av(n);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return Au(n);default:return Au(n)}},Au=i=>i,tv=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},rv=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},nv=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(n){return console.log(`JSON parse error: ${n}`),i}return i},sv=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,s=i[r];if(i[0]==="{"&&s==="}"){let c;const u=i.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(h=>ag(n,h))}return i},av=i=>typeof i=="string"?i.replace(" ","T"):i,ig=i=>{let n=i;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")};class uu{constructor(n,r,s={},l=ng){this.channel=n,this.event=r,this.payload=s,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var qf;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(qf||(qf={}));class _i{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_i.syncState(this.state,l,c,u),this.pendingDiffs.forEach(m=>{this.state=_i.syncDiff(this.state,m,c,u)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=_i.syncDiff(this.state,l,c,u),h())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,l){const c=this.cloneDeep(n),u=this.transformState(r),h={},m={};return this.map(c,(g,y)=>{u[g]||(m[g]=y)}),this.map(u,(g,y)=>{const x=c[g];if(x){const k=y.map(j=>j.presence_ref),w=x.map(j=>j.presence_ref),C=y.filter(j=>w.indexOf(j.presence_ref)<0),S=x.filter(j=>k.indexOf(j.presence_ref)<0);C.length>0&&(h[g]=C),S.length>0&&(m[g]=S)}else h[g]=y}),this.syncDiff(c,{joins:h,leaves:m},s,l)}static syncDiff(n,r,s,l){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),l||(l=()=>{}),this.map(c,(h,m)=>{var g;const y=(g=n[h])!==null&&g!==void 0?g:[];if(n[h]=this.cloneDeep(m),y.length>0){const x=n[h].map(w=>w.presence_ref),k=y.filter(w=>x.indexOf(w.presence_ref)<0);n[h].unshift(...k)}s(h,y,m)}),this.map(u,(h,m)=>{let g=n[h];if(!g)return;const y=m.map(x=>x.presence_ref);g=g.filter(x=>y.indexOf(x.presence_ref)<0),n[h]=g,l(h,g,m),g.length===0&&delete n[h]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const l=n[s];return"metas"in l?r[s]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[s]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hf;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Hf||(Hf={}));var Gf;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Gf||(Gf={}));var _n;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(_n||(_n={}));class Wu{constructor(n,r={config:{}},s){this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new sg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new _i(this),this.broadcastEndpointURL=ig(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(n,r=this.timeout){var s,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Gt.closed){const{config:{broadcast:c,presence:u,private:h}}=this.params;this._onError(y=>n?.(_n.CHANNEL_ERROR,y)),this._onClose(()=>n?.(_n.CLOSED));const m={},g={broadcast:c,presence:u,postgres_changes:(l=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&l!==void 0?l:[],private:h};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){n?.(_n.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,w=(x=k?.length)!==null&&x!==void 0?x:0,C=[];for(let S=0;S<w;S++){const j=k[S],{filter:{event:_,schema:E,table:P,filter:D}}=j,M=y&&y[S];if(M&&M.event===_&&M.schema===E&&M.table===P&&M.filter===D)C.push(Object.assign(Object.assign({},j),{id:M.id}));else{this.unsubscribe(),this.state=Gt.errored,n?.(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(_n.SUBSCRIBED);return}}).receive("error",y=>{this.state=Gt.errored,n?.(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{n?.(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this._on(n,r,s)}async send(n,r={}){var s,l;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:u}=n,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,h,m;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(l=>{s=new uu(this,Wr.leave,{},n),s.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(n,r,s){const l=new AbortController,c=setTimeout(()=>l.abort(),s),u=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),u}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new uu(this,n,r,s);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var l,c;const u=n.toLocaleLowerCase(),{close:h,error:m,leave:g,join:y}=Wr;if(s&&[h,m,g,y].indexOf(u)>=0&&s!==this._joinRef())return;let k=this._onMessage(u,r,s);if(r&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(w=>{var C,S,j;return((C=w.filter)===null||C===void 0?void 0:C.event)==="*"||((j=(S=w.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(w=>w.callback(k,s)):(c=this.bindings[u])===null||c===void 0||c.filter(w=>{var C,S,j,_,E,P;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const D=w.id,M=(C=w.filter)===null||C===void 0?void 0:C.event;return D&&((S=r.ids)===null||S===void 0?void 0:S.includes(D))&&(M==="*"||M?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const D=(E=(_=w?.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return D==="*"||D===((P=r?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof k=="object"&&"ids"in k){const C=k.data,{schema:S,table:j,commit_timestamp:_,type:E,errors:P}=C;k=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:_,eventType:E,new:{},old:{},errors:P}),this._getPayloadRecords(C))}w.callback(k,s)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const l=n.toLocaleLowerCase(),c={type:l,filter:r,callback:s};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&Wu.isEqual(l.filter,r))}),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Wr.close,{},n)}_onError(n){this._on(Wr.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Wf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Wf(n.columns,n.old_record)),r}}const Vf=()=>{},iv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ov{constructor(n,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ng,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vf,this.ref=0,this.logger=Vf,this.conn=null,this.sendBuffer=[],this.serializer=new Yy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let u;return c?u=c:typeof fetch>"u"?u=(...h)=>Ra(async()=>{const{default:m}=await Promise.resolve().then(()=>Ia);return{default:m}},void 0).then(({default:m})=>m(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${n}/${Tu.websocket}`,this.httpEndpoint=ig(n),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const l=(s=r?.params)===null||s===void 0?void 0:s.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=r?.encode?r.encode:(c,u)=>u(JSON.stringify(c)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ky),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jy}))}disconnect(n,r){this.conn&&(this.conn.onclose=function(){},n?this.conn.close(n,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ki.connecting:return Cs.Connecting;case ki.open:return Cs.Open;case ki.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}channel(n,r={config:{}}){const s=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===s);if(l)return l;{const c=new Wu(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:s,payload:l,ref:c}=n,u=()=>{this.encode(n,h=>{var m;(m=this.conn)===null||m===void 0||m.send(h)})};this.log("push",`${r} ${s} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){let r=n||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const l={access_token:r,version:Zy};r&&s.updateJoinPayload(l),s.joinedOnce&&s._isJoined()&&s._push(Wr.access_token,{access_token:r})}))}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(n=this.conn)===null||n===void 0||n.close(Xy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_onConnMessage(n){this.decode(n.data,r=>{let{topic:s,event:l,payload:c,ref:u}=r;s==="phoenix"&&l==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${s} ${l} ${u&&"("+u+")"||""}`,c),Array.from(this.channels).filter(h=>h._isMember(s)).forEach(h=>h._trigger(l,c,u)),this.stateChangeCallbacks.message.forEach(h=>h(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(n=>n())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){this.log("transport","close",n),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(n))}_onConnError(n){this.log("transport",`${n}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(n))}_triggerChanError(){this.channels.forEach(n=>n._trigger(Wr.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${s}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([iv],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class qu extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ot(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class lv extends qu{constructor(n,r){super(n),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pu extends qu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}}var cv=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};const og=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Ra(async()=>{const{default:s}=await Promise.resolve().then(()=>Ia);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},uv=()=>cv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ra(()=>Promise.resolve().then(()=>Ia),void 0)).Response:Response}),Ru=i=>{if(Array.isArray(i))return i.map(r=>Ru(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,s])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=Ru(s)}),n};var Ps=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};const du=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),dv=(i,n,r)=>Ps(void 0,void 0,void 0,function*(){const s=yield uv();i instanceof s&&!r?.noResolveJson?i.json().then(l=>{n(new lv(du(l),i.status||500))}).catch(l=>{n(new Pu(du(l),l))}):n(new Pu(du(i),i))}),hv=(i,n,r,s)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),s&&(l.body=JSON.stringify(s)),Object.assign(Object.assign({},l),r))};function Ri(i,n,r,s,l,c){return Ps(this,void 0,void 0,function*(){return new Promise((u,h)=>{i(r,hv(n,s,l,c)).then(m=>{if(!m.ok)throw m;return s?.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>dv(m,h,s))})})}function ll(i,n,r,s){return Ps(this,void 0,void 0,function*(){return Ri(i,"GET",n,r,s)})}function Xn(i,n,r,s,l){return Ps(this,void 0,void 0,function*(){return Ri(i,"POST",n,s,l,r)})}function fv(i,n,r,s,l){return Ps(this,void 0,void 0,function*(){return Ri(i,"PUT",n,s,l,r)})}function mv(i,n,r,s){return Ps(this,void 0,void 0,function*(){return Ri(i,"HEAD",n,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function lg(i,n,r,s,l){return Ps(this,void 0,void 0,function*(){return Ri(i,"DELETE",n,s,l,r)})}var hr=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};const gv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pv{constructor(n,r={},s,l){this.url=n,this.headers=r,this.bucketId=s,this.fetch=og(l)}uploadOrUpdate(n,r,s,l){return hr(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Kf),l);let h=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),m&&c.append("metadata",this.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl),m&&c.append("metadata",this.encodeMetadata(m))):(c=s,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,m&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),l?.headers&&(h=Object.assign(Object.assign({},h),l.headers));const g=this._removeEmptyFolders(r),y=this._getFinalPath(g),x=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:n,body:c,headers:h},u?.duplex?{duplex:u.duplex}:{})),k=yield x.json();return x.ok?{data:{path:g,id:k.Id,fullPath:k.Key},error:null}:{data:null,error:k}}catch(c){if(Ot(c))return{data:null,error:c};throw c}})}upload(n,r,s){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,r,s)})}uploadToSignedUrl(n,r,s,l){return hr(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",r);try{let m;const g=Object.assign({upsert:Kf.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType);const x=yield this.fetch(h.toString(),{method:"PUT",body:m,headers:y}),k=yield x.json();return x.ok?{data:{path:c,fullPath:k.Key},error:null}:{data:null,error:k}}catch(m){if(Ot(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(n,r){return hr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(n);const l=Object.assign({},this.headers);r?.upsert&&(l["x-upsert"]="true");const c=yield Xn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:l}),u=new URL(this.url+c.url),h=u.searchParams.get("token");if(!h)throw new qu("No token returned by API");return{data:{signedUrl:u.toString(),path:n,token:h},error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}update(n,r,s){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,r,s)})}move(n,r,s){return hr(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(Ot(l))return{data:null,error:l};throw l}})}copy(n,r,s){return hr(this,void 0,void 0,function*(){try{return{data:{path:(yield Xn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(Ot(l))return{data:null,error:l};throw l}})}createSignedUrl(n,r,s){return hr(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield Xn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(Ot(l))return{data:null,error:l};throw l}})}createSignedUrls(n,r,s){return hr(this,void 0,void 0,function*(){try{const l=yield Xn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:n},{headers:this.headers}),c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(Ot(l))return{data:null,error:l};throw l}})}download(n,r){return hr(this,void 0,void 0,function*(){const l=typeof r?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(r?.transform||{}),u=c?`?${c}`:"";try{const h=this._getFinalPath(n);return{data:yield(yield ll(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(Ot(h))return{data:null,error:h};throw h}})}info(n){return hr(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{const s=yield ll(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ru(s),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}exists(n){return hr(this,void 0,void 0,function*(){const r=this._getFinalPath(n);try{return yield mv(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Ot(s)&&s instanceof Pu){const l=s.originalError;if([400,404].includes(l?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(n,r){const s=this._getFinalPath(n),l=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const h=typeof r?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(r?.transform||{});m!==""&&l.push(m);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${g}`)}}}remove(n){return hr(this,void 0,void 0,function*(){try{return{data:yield lg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}list(n,r,s){return hr(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},gv),r),{prefix:n||""});return{data:yield Xn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},s),error:null}}catch(l){if(Ot(l))return{data:null,error:l};throw l}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}}const yv="2.7.1",vv={"X-Client-Info":`storage-js/${yv}`};var wa=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};class xv{constructor(n,r={},s){this.url=n,this.headers=Object.assign(Object.assign({},vv),r),this.fetch=og(s)}listBuckets(){return wa(this,void 0,void 0,function*(){try{return{data:yield ll(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Ot(n))return{data:null,error:n};throw n}})}getBucket(n){return wa(this,void 0,void 0,function*(){try{return{data:yield ll(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}createBucket(n,r={public:!1}){return wa(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}updateBucket(n,r){return wa(this,void 0,void 0,function*(){try{return{data:yield fv(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}})}emptyBucket(n){return wa(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}deleteBucket(n){return wa(this,void 0,void 0,function*(){try{return{data:yield lg(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}})}}class wv extends xv{constructor(n,r={},s){super(n,r,s)}from(n){return new pv(this.url,this.headers,n,this.fetch)}}const bv="2.52.0";let wi="";typeof Deno<"u"?wi="deno":typeof document<"u"?wi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wi="react-native":wi="node";const kv={"X-Client-Info":`supabase-js-${wi}/${bv}`},_v={headers:kv},Sv={schema:"public"},jv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nv={};var Ev=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};const Cv=i=>{let n;return i?n=i:typeof fetch>"u"?n=Jm:n=fetch,(...r)=>n(...r)},Tv=()=>typeof Headers>"u"?Xm:Headers,Av=(i,n,r)=>{const s=Cv(r),l=Tv();return(c,u)=>Ev(void 0,void 0,void 0,function*(){var h;const m=(h=yield n())!==null&&h!==void 0?h:i;let g=new l(u?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),s(c,Object.assign(Object.assign({},u),{headers:g}))})};var Pv=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};function Rv(i){return i.endsWith("/")?i:i+"/"}function Iv(i,n){var r,s;const{db:l,auth:c,realtime:u,global:h}=i,{db:m,auth:g,realtime:y,global:x}=n,k={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},g),c),realtime:Object.assign(Object.assign({},y),u),global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(r=x?.headers)!==null&&r!==void 0?r:{}),(s=h?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Pv(this,void 0,void 0,function*(){return""})};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}const cg="2.71.1",ja=30*1e3,Iu=3,hu=Iu*ja,Ov="http://localhost:9999",Dv="supabase.auth.token",Lv={"X-Client-Info":`gotrue-js/${cg}`},Ou="X-Supabase-Api-Version",ug={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Uv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Mv=600*1e3;class Hu extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ye(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Fv extends Hu{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function zv(i){return Ye(i)&&i.name==="AuthApiError"}class dg extends Hu{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class ns extends Hu{constructor(n,r,s,l){super(n,s,l),this.name=r,this.status=s}}class Zn extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $v(i){return Ye(i)&&i.name==="AuthSessionMissingError"}class Jo extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xo extends ns{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Yo extends ns{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bv(i){return Ye(i)&&i.name==="AuthImplicitGrantRedirectError"}class Qf extends ns{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Du extends ns{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function fu(i){return Ye(i)&&i.name==="AuthRetryableFetchError"}class Zf extends ns{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Lu extends ns{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const cl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jf=` 	
\r=`.split(""),Wv=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Jf.length;n+=1)i[Jf[n].charCodeAt(0)]=-2;for(let n=0;n<cl.length;n+=1)i[cl[n].charCodeAt(0)]=n;return i})();function Xf(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(cl[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(cl[s]),n.queuedBits-=6}}function hg(i,n,r){const s=Wv[i];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Yf(i){const n=[],r=u=>{n.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{Gv(u,s,r)};for(let u=0;u<i.length;u+=1)hg(i.charCodeAt(u),l,c);return n.join("")}function qv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Hv(i,n){for(let r=0;r<i.length;r+=1){let s=i.charCodeAt(r);if(s>55295&&s<=56319){const l=(s-55296)*1024&65535;s=(i.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}qv(s,n)}}function Gv(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let s=1;s<6;s+=1)if((i>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Vv(i){const n=[],r={queue:0,queuedBits:0},s=l=>{n.push(l)};for(let l=0;l<i.length;l+=1)hg(i.charCodeAt(l),r,s);return new Uint8Array(n)}function Kv(i){const n=[];return Hv(i,r=>n.push(r)),new Uint8Array(n)}function Qv(i){const n=[],r={queue:0,queuedBits:0},s=l=>{n.push(l)};return i.forEach(l=>Xf(l,r,s)),Xf(null,r,s),n.join("")}function Zv(i){return Math.round(Date.now()/1e3)+i}function Jv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const n=Math.random()*16|0;return(i=="x"?n:n&3|8).toString(16)})}const $r=()=>typeof window<"u"&&typeof document<"u",js={tested:!1,writable:!1},fg=()=>{if(!$r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(js.tested)return js.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),js.tested=!0,js.writable=!0}catch{js.tested=!0,js.writable=!1}return js.writable};function Xv(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return r.searchParams.forEach((s,l)=>{n[l]=s}),n}const mg=i=>{let n;return i?n=i:typeof fetch>"u"?n=(...r)=>Ra(async()=>{const{default:s}=await Promise.resolve().then(()=>Ia);return{default:s}},void 0).then(({default:s})=>s(...r)):n=fetch,(...r)=>n(...r)},Yv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Na=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},Ns=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Kn=async(i,n)=>{await i.removeItem(n)};class vl{constructor(){this.promise=new vl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}vl.promiseConstructor=Promise;function mu(i){const n=i.split(".");if(n.length!==3)throw new Lu("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!Uv.test(n[s]))throw new Lu("JWT not in base64url format");return{header:JSON.parse(Yf(n[0])),payload:JSON.parse(Yf(n[1])),signature:Vv(n[2]),raw:{header:n[0],payload:n[1]}}}async function ex(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function tx(i,n){return new Promise((s,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await i(c);if(!n(c,null,u)){s(u);return}}catch(u){if(!n(c,u)){l(u);return}}})()})}function rx(i){return("0"+i.toString(16)).substr(-2)}function nx(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*s));return l}return crypto.getRandomValues(n),Array.from(n,rx).join("")}async function sx(i){const r=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(s);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function ax(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await sx(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ba(i,n,r=!1){const s=nx();let l=s;r&&(l+="/PASSWORD_RECOVERY"),await Na(i,`${n}-code-verifier`,l);const c=await ax(s);return[c,s===c?"plain":"s256"]}const ix=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ox(i){const n=i.headers.get(Ou);if(!n||!n.match(ix))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function lx(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function cx(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ux=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ka(i){if(!ux.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function em(i){return JSON.parse(JSON.stringify(i))}var dx=function(i,n){var r={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.indexOf(s)<0&&(r[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(r[s[l]]=i[s[l]]);return r};const Es=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),hx=[502,503,504];async function tm(i){var n;if(!Yv(i))throw new Du(Es(i),0);if(hx.includes(i.status))throw new Du(Es(i),i.status);let r;try{r=await i.json()}catch(c){throw new dg(Es(c),c)}let s;const l=ox(i);if(l&&l.getTime()>=ug["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Zf(Es(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Zn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Zf(Es(r),i.status,r.weak_password.reasons);throw new Fv(Es(r),i.status||500,s)}const fx=(i,n,r,s)=>{const l={method:i,headers:n?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(s),Object.assign(Object.assign({},l),r))};async function nt(i,n,r,s){var l;const c=Object.assign({},s?.headers);c[Ou]||(c[Ou]=ug["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const u=(l=s?.query)!==null&&l!==void 0?l:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await mx(i,n,r+h,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function mx(i,n,r,s,l,c){const u=fx(n,s,l,c);let h;try{h=await i(r,Object.assign({},u))}catch(m){throw console.error(m),new Du(Es(m),0)}if(h.ok||await tm(h),s?.noResolveJson)return h;try{return await h.json()}catch(m){await tm(m)}}function kn(i){var n;let r=null;vx(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=Zv(i.expires_in)));const s=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:s},error:null}}function rm(i){const n=kn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=i.weak_password),n}function Yn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function gx(i){return{data:i,error:null}}function px(i){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:l,verification_type:c}=i,u=dx(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:n,email_otp:r,hashed_token:s,redirect_to:l,verification_type:c},m=Object.assign({},u);return{data:{properties:h,user:m},error:null}}function yx(i){return i}function vx(i){return i.access_token&&i.refresh_token&&i.expires_in}const pu=["global","local","others"];var xx=function(i,n){var r={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&n.indexOf(s)<0&&(r[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(r[s[l]]=i[s[l]]);return r};class wx{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=mg(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,r=pu[0]){if(pu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pu.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Yn})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=xx(n,["options"]),l=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(l.new_email=s?.newEmail,delete l.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:px,redirectTo:r?.redirectTo})}catch(r){if(Ye(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Yn})}catch(r){if(Ye(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,l,c,u,h,m;try{const g={nextPage:null,lastPage:0,total:0},y=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:yx});if(y.error)throw y.error;const x=await y.json(),k=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(m=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return w.length>0&&(w.forEach(C=>{const S=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(C.split(";")[1].split("=")[1]);g[`${j}Page`]=S}),g.total=parseInt(k)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(Ye(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){ka(n);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Yn})}catch(r){if(Ye(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){ka(n);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Yn})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){ka(n);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Yn})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){ka(n.userId);try{const{data:r,error:s}=await nt(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:s}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _deleteFactor(n){ka(n.userId),ka(n.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}}function nm(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}function bx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _a={debug:!!(globalThis&&fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class kx extends gg{}async function _x(i,n,r){_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),_a.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async l=>{if(l){_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await r()}finally{_a.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(n===0)throw _a.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new kx(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(_a.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}bx();const Sx={url:Ov,storageKey:Dv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function sm(i,n,r){return await r()}const Sa={};class Ei{constructor(n){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ei.nextInstanceID,Ei.nextInstanceID+=1,this.instanceID>0&&$r()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Sx),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new wx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=mg(l.fetch),this.lock=l.lock||sm,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:$r()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=_x:this.lock=sm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nm(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=nm(this.memoryStorage)),$r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,r;return(r=(n=Sa[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Sa[this.storageKey]=Object.assign(Object.assign({},Sa[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Sa[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Sa[this.storageKey]=Object.assign(Object.assign({},Sa[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cg}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const r=Xv(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),$r()&&this.detectSessionInUrl&&s!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Bv(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ye(r)?{error:r}:{error:new dg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,l;try{const c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:kn}),{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(c){if(Ye(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var r,s,l;try{let c;if("email"in n){const{email:y,password:x,options:k}=n;let w=null,C=null;this.flowType==="pkce"&&([w,C]=await ba(this.storage,this.storageKey)),c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:x,data:(r=k?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:w,code_challenge_method:C},xform:kn})}else if("phone"in n){const{phone:y,password:x,options:k}=n;c=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(s=k?.data)!==null&&s!==void 0?s:{},channel:(l=k?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:kn})}else throw new Xo("You must provide either an email or phone number and a password");const{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const m=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(c){if(Ye(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:u,options:h}=n;r=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:rm})}else if("phone"in n){const{phone:c,password:u,options:h}=n;r=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:rm})}else throw new Xo("You must provide either an email or phone number and a password");const{data:s,error:l}=r;return l?{data:{user:null,session:null},error:l}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Jo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:l})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(n){var r,s,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;if(r==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(n){var r,s,l,c,u,h,m,g,y,x,k,w;let C,S;if("message"in n)C=n.message,S=n.signature;else{const{chain:j,wallet:_,statement:E,options:P}=n;let D;if($r())if(typeof _=="object")D=_;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=_}const M=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),E?{statement:E}:null));let q;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")q=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)q=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)C=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),S=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${M.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(l=(s=P?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=P?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((u=P?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((h=P?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((m=P?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((g=P?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((x=(y=P?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...P.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(C),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=z}}try{const{data:j,error:_}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Qv(S)},!((k=n.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(w=n.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:kn});if(_)throw _;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Jo}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:_})}catch(j){if(Ye(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(n){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`),[s,l]=(r??"").split("/");try{const{data:c,error:u}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:kn});if(await Kn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Jo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(Ye(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:r,provider:s,token:l,access_token:c,nonce:u}=n,h=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:kn}),{data:m,error:g}=h;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Jo}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:g})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(n){var r,s,l,c,u;try{if("email"in n){const{email:h,options:m}=n;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await ba(this.storage,this.storageKey));const{error:x}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in n){const{phone:h,options:m}=n,{data:g,error:y}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(c=m?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(u=m?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:y}}throw new Xo("You must provide either an email or phone number.")}catch(h){if(Ye(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(n){var r,s;try{let l,c;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:h}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:kn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,g=u.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(l){if(Ye(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var r,s,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await ba(this.storage,this.storageKey)),await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:gx})}catch(c){if(Ye(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new Zn;const{error:l}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(Ye(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:l,options:c}=n,{error:u}=await nt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in n){const{phone:s,type:l,options:c}=n,{data:u,error:h}=await nt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Xo("You must provide either an email or phone number and a type")}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<hu:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const u=await Ns(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=gu()}if(this.storage.isServer&&n.user){let u=this.suppressGetSessionWarning;n=new Proxy(n,{get:(m,g,y)=>(!u&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,g,y))})}return{data:{session:n},error:null}}const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Yn}):await this._useSession(async r=>{var s,l,c;const{data:u,error:h}=r;if(h)throw h;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zn}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Yn})})}catch(r){if(Ye(r))return $v(r)&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:l,error:c}=s;if(c)throw c;if(!l.session)throw new Zn;const u=l.session;let h=null,m=null;this.flowType==="pkce"&&n.email!=null&&([h,m]=await ba(this.storage,this.storageKey));const{data:g,error:y}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:h,code_challenge_method:m}),jwt:u.access_token,xform:Yn});if(y)throw y;return u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Ye(s))return{data:{user:null},error:s};throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Zn;const r=Date.now()/1e3;let s=r,l=!0,c=null;const{payload:u}=mu(n.access_token);if(u.exp&&(s=u.exp,l=s<=r),l){const{session:h,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:m}=await this._getUser(n.access_token);if(m)throw m;c={access_token:n.access_token,refresh_token:n.refresh_token,user:h.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(Ye(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:u,error:h}=r;if(h)throw h;n=(s=u.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new Zn;const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ye(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(n,r){try{if(!$r())throw new Yo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Yo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Qf("No code detected.");const{data:E,error:P}=await this._exchangeCodeForSession(n.code);if(P)throw P;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:h,expires_at:m,token_type:g}=n;if(!c||!h||!u||!g)throw new Yo("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(h);let k=y+x;m&&(k=parseInt(m));const w=k-y;w*1e3<=ja&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${x}s`);const C=k-x;y-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,k,y):y-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,k,y);const{data:S,error:j}=await this._getUser(c);if(j)throw j;const _={provider_token:s,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:k,refresh_token:u,token_type:g,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:n.type},error:null}}catch(s){if(Ye(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:l,error:c}=r;if(c)return{error:c};const u=(s=l.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:h}=await this.admin.signOut(u,n);if(h&&!(zv(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return n!=="others"&&(await this._removeSession(),await Kn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const r=Jv(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,l;try{const{data:{session:c},error:u}=r;if(u)throw u;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let s=null,l=null;this.flowType==="pkce"&&([s,l]=await ba(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(Ye(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async linkIdentity(n){var r;try{const{data:s,error:l}=await this._useSession(async c=>{var u,h,m,g,y;const{data:x,error:k}=c;if(k)throw k;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=n.options)===null||h===void 0?void 0:h.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return $r()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:n.provider,url:s?.url},error:null}}catch(s){if(Ye(s))return{data:{provider:n.provider,url:null},error:s};throw s}}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,l;const{data:c,error:u}=r;if(u)throw u;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await tx(async l=>(l>0&&await ex(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:kn})),(l,c)=>{const u=200*Math.pow(2,l);return c&&fu(c)&&Date.now()+u-s<ja})}catch(s){if(this._debug(r,"error",s),Ye(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),$r()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const l=await Ns(this.storage,this.storageKey);if(l&&this.userStorage){let u=await Ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await Na(this.userStorage,this.storageKey+"-user",u)),l.user=(n=u?.user)!==null&&n!==void 0?n:gu()}else if(l&&!l.user&&!l.user){const u=await Ns(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await Kn(this.storage,this.storageKey+"-user"),await Na(this.storage,this.storageKey,l)):l.user=gu()}if(this._debug(s,"session from storage",l),!this._isValidSession(l)){this._debug(s,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hu;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${hu}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),fu(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(l.access_token);!h&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(s,"error",l),console.error(l);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new Zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new vl;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Zn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={session:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(l,"error",c),Ye(c)){const u={session:null,error:c};return fu(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,s=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(n,r)}catch(m){c.push(m)}});if(await Promise.all(u),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const r=Object.assign({},n),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Na(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=em(l);await Na(this.storage,this.storageKey,c)}else{const l=em(r);await Na(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Kn(this.storage,this.storageKey),await Kn(this.storage,this.storageKey+"-code-verifier"),await Kn(this.storage,this.storageKey+"-user"),this.userStorage&&await Kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&$r()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ja);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((s.expires_at*1e3-n)/ja);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ja}ms, refresh threshold is ${Iu} ticks`),l<=Iu&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof gg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$r()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const l=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&l.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,u]=await ba(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(h.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);l.push(c.toString())}return s?.skipBrowserRedirect&&l.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;return c?{data:null,error:c}:await nt(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,l;const{data:c,error:u}=r;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:m,error:g}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(n.factorType==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:u,error:h}=await nt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:l,error:c}=r;return c?{data:null,error:c}:await nt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?{data:null,error:s}:await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=n?.factors||[],l=s.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=s.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:s,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var r,s;const{data:{session:l},error:c}=n;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=mu(l.access_token);let h=null;u.aal&&(h=u.aal);let m=h;((s=(r=l.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(h=>h.kid===n);if(s)return s;const l=Date.now();if(s=this.jwks.keys.find(h=>h.kid===n),s&&this.jwks_cached_at+Mv>l)return s;const{data:c,error:u}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,s=c.keys.find(h=>h.kid===n),!s)?null:s}async getClaims(n,r={}){try{let s=n;if(!s){const{data:w,error:C}=await this.getSession();if(C||!w.session)return{data:null,error:C};s=w.session.access_token}const{header:l,payload:c,signature:u,raw:{header:h,payload:m}}=mu(s);r?.allowExpired||lx(c.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:c,header:l,signature:u},error:null}}const y=cx(l.alg),x=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,u,Kv(`${h}.${m}`)))throw new Lu("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}}}Ei.nextInstanceID=0;const jx=Ei;class Nx extends jx{constructor(n){super(n)}}var Ex=function(i,n,r,s){function l(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function h(y){try{g(s.next(y))}catch(x){u(x)}}function m(y){try{g(s.throw(y))}catch(x){u(x)}}function g(y){y.done?c(y.value):l(y.value).then(h,m)}g((s=s.apply(i,n||[])).next())})};class Cx{constructor(n,r,s){var l,c,u;if(this.supabaseUrl=n,this.supabaseKey=r,!n)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const h=Rv(n),m=new URL(h);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:Sv,realtime:Nv,auth:Object.assign(Object.assign({},jv),{storageKey:g}),global:_v},x=Iv(s??{},y);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(k,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=x.auth)!==null&&u!==void 0?u:{},this.headers,x.global.fetch),this.fetch=Av(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new Gy(new URL("rest/v1",m).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),x.accessToken||this._listenForAuthEvents()}get functions(){return new Oy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new wv(this.storageUrl.href,this.headers,this.fetch)}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},s={}){return this.rest.rpc(n,r,s)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,r;return Ex(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:l,storageKey:c,flowType:u,lock:h,debug:m},g,y){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nx({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),g),storageKey:c,autoRefreshToken:n,persistSession:r,detectSessionInUrl:s,storage:l,flowType:u,lock:h,debug:m,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new ov(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(n,r,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tx=(i,n,r)=>new Cx(i,n,r);class Ax{enabled=!0;formatTimestamp(){return new Date().toISOString()}formatMessage(n){return`${n.timestamp} ${n.prefix} ${n.action}`}logWithLevel(n){if(!this.enabled)return;const r=this.formatMessage(n),s=n.level||"log";switch((s==="error"||n.action.includes("START")||n.action.includes("BEGIN"))&&console.log(`
${"=".repeat(80)}`),s){case"error":console.error(r,n.data||""),n.data?.stack&&console.error("Stack trace:",n.data.stack);break;case"warn":console.warn(r,n.data||"");break;case"info":console.info(r,n.data||"");break;default:console.log(r,n.data||"")}(s==="error"||n.action.includes("END")||n.action.includes("COMPLETE"))&&console.log(`${"=".repeat(80)}
`)}log(n,r,s){this.logWithLevel({timestamp:this.formatTimestamp(),prefix:n,action:r,data:s,level:"log"})}info(n,r,s){this.logWithLevel({timestamp:this.formatTimestamp(),prefix:n,action:r,data:s,level:"info"})}warn(n,r,s){this.logWithLevel({timestamp:this.formatTimestamp(),prefix:n,action:r,data:s,level:"warn"})}error(n,r,s){this.logWithLevel({timestamp:this.formatTimestamp(),prefix:n,action:r,data:s,level:"error"})}group(n,r,s){if(!this.enabled){s();return}console.group(`${this.formatTimestamp()} ${n} ${r}`);try{s()}finally{console.groupEnd()}}logObject(n,r,s){this.log(n,r,JSON.stringify(s,null,2))}logUrl(n,r,s){const l=typeof s=="string"?new URL(s):s,c={href:l.href,origin:l.origin,pathname:l.pathname,search:l.search,hash:l.hash,searchParams:Object.fromEntries(l.searchParams),hashParams:this.parseHashParams(l.hash)};this.group(n,`${r} - URL Details`,()=>{console.log("Full URL:",c.href),console.log("Origin:",c.origin),console.log("Pathname:",c.pathname),console.log("Search:",c.search),console.log("Hash:",c.hash),console.log("Search Params:",c.searchParams),console.log("Hash Params:",c.hashParams)})}parseHashParams(n){if(!n||n==="#")return{};const r={},l=n.substring(1).split("&");for(const c of l){const[u,h]=c.split("=");u&&(r[u]=h||"")}return r}logTokens(n,r,s){this.group(n,`${r} - Token Details`,()=>{Object.entries(s).forEach(([l,c])=>{if(l.toLowerCase().includes("token")||l.toLowerCase().includes("secret")){const u=c?`${String(c).slice(0,8)}...${String(c).slice(-8)}`:"null";console.log(`${l}:`,u)}else console.log(`${l}:`,c)})})}logSession(n,r,s){if(!s){this.warn(n,`${r} - No session data`);return}this.group(n,`${r} - Session Details`,()=>{console.log("Session exists:",!!s),console.log("User ID:",s.user?.id||"No user"),console.log("User email:",s.user?.email||"No email"),console.log("Access token:",s.access_token?`${s.access_token.slice(0,20)}...`:"No token"),console.log("Refresh token:",s.refresh_token?`${s.refresh_token.slice(0,20)}...`:"No token"),console.log("Expires at:",s.expires_at||"No expiry"),console.log("Expires in:",s.expires_in||"No expiry info")})}logApiResponse(n,r,s){this.group(n,`${r} - API Response`,()=>{s.error&&(console.error("Error:",s.error),s.error.message&&console.error("Error message:",s.error.message),s.error.status&&console.error("Error status:",s.error.status),s.error.code&&console.error("Error code:",s.error.code)),s.data&&console.log("Data:",s.data),s.session&&this.logSession(n,"Response session",s.session)})}}const ce=new Ax,pg="https://xbctnstrkgbkrgzdifyq.supabase.co",yg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhiY3Ruc3Rya2dia3JnemRpZnlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyMTg3NjMsImV4cCI6MjA2ODc5NDc2M30.3SXzhSp-m2cpv2MBbTuAF1uTjqO-8wPPurj6NBGgt7A";ce.log("[SUPABASE]","Initializing Supabase client",{url:pg,hasAnonKey:!0,anonKeyLength:yg?.length,environment:"production"});const vg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0};ce.log("[SUPABASE]","Auth configuration",vg);const Xt=Tx(pg,yg,{auth:vg});ce.log("[SUPABASE]","Supabase client created successfully");Xt.auth.onAuthStateChange((i,n)=>{switch(ce.info("[SUPABASE]","Low-level auth state change",{event:i,hasSession:!!n,hasUser:!!n?.user,userId:n?.user?.id,userEmail:n?.user?.email,sessionExpiresAt:n?.expires_at,timestamp:new Date().toISOString()}),i){case"INITIAL_SESSION":ce.log("[SUPABASE]","Initial session detected",{hasSession:!!n,userId:n?.user?.id});break;case"SIGNED_IN":ce.log("[SUPABASE]","User signed in",{userId:n?.user?.id,email:n?.user?.email,provider:n?.user?.app_metadata?.provider});break;case"SIGNED_OUT":ce.log("[SUPABASE]","User signed out");break;case"PASSWORD_RECOVERY":ce.info("[SUPABASE]","Password recovery event",{userId:n?.user?.id,email:n?.user?.email,hasAccessToken:!!n?.access_token,hasRefreshToken:!!n?.refresh_token});break;case"TOKEN_REFRESHED":ce.log("[SUPABASE]","Token refreshed",{userId:n?.user?.id,expiresAt:n?.expires_at});break;case"USER_UPDATED":ce.log("[SUPABASE]","User updated",{userId:n?.user?.id,email:n?.user?.email});break;default:ce.warn("[SUPABASE]",`Unknown auth event: ${i}`,{hasSession:!!n})}});Xt.auth.onAuthStateChange((i,n)=>{i==="SIGNED_OUT"&&n===null&&Xt.auth.getSession().then(({error:r})=>{r&&ce.error("[SUPABASE]","Auth error detected",{error:r.message,errorCode:r.code,errorStatus:r.status})})});ce.log("[SUPABASE]","Supabase client initialization complete",{timestamp:new Date().toISOString()});const rl=async i=>{ce.log("[AUTH_STORE]","START - convertSupabaseUser",{userId:i.id,email:i.email,hasMetadata:!!i.user_metadata});try{ce.log("[AUTH_STORE]","Fetching user profile from database",{userId:i.id});const{data:n,error:r}=await Xt.from("profiles").select("*").eq("id",i.id).single();if(ce.logApiResponse("[AUTH_STORE]","Profile fetch response",{data:n,error:r}),r||!n){ce.warn("[AUTH_STORE]","Profile not found, creating default profile",{error:r?.message,userId:i.id});const l={id:i.id,email:i.email,username:i.user_metadata?.username||i.email.split("@")[0],level:1,total_xp:0,coins:100,gems:10,created_at:new Date().toISOString(),last_active:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};ce.log("[AUTH_STORE]","Default profile created",l);try{ce.log("[AUTH_STORE]","Attempting to insert profile into database");const u=await Xt.from("profiles").insert([l]).select().single();ce.logApiResponse("[AUTH_STORE]","Profile insert response",u)}catch(u){ce.error("[AUTH_STORE]","Could not create profile in database",{error:u,stack:u instanceof Error?u.stack:void 0})}const c={id:i.id,email:i.email,username:l.username,level:l.level,totalXp:l.total_xp,coins:l.coins,gems:l.gems,createdAt:l.created_at,lastActive:l.last_active,preferences:l.preferences};return ce.log("[AUTH_STORE]","END - convertSupabaseUser (default profile)",c),c}const s={id:n.id,email:n.email,username:n.username,level:n.level,totalXp:n.total_xp,coins:n.coins,gems:n.gems,createdAt:n.created_at,lastActive:n.last_active,preferences:n.preferences};return ce.log("[AUTH_STORE]","END - convertSupabaseUser (existing profile)",s),s}catch(n){ce.error("[AUTH_STORE]","Error in convertSupabaseUser",{error:n,stack:n instanceof Error?n.stack:void 0,userId:i.id});const r={id:i.id,email:i.email,username:i.user_metadata?.username||i.email.split("@")[0],level:1,totalXp:0,coins:100,gems:10,createdAt:i.created_at,lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};return ce.log("[AUTH_STORE]","END - convertSupabaseUser (fallback)",r),r}},rn=Pi()((i,n)=>({user:null,session:null,isAuthenticated:!1,isLoading:!1,error:null,signUp:async(r,s,l)=>{ce.log("[AUTH_STORE]","START - signUp",{email:r,username:l,passwordLength:s.length}),i({isLoading:!0,error:null});try{if(!r||!s||!l)throw new Error("Email, username and password are required");if(s.length<6)throw new Error("Password must be at least 6 characters long");ce.log("[AUTH_STORE]","Calling Supabase signUp",{email:r,username:l,hasMetadata:!0});const{data:c,error:u}=await Xt.auth.signUp({email:r,password:s,options:{data:{username:l}}});if(ce.logApiResponse("[AUTH_STORE]","SignUp response",{data:c,error:u}),u)throw u;if(c.user&&c.session){ce.log("[AUTH_STORE]","SignUp successful with session",{userId:c.user.id,hasSession:!0});const h=await rl(c.user);ce.log("[AUTH_STORE]","Setting authenticated state after signup"),i({user:h,session:c.session,isAuthenticated:!0,isLoading:!1,error:null})}else ce.info("[AUTH_STORE]","Email confirmation required",{hasUser:!!c.user,hasSession:!!c.session}),i({isLoading:!1,error:"Please check your email and click the confirmation link to complete registration."})}catch(c){ce.error("[AUTH_STORE]","SignUp error",{error:c,stack:c instanceof Error?c.stack:void 0}),i({error:c instanceof Error?c.message:"Registration failed",isLoading:!1})}ce.log("[AUTH_STORE]","END - signUp")},signIn:async(r,s)=>{ce.log("[AUTH_STORE]","START - signIn",{email:r,passwordLength:s.length,isDemoLogin:r==="demo"||r===""}),i({isLoading:!0,error:null});const l=setTimeout(()=>{ce.warn("[AUTH_STORE]","SignIn timeout reached"),i({isLoading:!1,error:"Login timed out. Please try again."})},1e4);try{if(r==="demo"||r===""){ce.info("[AUTH_STORE]","Demo login detected");const h={id:"demo-user",email:"demo@studymaster.app",username:"DemoUser",level:5,totalXp:2500,coins:150,gems:25,createdAt:new Date().toISOString(),lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};clearTimeout(l),ce.log("[AUTH_STORE]","Setting demo user state"),i({user:h,session:null,isAuthenticated:!0,isLoading:!1,error:null}),ce.log("[AUTH_STORE]","END - signIn (demo user)");return}ce.log("[AUTH_STORE]","Attempting Supabase signInWithPassword");const{data:c,error:u}=await Xt.auth.signInWithPassword({email:r,password:s});if(ce.logApiResponse("[AUTH_STORE]","SignIn response",{data:c,error:u}),u)throw u;if(c.user&&c.session){ce.log("[AUTH_STORE]","SignIn successful, converting user profile");const h=await rl(c.user);try{ce.log("[AUTH_STORE]","Updating last active time");const m=await Xt.from("profiles").update({last_active:new Date().toISOString()}).eq("id",c.user.id);ce.logApiResponse("[AUTH_STORE]","Last active update response",m)}catch(m){ce.warn("[AUTH_STORE]","Could not update last active time",{error:m})}clearTimeout(l),ce.log("[AUTH_STORE]","Setting authenticated state after signin"),ce.logSession("[AUTH_STORE]","New session",c.session),i({user:h,session:c.session,isAuthenticated:!0,isLoading:!1,error:null}),ce.log("[AUTH_STORE]","END - signIn (success)")}else ce.warn("[AUTH_STORE]","No user or session in response",{hasUser:!!c.user,hasSession:!!c.session}),clearTimeout(l),i({error:"Invalid login response - no user or session",isLoading:!1})}catch(c){ce.error("[AUTH_STORE]","SignIn error",{error:c,stack:c instanceof Error?c.stack:void 0}),clearTimeout(l);let u="Login failed";c instanceof Error&&(c.message.includes("Invalid login credentials")?u="Invalid email or password. Please check your credentials and try again.":c.message.includes("Email not confirmed")?u="Please check your email and confirm your account before signing in.":c.message.includes("Too many requests")?u="Too many login attempts. Please wait a moment and try again.":u=c.message),i({error:u,isLoading:!1})}ce.log("[AUTH_STORE]","END - signIn")},signOut:async()=>{ce.log("[AUTH_STORE]","START - signOut");try{ce.log("[AUTH_STORE]","Calling Supabase signOut");const{error:r}=await Xt.auth.signOut();if(ce.logApiResponse("[AUTH_STORE]","SignOut response",{error:r}),r)throw r;ce.log("[AUTH_STORE]","Clearing auth state"),i({user:null,session:null,isAuthenticated:!1,error:null}),ce.log("[AUTH_STORE]","END - signOut (success)")}catch(r){ce.error("[AUTH_STORE]","SignOut error",{error:r,stack:r instanceof Error?r.stack:void 0}),i({error:r instanceof Error?r.message:"Logout failed"})}},resetPassword:async r=>{ce.log("[AUTH_STORE]","START - resetPassword",{email:r}),i({isLoading:!0,error:null});try{const s=`${window.location.origin}/reset-password`;ce.log("[AUTH_STORE]","Calling resetPasswordForEmail",{email:r,redirectTo:s});const{error:l}=await Xt.auth.resetPasswordForEmail(r,{redirectTo:s});if(ce.logApiResponse("[AUTH_STORE]","Reset password response",{error:l}),l)throw l;i({isLoading:!1,error:null}),ce.log("[AUTH_STORE]","END - resetPassword (success)")}catch(s){ce.error("[AUTH_STORE]","Reset password error",{error:s,stack:s instanceof Error?s.stack:void 0});let l="Password reset failed";s instanceof Error&&(s.message.includes("Invalid email")?l="Please enter a valid email address.":s.message.includes("not found")?l="No account found with this email address.":l=s.message),i({error:l,isLoading:!1})}},updatePassword:async r=>{ce.log("[AUTH_STORE]","START - updatePassword",{passwordLength:r.length,timestamp:new Date().toISOString()});const s=n();ce.logSession("[AUTH_STORE]","Current session before update",s.session),ce.log("[AUTH_STORE]","Current auth state",{hasUser:!!s.user,hasSession:!!s.session,isAuthenticated:s.isAuthenticated}),i({isLoading:!0,error:null});try{if(!r||r.length<6){const u=new Error("Password must be at least 6 characters long.");throw ce.warn("[AUTH_STORE]","Password validation failed",{passwordLength:r?.length||0}),u}ce.log("[AUTH_STORE]","Calling supabase.auth.updateUser",{hasPassword:!!r});const{error:l,data:c}=await Xt.auth.updateUser({password:r});if(ce.logApiResponse("[AUTH_STORE]","UpdatePassword response",{data:c,error:l}),l)throw ce.error("[AUTH_STORE]","Supabase updateUser error",{error:l,errorMessage:l.message,errorCode:l.code,errorStatus:l.status}),l;ce.log("[AUTH_STORE]","Password update successful",{hasUser:!!c?.user,userId:c?.user?.id}),i({isLoading:!1,error:null}),ce.log("[AUTH_STORE]","END - updatePassword (success)")}catch(l){const c=l instanceof Error?l.message:"An unknown error occurred during password update.";throw ce.error("[AUTH_STORE]","UpdatePassword failed",{error:c,errorType:l?.constructor?.name,errorDetails:l,stack:l instanceof Error?l.stack:void 0}),i({isLoading:!1,error:c}),new Error(c)}},updateProfile:async r=>{const{user:s}=n();if(ce.log("[AUTH_STORE]","START - updateProfile",{userId:s?.id,updates:Object.keys(r)}),!s){ce.warn("[AUTH_STORE]","No user found for profile update");return}try{const l={username:r.username,level:r.level,total_xp:r.totalXp,coins:r.coins,gems:r.gems,preferences:r.preferences,last_active:new Date().toISOString()};ce.log("[AUTH_STORE]","Updating profile in database",l);const{error:c}=await Xt.from("profiles").update(l).eq("id",s.id);if(ce.logApiResponse("[AUTH_STORE]","Profile update response",{error:c}),c)throw c;ce.log("[AUTH_STORE]","Updating local user state"),i({user:{...s,...r}}),ce.log("[AUTH_STORE]","END - updateProfile (success)")}catch(l){ce.error("[AUTH_STORE]","Profile update error",{error:l,stack:l instanceof Error?l.stack:void 0}),i({error:l instanceof Error?l.message:"Profile update failed"})}},clearError:()=>{ce.log("[AUTH_STORE]","Clearing error state"),i({error:null})},initializeAuth:async()=>{ce.log("[AUTH_STORE]","START - initializeAuth");try{ce.log("[AUTH_STORE]","Getting current session from Supabase");const{data:{session:r},error:s}=await Xt.auth.getSession();if(ce.logApiResponse("[AUTH_STORE]","Get session response",{session:r,error:s}),r?.user){ce.log("[AUTH_STORE]","Session found, converting user",{userId:r.user.id,email:r.user.email});const l=await rl(r.user);ce.log("[AUTH_STORE]","Setting authenticated state from initialization"),i({user:l,session:r,isAuthenticated:!0})}else ce.info("[AUTH_STORE]","No session found during initialization");ce.log("[AUTH_STORE]","END - initializeAuth")}catch(r){ce.error("[AUTH_STORE]","Auth initialization error",{error:r,stack:r instanceof Error?r.stack:void 0}),i({user:null,session:null,isAuthenticated:!1})}}}));Xt.auth.onAuthStateChange(async(i,n)=>{if(ce.info("[AUTH_STORE]","Auth state change detected",{event:i,hasSession:!!n,hasUser:!!n?.user,userId:n?.user?.id,timestamp:new Date().toISOString()}),n&&ce.logSession("[AUTH_STORE]",`Auth event: ${i}`,n),i==="SIGNED_IN"&&n?.user){ce.log("[AUTH_STORE]","Processing SIGNED_IN event");const r=await rl(n.user);ce.log("[AUTH_STORE]","Updating auth store for SIGNED_IN"),rn.setState({user:r,session:n,isAuthenticated:!0})}else if(i==="SIGNED_OUT")ce.log("[AUTH_STORE]","Processing SIGNED_OUT event"),rn.setState({user:null,session:null,isAuthenticated:!1});else if(i==="PASSWORD_RECOVERY"&&n?.user){ce.info("[AUTH_STORE]","Processing PASSWORD_RECOVERY event",{userId:n.user.id,email:n.user.email,hasAccessToken:!!n.access_token,accessTokenLength:n.access_token?.length,hasRefreshToken:!!n.refresh_token}),ce.log("[AUTH_STORE]","Creating minimal user for PASSWORD_RECOVERY");const r={id:n.user.id,email:n.user.email,username:n.user.user_metadata?.username||n.user.email.split("@")[0],level:1,totalXp:0,coins:100,gems:10,createdAt:n.user.created_at,lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};ce.log("[AUTH_STORE]","Setting auth state for PASSWORD_RECOVERY"),rn.setState({user:r,session:n,isAuthenticated:!0}),ce.log("[AUTH_STORE]","Auth store updated with password recovery session")}else i==="TOKEN_REFRESHED"&&n?(ce.log("[AUTH_STORE]","Processing TOKEN_REFRESHED event"),rn.getState().user&&(ce.log("[AUTH_STORE]","Updating session after token refresh"),rn.setState({session:n,isAuthenticated:!0}))):ce.info("[AUTH_STORE]","Unhandled auth event",{event:i})});const Px=({onMenuClick:i})=>{const{theme:n,toggleTheme:r}=Zm(),{user:s,signOut:l}=rn();return a.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:i,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("div",{className:"flex-shrink-0 flex items-center ml-4 lg:ml-0",children:a.jsx("h1",{className:"text-xl font-bold text-gradient",children:"StudyMaster"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:r,className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:n==="dark"?a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:s?.username}),a.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["Level ",s?.level]})]}),a.jsx("button",{onClick:l,className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",title:"Logout",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]})]})})})},yu=[{id:"1",name:"First Steps",description:"Complete your first study session",icon:"🎯",category:"study_milestones",requirements:[{type:"sessions_completed",value:1,operator:"gte"}],xpReward:50,coinReward:10,isSecret:!1,rarity:"common"},{id:"2",name:"Streak Master",description:"Maintain a 7-day study streak",icon:"🔥",category:"streaks",requirements:[{type:"current_streak",value:7,operator:"gte"}],xpReward:200,coinReward:50,isSecret:!1,rarity:"rare"},{id:"3",name:"Perfect Score",description:"Get 100% accuracy in a 20+ card session",icon:"💯",category:"accuracy",requirements:[{type:"session_accuracy",value:100,operator:"eq"},{type:"session_cards",value:20,operator:"gte"}],xpReward:150,coinReward:30,isSecret:!1,rarity:"rare"},{id:"4",name:"Speed Demon",description:"Complete 50 cards in under 10 minutes",icon:"⚡",category:"special",requirements:[{type:"cards_in_session",value:50,operator:"gte"},{type:"session_time",value:600,operator:"lte"}],xpReward:300,coinReward:75,isSecret:!1,rarity:"epic"},{id:"5",name:"Scholar",description:"Study 1000 cards total",icon:"📚",category:"study_milestones",requirements:[{type:"total_cards",value:1e3,operator:"gte"}],xpReward:500,coinReward:100,isSecret:!1,rarity:"epic"},{id:"6",name:"Legend",description:"Reach level 20",icon:"👑",category:"special",requirements:[{type:"user_level",value:20,operator:"gte"}],xpReward:1e3,coinReward:500,isSecret:!1,rarity:"legendary"}],vu=[{id:"1",title:"Daily Grind",description:"Study 25 cards today",type:"daily",requirements:[{type:"cards_studied_today",target:25,description:"Study 25 cards"}],rewards:[{type:"xp",amount:50},{type:"coins",amount:10}],startDate:new Date().toISOString(),endDate:new Date(Date.now()+1440*60*1e3).toISOString(),isActive:!0,participantCount:1247},{id:"2",title:"Weekly Warrior",description:"Complete 200 cards this week",type:"weekly",requirements:[{type:"cards_studied_week",target:200,description:"Study 200 cards this week"}],rewards:[{type:"xp",amount:200},{type:"coins",amount:50},{type:"gems",amount:5}],startDate:new Date(Date.now()-4320*60*1e3).toISOString(),endDate:new Date(Date.now()+5760*60*1e3).toISOString(),isActive:!0,participantCount:892},{id:"3",title:"Accuracy Master",description:"Maintain 90%+ accuracy for 5 sessions",type:"weekly",requirements:[{type:"accuracy_sessions",target:5,description:"Complete 5 sessions with 90%+ accuracy"}],rewards:[{type:"xp",amount:300},{type:"coins",amount:75},{type:"badge",itemId:"accuracy_master"}],startDate:new Date(Date.now()-2880*60*1e3).toISOString(),endDate:new Date(Date.now()+7200*60*1e3).toISOString(),isActive:!0,participantCount:456}],xu={xp_weekly:{id:"xp_weekly",type:"xp",period:"weekly",entries:[{userId:"1",username:"DemoUser",score:2500,rank:1,change:0},{userId:"2",username:"StudyMaster",score:2350,rank:2,change:1},{userId:"3",username:"FlashcardPro",score:2200,rank:3,change:-1},{userId:"4",username:"LearnFast",score:2100,rank:4,change:2},{userId:"5",username:"MemoryKing",score:2050,rank:5,change:-1},{userId:"6",username:"QuizWhiz",score:1980,rank:6,change:0},{userId:"7",username:"CardShark",score:1920,rank:7,change:3},{userId:"8",username:"BrainBoost",score:1850,rank:8,change:-2},{userId:"9",username:"StudyBuddy",score:1800,rank:9,change:1},{userId:"10",username:"FlashGenius",score:1750,rank:10,change:-1}],updatedAt:new Date().toISOString()},streak_all_time:{id:"streak_all_time",type:"streak",period:"all_time",entries:[{userId:"2",username:"StudyMaster",score:45,rank:1,change:0},{userId:"3",username:"FlashcardPro",score:38,rank:2,change:0},{userId:"4",username:"LearnFast",score:32,rank:3,change:1},{userId:"1",username:"DemoUser",score:28,rank:4,change:-1},{userId:"5",username:"MemoryKing",score:25,rank:5,change:0},{userId:"6",username:"QuizWhiz",score:22,rank:6,change:2},{userId:"7",username:"CardShark",score:20,rank:7,change:-1},{userId:"8",username:"BrainBoost",score:18,rank:8,change:-1},{userId:"9",username:"StudyBuddy",score:15,rank:9,change:0},{userId:"10",username:"FlashGenius",score:12,rank:10,change:0}],updatedAt:new Date().toISOString()}},am=i=>Math.floor(Math.sqrt(i/100))+1,im=i=>Math.pow(i,2)*100,el=()=>({totalCards:0,cardsStudiedToday:0,cardsStudiedThisWeek:0,cardsStudiedThisMonth:0,averageAccuracy:0,totalStudyTime:0,studyTimeToday:0,studyTimeThisWeek:0,decksCreated:0,decksCompleted:0,longestStreak:0,currentStreak:0,gold:0,diamonds:0,level:1,xp:0,xpToNextLevel:100}),om=()=>({totalCards:1250,cardsStudiedToday:45,cardsStudiedThisWeek:180,cardsStudiedThisMonth:720,averageAccuracy:87.5,totalStudyTime:2400,studyTimeToday:35,studyTimeThisWeek:240,decksCreated:8,decksCompleted:3,longestStreak:28,currentStreak:12,gold:100,diamonds:10,level:8,xp:6400,xpToNextLevel:8100}),Ii=Pi()(yl((i,n)=>({userStats:el(),isFirstTimeUser:!0,isInitialized:!1,achievements:yu,userAchievements:[],userStreak:null,activeChallenges:vu,userChallengeParticipations:[],leaderboards:xu,updateUserStats:r=>{i(s=>{const l={...s.userStats,...r};return r.xp!==void 0&&(l.level=am(l.xp),l.xpToNextLevel=im(l.level)),{userStats:l,isFirstTimeUser:!1,isInitialized:!0}})},addUserAchievement:r=>{const{userAchievements:s}=n();s.find(l=>l.achievementId===r)||i(l=>({userAchievements:[...l.userAchievements,{id:Date.now().toString(),userId:"1",achievementId:r,earnedAt:new Date().toISOString()}]}))},updateStreak:r=>{i(s=>({userStreak:s.userStreak?{...s.userStreak,...r}:null}))},joinChallenge:r=>{const{userChallengeParticipations:s}=n();s.find(l=>l.challengeId===r)||i(l=>({userChallengeParticipations:[...l.userChallengeParticipations,{id:Date.now().toString(),userId:"1",challengeId:r,progress:{},completed:!1,joinedAt:new Date().toISOString(),milestoneProgress:{},weeklyProgress:[],currentStreak:0,bestWeek:0}]}))},updateChallengeProgress:(r,s)=>{i(l=>({userChallengeParticipations:l.userChallengeParticipations.map(c=>c.challengeId===r?{...c,progress:{...c.progress,...s}}:c)}))},claimChallengeReward:r=>{const{activeChallenges:s,userChallengeParticipations:l}=n(),c=s.find(h=>h.id===r),u=l.find(h=>h.challengeId===r);if(c&&u&&u.completed){let h=0,m=0;c.rewards.forEach(g=>{g.type==="xp"&&g.amount?h+=g.amount:g.type==="coins"&&g.amount&&(m+=g.amount)}),i(g=>({userStats:{...g.userStats,totalCards:g.userStats.totalCards+h/10},userChallengeParticipations:g.userChallengeParticipations.filter(y=>y.challengeId!==r)}))}},initializeMockData:()=>{i({userStats:om(),achievements:yu,activeChallenges:vu,leaderboards:xu,userAchievements:[{id:"1",userId:"1",achievementId:"1",earnedAt:new Date(Date.now()-14400*60*1e3).toISOString()},{id:"2",userId:"1",achievementId:"2",earnedAt:new Date(Date.now()-7200*60*1e3).toISOString()}],userStreak:{id:"1",userId:"1",currentStreak:12,longestStreak:28,lastStudyDate:new Date().toISOString(),freezeCount:2,createdAt:new Date(Date.now()-720*60*60*1e3).toISOString()},userChallengeParticipations:[{id:"1",userId:"1",challengeId:"1",progress:{cards_studied_today:45},completed:!0,joinedAt:new Date().toISOString(),completedAt:new Date().toISOString(),milestoneProgress:{milestone_1:!0},weeklyProgress:[],currentStreak:5,bestWeek:1},{id:"2",userId:"1",challengeId:"2",progress:{cards_studied_week:180},completed:!1,joinedAt:new Date(Date.now()-4320*60*1e3).toISOString(),milestoneProgress:{milestone_1:!0,milestone_2:!1},weeklyProgress:[{week:1,startDate:new Date(Date.now()-10080*60*1e3).toISOString(),endDate:new Date().toISOString(),progress:{cards_studied_week:180},completed:!0,completedAt:new Date().toISOString(),storyUnlocked:!0}],currentStreak:3,bestWeek:1}],isFirstTimeUser:!1,isInitialized:!0})},initializeNewUser:()=>{i({userStats:el(),userAchievements:[],userStreak:null,userChallengeParticipations:[],isFirstTimeUser:!1,isInitialized:!0})},resetAllUserData:()=>{i({userStats:el(),userAchievements:[],userStreak:null,userChallengeParticipations:[],isFirstTimeUser:!0,isInitialized:!0})},addCurrency:(r,s)=>{i(l=>({userStats:{...l.userStats,gold:l.userStats.gold+r,diamonds:l.userStats.diamonds+s}}))},spendCurrency:(r,s)=>{const{userStats:l}=n();return l.gold>=r&&l.diamonds>=s?(i(c=>({userStats:{...c.userStats,gold:c.userStats.gold-r,diamonds:c.userStats.diamonds-s}})),!0):!1},initializeUserData:(r=!1)=>{n().isInitialized||i(r?{userStats:om(),achievements:yu,activeChallenges:vu,leaderboards:xu,userAchievements:[{id:"1",userId:"1",achievementId:"1",earnedAt:new Date(Date.now()-14400*60*1e3).toISOString()},{id:"2",userId:"1",achievementId:"2",earnedAt:new Date(Date.now()-7200*60*1e3).toISOString()}],userStreak:{id:"1",userId:"1",currentStreak:12,longestStreak:28,lastStudyDate:new Date().toISOString(),freezeCount:2,createdAt:new Date(Date.now()-720*60*60*1e3).toISOString()},userChallengeParticipations:[{id:"1",userId:"1",challengeId:"1",progress:{cards_studied_today:45},completed:!0,joinedAt:new Date().toISOString(),completedAt:new Date().toISOString()},{id:"2",userId:"1",challengeId:"2",progress:{cards_studied_week:180},completed:!1,joinedAt:new Date(Date.now()-4320*60*1e3).toISOString()}],isFirstTimeUser:!1,isInitialized:!0}:{userStats:el(),userAchievements:[],userStreak:null,userChallengeParticipations:[],isFirstTimeUser:!1,isInitialized:!0})},updateMilestoneProgress:(r,s,l)=>{i(c=>({userChallengeParticipations:c.userChallengeParticipations.map(u=>u.challengeId===r?{...u,milestoneProgress:{...u.milestoneProgress,[s]:l}}:u)}))},updateWeeklyProgress:(r,s)=>{i(l=>({userChallengeParticipations:l.userChallengeParticipations.map(c=>c.challengeId===r?{...c,weeklyProgress:c.weeklyProgress?[...c.weeklyProgress.filter(u=>u.week!==s.week),s]:[s]}:c)}))},updateChallengeStreak:(r,s)=>{i(l=>({userChallengeParticipations:l.userChallengeParticipations.map(c=>c.challengeId===r?{...c,currentStreak:s}:c)}))},unlockStoryChapter:(r,s)=>{i(l=>({userChallengeParticipations:l.userChallengeParticipations.map(c=>c.challengeId===r?{...c,weeklyProgress:c.weeklyProgress?.map(u=>u.week===s?{...u,storyUnlocked:!0}:u)||[]}:c)}))},claimMilestoneReward:(r,s)=>{const{activeChallenges:l}=n();l.find(u=>u.id===r)&&i(u=>({userChallengeParticipations:u.userChallengeParticipations.map(h=>h.challengeId===r?{...h,milestoneProgress:{...h.milestoneProgress,[`${s}_claimed`]:!0}}:h)}))},contributeToCommunityGoal:(r,s)=>{console.log(`Contributing ${s} to community goal ${r}`),i(l=>({userStats:{...l.userStats}}))},awardStudyXP:(r,s)=>{let l=r;l+=s;const c=Math.floor(s/10)*10;l+=c,l>0&&i(u=>{const h=u.userStats.xp+l,m=am(h),g=im(m);return console.log(`🎉 XP Awarded: +${l} XP (${r} cards, ${s} correct, ${c} milestone bonus)`),console.log(`📊 Total XP: ${u.userStats.xp} → ${h} (Level ${u.userStats.level} → ${m})`),{userStats:{...u.userStats,xp:h,level:m,xpToNextLevel:g,totalCards:u.userStats.totalCards+r,cardsStudiedToday:u.userStats.cardsStudiedToday+r}}})}}),{name:"gamification-storage",partialize:i=>({userStats:i.userStats,userAchievements:i.userAchievements,userStreak:i.userStreak,userChallengeParticipations:i.userChallengeParticipations,isFirstTimeUser:i.isFirstTimeUser,isInitialized:i.isInitialized})})),Rx=({isOpen:i,onClose:n})=>{const{userStats:r}=Ii(),s=[{name:"Home",href:"/",icon:"🏠"},{name:"Study",href:"/study",icon:"📚"},{name:"Decks",href:"/decks",icon:"📋"},{name:"Global Stats",href:"/global-stats",icon:"🌍"},{name:"Profile",href:"/profile",icon:"👤"},{name:"Leaderboard",href:"/leaderboard",icon:"🏆"},{name:"Challenges",href:"/challenges",icon:"🎯"}],l=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),c=r.level*1e3,u=(r.level+1)*1e3,h=(r.xp-c)/(u-c)*100;return a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform ${i?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out lg:translate-x-0`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h1",{className:"text-xl font-bold text-gradient",children:"StudyMaster"}),a.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("nav",{className:"flex-1 mt-8 overflow-y-auto",children:a.jsx("div",{className:"px-4 space-y-2",children:s.map(m=>a.jsxs(oy,{to:m.href,onClick:n,className:({isActive:g})=>`flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${g?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[a.jsx("span",{className:"mr-3 text-lg",children:m.icon}),m.name]},m.name))})}),a.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"XP"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l(r.xp)})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Streak"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[r.currentStreak," ",r.currentStreak===1?"day":"days"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,h))}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Level ",r.level," → Level ",r.level+1]}),a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:[l(r.xp-c)," / ",l(u-c)," XP"]})]})})]})]})},Oi=Pi()(yl((i,n)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(r,s)=>{i({isLoading:!0,error:null});try{if(r==="demo"||r===""){const m={id:"1",email:"demo@studymaster.app",username:"DemoUser",level:5,totalXp:2500,coins:150,gems:25,createdAt:new Date().toISOString(),lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};localStorage.setItem("authToken","demo-token"),i({user:m,isAuthenticated:!0,isLoading:!1,error:null});return}try{const m=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})});if(m.ok){const g=await m.json();if(g.success&&g.user&&g.token){localStorage.setItem("authToken",g.token),i({user:g.user,isAuthenticated:!0,isLoading:!1,error:null});return}}}catch{}const l=JSON.parse(localStorage.getItem("registeredUsers")||"{}"),c=l[r.toLowerCase()];if(!c||c.password!==s)throw new Error("Invalid email or password");c.lastActive=new Date().toISOString(),l[r.toLowerCase()]=c,localStorage.setItem("registeredUsers",JSON.stringify(l));const u="local-token-"+c.id;localStorage.setItem("authToken",u);const{...h}=c;i({user:h,isAuthenticated:!0,isLoading:!1,error:null})}catch(l){i({error:l instanceof Error?l.message:"Login failed",isLoading:!1})}},register:async(r,s,l)=>{i({isLoading:!0,error:null});try{if(!r||!l||!s)throw new Error("Email, username and password are required");if(l.length<4)throw new Error("Password must be at least 4 characters long");const c=JSON.parse(localStorage.getItem("registeredUsers")||"{}");if(c[r.toLowerCase()])throw new Error("User with this email already exists");const u={id:Date.now().toString(),email:r.toLowerCase(),username:s,level:1,totalXp:0,coins:100,gems:10,createdAt:new Date().toISOString(),lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}};c[r.toLowerCase()]={...u,password:l},localStorage.setItem("registeredUsers",JSON.stringify(c));const h="local-token-"+u.id;localStorage.setItem("authToken",h),i({user:u,isAuthenticated:!0,isLoading:!1,error:null})}catch(c){i({error:c instanceof Error?c.message:"Registration failed",isLoading:!1})}},logout:()=>{localStorage.removeItem("authToken"),i({user:null,isAuthenticated:!1,error:null})},updateUser:r=>{const{user:s}=n();s&&i({user:{...s,...r}})},clearError:()=>{i({error:null})},initializeAuth:()=>{const r=localStorage.getItem("authToken"),{user:s,isAuthenticated:l}=n();s&&l||r&&(r==="demo-token"?i({isAuthenticated:!0,user:{id:"1",email:"demo@studymaster.app",username:"DemoUser",level:5,totalXp:2500,coins:150,gems:25,createdAt:new Date().toISOString(),lastActive:new Date().toISOString(),preferences:{theme:"system",language:"en",notifications:!0,soundEffects:!0,dailyGoal:50,timezone:"UTC"}}}):r.startsWith("local-token-")||r.startsWith("mock-token-")?s||(localStorage.removeItem("authToken"),i({isAuthenticated:!1,user:null})):(localStorage.removeItem("authToken"),i({isAuthenticated:!1,user:null})))}}),{name:"auth-storage",partialize:i=>({user:i.user,isAuthenticated:i.isAuthenticated}),onRehydrateStorage:()=>i=>{i&&localStorage.getItem("authToken")&&!i.user&&i.initializeAuth()}})),Ix=({isOpen:i,onClose:n,mode:r,onModeChange:s})=>{const[l,c]=G.useState(""),[u,h]=G.useState(""),[m,g]=G.useState(""),{signIn:y,signUp:x,resetPassword:k,isLoading:w,error:C,clearError:S,isAuthenticated:j}=rn(),[_,E]=G.useState(!1);G.useEffect(()=>{i&&S()},[i,S]),G.useEffect(()=>{S()},[r,S]);const P=z=>{S(),E(!1),s(z)},D=async z=>{z.preventDefault(),r==="login"?await y(l,m):r==="register"?await x(l,m,u):r==="forgot-password"&&(await k(l),E(!0))};G.useEffect(()=>{j&&i&&(n(),c(""),h(""),g(""))},[j,i,n]);const M=async()=>{try{await y("demo",""),n()}catch{}};return i?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),a.jsx("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:r==="login"?"Sign In":r==="register"?"Create Account":"Reset Password"}),C&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:C}),_&&r==="forgot-password"&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:"Password reset email sent! Check your inbox and follow the instructions to reset your password."}),a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsx("div",{children:a.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:z=>c(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})}),r==="register"&&a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"Username",value:u,onChange:z=>h(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})}),r!=="forgot-password"&&a.jsx("div",{children:a.jsx("input",{type:"password",placeholder:"Password",value:m,onChange:z=>g(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})}),a.jsx("button",{type:"submit",disabled:w,className:"w-full btn btn-primary",children:w?"Loading...":r==="login"?"Sign In":r==="register"?"Create Account":"Send Reset Email"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:M,className:"w-full btn btn-secondary",disabled:w,children:"Demo Login"})}),a.jsx("div",{className:"mt-4 text-sm space-y-2",children:r==="login"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>P("register"),className:"text-blue-600 hover:text-blue-500",children:"Create one"})]}),a.jsxs("div",{children:["Forgot your password?"," ",a.jsx("button",{onClick:()=>P("forgot-password"),className:"text-blue-600 hover:text-blue-500",children:"Reset it"})]})]}):r==="register"?a.jsxs("div",{children:["Already have an account?"," ",a.jsx("button",{onClick:()=>P("login"),className:"text-blue-600 hover:text-blue-500",children:"Sign in"})]}):a.jsxs("div",{children:["Remember your password?"," ",a.jsx("button",{onClick:()=>P("login"),className:"text-blue-600 hover:text-blue-500",children:"Back to login"})]})})]})})})]})}):null},Ox=()=>{const[i,n]=G.useState(!1),[r,s]=G.useState(!1),[l,c]=G.useState("login"),{isAuthenticated:u}=Oi(),h=()=>{c("login"),s(!0)},m=()=>{c("register"),s(!0)};return u?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[i&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>n(!1)}),a.jsx(Rx,{isOpen:i,onClose:()=>n(!1)}),a.jsxs("div",{className:"lg:pl-64",children:[a.jsx(Px,{onMenuClick:()=>n(!0)}),a.jsx("main",{className:"py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx(K0,{})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"max-w-md w-full space-y-8 p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gradient mb-4",children:"StudyMaster"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Master your learning with spaced repetition and gamification"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:h,className:"btn btn-primary btn-lg w-full",children:"Sign In"}),a.jsx("button",{onClick:m,className:"btn btn-secondary btn-lg w-full",children:"Create Account"})]})]})})}),a.jsx(Ix,{isOpen:r,onClose:()=>s(!1),mode:l,onModeChange:c})]})};function bi(i,n,r={type:"basic"},s=[]){return{frontContent:i,backContent:n,cardType:r,mediaRefs:s,state:"new",queue:0,due:0,ivl:0,factor:2500,reps:0,lapses:0,left:0,learningStep:0,graduationInterval:1,easyInterval:4,totalStudyTime:0,averageAnswerTime:0,flags:0,originalDue:0,originalDeck:"",xpAwarded:0,difficultyRating:3}}function tl(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wu={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var lm;function Dx(){return lm||(lm=1,function(i,n){(function(r){i.exports=r()})(function(){return function r(s,l,c){function u(g,y){if(!l[g]){if(!s[g]){var x=typeof tl=="function"&&tl;if(!y&&x)return x(g,!0);if(h)return h(g,!0);var k=new Error("Cannot find module '"+g+"'");throw k.code="MODULE_NOT_FOUND",k}var w=l[g]={exports:{}};s[g][0].call(w.exports,function(C){var S=s[g][1][C];return u(S||C)},w,w.exports,r,s,l,c)}return l[g].exports}for(var h=typeof tl=="function"&&tl,m=0;m<c.length;m++)u(c[m]);return u}({1:[function(r,s,l){var c=r("./utils"),u=r("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(m){for(var g,y,x,k,w,C,S,j=[],_=0,E=m.length,P=E,D=c.getTypeOf(m)!=="string";_<m.length;)P=E-_,x=D?(g=m[_++],y=_<E?m[_++]:0,_<E?m[_++]:0):(g=m.charCodeAt(_++),y=_<E?m.charCodeAt(_++):0,_<E?m.charCodeAt(_++):0),k=g>>2,w=(3&g)<<4|y>>4,C=1<P?(15&y)<<2|x>>6:64,S=2<P?63&x:64,j.push(h.charAt(k)+h.charAt(w)+h.charAt(C)+h.charAt(S));return j.join("")},l.decode=function(m){var g,y,x,k,w,C,S=0,j=0,_="data:";if(m.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var E,P=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===h.charAt(64)&&P--,m.charAt(m.length-2)===h.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=u.uint8array?new Uint8Array(0|P):new Array(0|P);S<m.length;)g=h.indexOf(m.charAt(S++))<<2|(k=h.indexOf(m.charAt(S++)))>>4,y=(15&k)<<4|(w=h.indexOf(m.charAt(S++)))>>2,x=(3&w)<<6|(C=h.indexOf(m.charAt(S++))),E[j++]=g,w!==64&&(E[j++]=y),C!==64&&(E[j++]=x);return E}},{"./support":30,"./utils":32}],2:[function(r,s,l){var c=r("./external"),u=r("./stream/DataWorker"),h=r("./stream/Crc32Probe"),m=r("./stream/DataLengthProbe");function g(y,x,k,w,C){this.compressedSize=y,this.uncompressedSize=x,this.crc32=k,this.compression=w,this.compressedContent=C}g.prototype={getContentWorker:function(){var y=new u(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),x=this;return y.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new u(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(y,x,k){return y.pipe(new h).pipe(new m("uncompressedSize")).pipe(x.compressWorker(k)).pipe(new m("compressedSize")).withStreamInfo("compression",x)},s.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,s,l){var c=r("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},l.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,s,l){var c=r("./utils"),u=function(){for(var h,m=[],g=0;g<256;g++){h=g;for(var y=0;y<8;y++)h=1&h?3988292384^h>>>1:h>>>1;m[g]=h}return m}();s.exports=function(h,m){return h!==void 0&&h.length?c.getTypeOf(h)!=="string"?function(g,y,x,k){var w=u,C=k+x;g^=-1;for(var S=k;S<C;S++)g=g>>>8^w[255&(g^y[S])];return-1^g}(0|m,h,h.length,0):function(g,y,x,k){var w=u,C=k+x;g^=-1;for(var S=k;S<C;S++)g=g>>>8^w[255&(g^y.charCodeAt(S))];return-1^g}(0|m,h,h.length,0):0}},{"./utils":32}],5:[function(r,s,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(r,s,l){var c=null;c=typeof Promise<"u"?Promise:r("lie"),s.exports={Promise:c}},{lie:37}],7:[function(r,s,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=r("pako"),h=r("./utils"),m=r("./stream/GenericWorker"),g=c?"uint8array":"array";function y(x,k){m.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=k,this.meta={}}l.magic="\b\0",h.inherits(y,m),y.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(g,x.data),!1)},y.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(k){x.push({data:k,meta:x.meta})}},l.compressWorker=function(x){return new y("Deflate",x)},l.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,s,l){function c(w,C){var S,j="";for(S=0;S<C;S++)j+=String.fromCharCode(255&w),w>>>=8;return j}function u(w,C,S,j,_,E){var P,D,M=w.file,z=w.compression,q=E!==g.utf8encode,ne=h.transformTo("string",E(M.name)),ee=h.transformTo("string",g.utf8encode(M.name)),fe=M.comment,pe=h.transformTo("string",E(fe)),B=h.transformTo("string",g.utf8encode(fe)),Z=ee.length!==M.name.length,T=B.length!==fe.length,ue="",Te="",me="",ye=M.dir,J=M.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};C&&!S||(Q.crc32=w.crc32,Q.compressedSize=w.compressedSize,Q.uncompressedSize=w.uncompressedSize);var I=0;C&&(I|=8),q||!Z&&!T||(I|=2048);var U=0,le=0;ye&&(U|=16),_==="UNIX"?(le=798,U|=function(ie,Ee){var Ie=ie;return ie||(Ie=Ee?16893:33204),(65535&Ie)<<16}(M.unixPermissions,ye)):(le=20,U|=function(ie){return 63&(ie||0)}(M.dosPermissions)),P=J.getUTCHours(),P<<=6,P|=J.getUTCMinutes(),P<<=5,P|=J.getUTCSeconds()/2,D=J.getUTCFullYear()-1980,D<<=4,D|=J.getUTCMonth()+1,D<<=5,D|=J.getUTCDate(),Z&&(Te=c(1,1)+c(y(ne),4)+ee,ue+="up"+c(Te.length,2)+Te),T&&(me=c(1,1)+c(y(pe),4)+B,ue+="uc"+c(me.length,2)+me);var de="";return de+=`
\0`,de+=c(I,2),de+=z.magic,de+=c(P,2),de+=c(D,2),de+=c(Q.crc32,4),de+=c(Q.compressedSize,4),de+=c(Q.uncompressedSize,4),de+=c(ne.length,2),de+=c(ue.length,2),{fileRecord:x.LOCAL_FILE_HEADER+de+ne+ue,dirRecord:x.CENTRAL_FILE_HEADER+c(le,2)+de+c(pe.length,2)+"\0\0\0\0"+c(U,4)+c(j,4)+ne+ue+pe}}var h=r("../utils"),m=r("../stream/GenericWorker"),g=r("../utf8"),y=r("../crc32"),x=r("../signature");function k(w,C,S,j){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=S,this.encodeFileName=j,this.streamFiles=w,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(k,m),k.prototype.push=function(w){var C=w.meta.percent||0,S=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(w):(this.bytesWritten+=w.data.length,m.prototype.push.call(this,{data:w.data,meta:{currentFile:this.currentFile,percent:S?(C+100*(S-j-1))/S:100}}))},k.prototype.openedSource=function(w){this.currentSourceOffset=this.bytesWritten,this.currentFile=w.file.name;var C=this.streamFiles&&!w.file.dir;if(C){var S=u(w,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(w){this.accumulate=!1;var C=this.streamFiles&&!w.file.dir,S=u(w,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(S.dirRecord),C)this.push({data:function(j){return x.DATA_DESCRIPTOR+c(j.crc32,4)+c(j.compressedSize,4)+c(j.uncompressedSize,4)}(w),meta:{percent:100}});else for(this.push({data:S.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var w=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var S=this.bytesWritten-w,j=function(_,E,P,D,M){var z=h.transformTo("string",M(D));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(_,2)+c(_,2)+c(E,4)+c(P,4)+c(z.length,2)+z}(this.dirRecords.length,S,w,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(w){this._sources.push(w);var C=this;return w.on("data",function(S){C.processChunk(S)}),w.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),w.on("error",function(S){C.error(S)}),this},k.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(w){var C=this._sources;if(!m.prototype.error.call(this,w))return!1;for(var S=0;S<C.length;S++)try{C[S].error(w)}catch{}return!0},k.prototype.lock=function(){m.prototype.lock.call(this);for(var w=this._sources,C=0;C<w.length;C++)w[C].lock()},s.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,s,l){var c=r("../compressions"),u=r("./ZipFileWorker");l.generateWorker=function(h,m,g){var y=new u(m.streamFiles,g,m.platform,m.encodeFileName),x=0;try{h.forEach(function(k,w){x++;var C=function(E,P){var D=E||P,M=c[D];if(!M)throw new Error(D+" is not a valid compression method !");return M}(w.options.compression,m.compression),S=w.options.compressionOptions||m.compressionOptions||{},j=w.dir,_=w.date;w._compressWorker(C,S).withStreamInfo("file",{name:k,dir:j,date:_,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(y)}),y.entriesCount=x}catch(k){y.error(k)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,s,l){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new c;for(var h in this)typeof this[h]!="function"&&(u[h]=this[h]);return u}}(c.prototype=r("./object")).loadAsync=r("./load"),c.support=r("./support"),c.defaults=r("./defaults"),c.version="3.10.1",c.loadAsync=function(u,h){return new c().loadAsync(u,h)},c.external=r("./external"),s.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,s,l){var c=r("./utils"),u=r("./external"),h=r("./utf8"),m=r("./zipEntries"),g=r("./stream/Crc32Probe"),y=r("./nodejsUtils");function x(k){return new u.Promise(function(w,C){var S=k.decompressed.getContentWorker().pipe(new g);S.on("error",function(j){C(j)}).on("end",function(){S.streamInfo.crc32!==k.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}s.exports=function(k,w){var C=this;return w=c.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),y.isNode&&y.isStream(k)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",k,!0,w.optimizedBinaryString,w.base64).then(function(S){var j=new m(w);return j.load(S),j}).then(function(S){var j=[u.Promise.resolve(S)],_=S.files;if(w.checkCRC32)for(var E=0;E<_.length;E++)j.push(x(_[E]));return u.Promise.all(j)}).then(function(S){for(var j=S.shift(),_=j.files,E=0;E<_.length;E++){var P=_[E],D=P.fileNameStr,M=c.resolve(P.fileNameStr);C.file(M,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:w.createFolders}),P.dir||(C.file(M).unsafeOriginalName=D)}return j.zipComment.length&&(C.comment=j.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,s,l){var c=r("../utils"),u=r("../stream/GenericWorker");function h(m,g){u.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(g)}c.inherits(h,u),h.prototype._bindStream=function(m){var g=this;(this._stream=m).pause(),m.on("data",function(y){g.push({data:y,meta:{percent:0}})}).on("error",function(y){g.isPaused?this.generatedError=y:g.error(y)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},h.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,s,l){var c=r("readable-stream").Readable;function u(h,m,g){c.call(this,m),this._helper=h;var y=this;h.on("data",function(x,k){y.push(x)||y._helper.pause(),g&&g(k)}).on("error",function(x){y.emit("error",x)}).on("end",function(){y.push(null)})}r("../utils").inherits(u,c),u.prototype._read=function(){this._helper.resume()},s.exports=u},{"../utils":32,"readable-stream":16}],14:[function(r,s,l){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,u);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,u)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var u=new Buffer(c);return u.fill(0),u},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(r,s,l){function c(M,z,q){var ne,ee=h.getTypeOf(z),fe=h.extend(q||{},y);fe.date=fe.date||new Date,fe.compression!==null&&(fe.compression=fe.compression.toUpperCase()),typeof fe.unixPermissions=="string"&&(fe.unixPermissions=parseInt(fe.unixPermissions,8)),fe.unixPermissions&&16384&fe.unixPermissions&&(fe.dir=!0),fe.dosPermissions&&16&fe.dosPermissions&&(fe.dir=!0),fe.dir&&(M=_(M)),fe.createFolders&&(ne=j(M))&&E.call(this,ne,!0);var pe=ee==="string"&&fe.binary===!1&&fe.base64===!1;q&&q.binary!==void 0||(fe.binary=!pe),(z instanceof x&&z.uncompressedSize===0||fe.dir||!z||z.length===0)&&(fe.base64=!1,fe.binary=!0,z="",fe.compression="STORE",ee="string");var B=null;B=z instanceof x||z instanceof m?z:C.isNode&&C.isStream(z)?new S(M,z):h.prepareContent(M,z,fe.binary,fe.optimizedBinaryString,fe.base64);var Z=new k(M,B,fe);this.files[M]=Z}var u=r("./utf8"),h=r("./utils"),m=r("./stream/GenericWorker"),g=r("./stream/StreamHelper"),y=r("./defaults"),x=r("./compressedObject"),k=r("./zipObject"),w=r("./generate"),C=r("./nodejsUtils"),S=r("./nodejs/NodejsStreamInputAdapter"),j=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var z=M.lastIndexOf("/");return 0<z?M.substring(0,z):""},_=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},E=function(M,z){return z=z!==void 0?z:y.createFolders,M=_(M),this.files[M]||c.call(this,M,null,{dir:!0,createFolders:z}),this.files[M]};function P(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var z,q,ne;for(z in this.files)ne=this.files[z],(q=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&M(q,ne)},filter:function(M){var z=[];return this.forEach(function(q,ne){M(q,ne)&&z.push(ne)}),z},file:function(M,z,q){if(arguments.length!==1)return M=this.root+M,c.call(this,M,z,q),this;if(P(M)){var ne=M;return this.filter(function(fe,pe){return!pe.dir&&ne.test(fe)})}var ee=this.files[this.root+M];return ee&&!ee.dir?ee:null},folder:function(M){if(!M)return this;if(P(M))return this.filter(function(ee,fe){return fe.dir&&M.test(ee)});var z=this.root+M,q=E.call(this,z),ne=this.clone();return ne.root=q.name,ne},remove:function(M){M=this.root+M;var z=this.files[M];if(z||(M.slice(-1)!=="/"&&(M+="/"),z=this.files[M]),z&&!z.dir)delete this.files[M];else for(var q=this.filter(function(ee,fe){return fe.name.slice(0,M.length)===M}),ne=0;ne<q.length;ne++)delete this.files[q[ne].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var z,q={};try{if((q=h.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),q.type==="binarystring"&&(q.type="string"),!q.type)throw new Error("No output type specified.");h.checkSupport(q.type),q.platform!=="darwin"&&q.platform!=="freebsd"&&q.platform!=="linux"&&q.platform!=="sunos"||(q.platform="UNIX"),q.platform==="win32"&&(q.platform="DOS");var ne=q.comment||this.comment||"";z=w.generateWorker(this,q,ne)}catch(ee){(z=new m("error")).error(ee)}return new g(z,q.type||"string",q.mimeType)},generateAsync:function(M,z){return this.generateInternalStream(M).accumulate(z)},generateNodeStream:function(M,z){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(z)}};s.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,s,l){s.exports=r("stream")},{stream:void 0}],17:[function(r,s,l){var c=r("./DataReader");function u(h){c.call(this,h);for(var m=0;m<this.data.length;m++)h[m]=255&h[m]}r("../utils").inherits(u,c),u.prototype.byteAt=function(h){return this.data[this.zero+h]},u.prototype.lastIndexOfSignature=function(h){for(var m=h.charCodeAt(0),g=h.charCodeAt(1),y=h.charCodeAt(2),x=h.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===m&&this.data[k+1]===g&&this.data[k+2]===y&&this.data[k+3]===x)return k-this.zero;return-1},u.prototype.readAndCheckSignature=function(h){var m=h.charCodeAt(0),g=h.charCodeAt(1),y=h.charCodeAt(2),x=h.charCodeAt(3),k=this.readData(4);return m===k[0]&&g===k[1]&&y===k[2]&&x===k[3]},u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,m},s.exports=u},{"../utils":32,"./DataReader":18}],18:[function(r,s,l){var c=r("../utils");function u(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var m,g=0;for(this.checkOffset(h),m=this.index+h-1;m>=this.index;m--)g=(g<<8)+this.byteAt(m);return this.index+=h,g},readString:function(h){return c.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},s.exports=u},{"../utils":32}],19:[function(r,s,l){var c=r("./Uint8ArrayReader");function u(h){c.call(this,h)}r("../utils").inherits(u,c),u.prototype.readData=function(h){this.checkOffset(h);var m=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,m},s.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,s,l){var c=r("./DataReader");function u(h){c.call(this,h)}r("../utils").inherits(u,c),u.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},u.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},u.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},u.prototype.readData=function(h){this.checkOffset(h);var m=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,m},s.exports=u},{"../utils":32,"./DataReader":18}],21:[function(r,s,l){var c=r("./ArrayReader");function u(h){c.call(this,h)}r("../utils").inherits(u,c),u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,m},s.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(r,s,l){var c=r("../utils"),u=r("../support"),h=r("./ArrayReader"),m=r("./StringReader"),g=r("./NodeBufferReader"),y=r("./Uint8ArrayReader");s.exports=function(x){var k=c.getTypeOf(x);return c.checkSupport(k),k!=="string"||u.uint8array?k==="nodebuffer"?new g(x):u.uint8array?new y(c.transformTo("uint8array",x)):new h(c.transformTo("array",x)):new m(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,s,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,s,l){var c=r("./GenericWorker"),u=r("../utils");function h(m){c.call(this,"ConvertWorker to "+m),this.destType=m}u.inherits(h,c),h.prototype.processChunk=function(m){this.push({data:u.transformTo(this.destType,m.data),meta:m.meta})},s.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(r,s,l){var c=r("./GenericWorker"),u=r("../crc32");function h(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(h,c),h.prototype.processChunk=function(m){this.streamInfo.crc32=u(m.data,this.streamInfo.crc32||0),this.push(m)},s.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,s,l){var c=r("../utils"),u=r("./GenericWorker");function h(m){u.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}c.inherits(h,u),h.prototype.processChunk=function(m){if(m){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+m.data.length}u.prototype.processChunk.call(this,m)},s.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(r,s,l){var c=r("../utils"),u=r("./GenericWorker");function h(m){u.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(y){g.dataIsReady=!0,g.data=y,g.max=y&&y.length||0,g.type=c.getTypeOf(y),g.isPaused||g._tickAndRepeat()},function(y){g.error(y)})}c.inherits(h,u),h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,g);break;case"uint8array":m=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":m=this.data.slice(this.index,g)}return this.index=g,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(r,s,l){function c(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,h){return this._listeners[u].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,h){if(this._listeners[u])for(var m=0;m<this._listeners[u].length;m++)this._listeners[u][m].call(this,h)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var h=this;return u.on("data",function(m){h.processChunk(m)}),u.on("end",function(){h.end()}),u.on("error",function(m){h.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,h){return this.extraStreamInfo[u]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},s.exports=c},{}],29:[function(r,s,l){var c=r("../utils"),u=r("./ConvertWorker"),h=r("./GenericWorker"),m=r("../base64"),g=r("../support"),y=r("../external"),x=null;if(g.nodestream)try{x=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(C,S){return new y.Promise(function(j,_){var E=[],P=C._internalType,D=C._outputType,M=C._mimeType;C.on("data",function(z,q){E.push(z),S&&S(q)}).on("error",function(z){E=[],_(z)}).on("end",function(){try{var z=function(q,ne,ee){switch(q){case"blob":return c.newBlob(c.transformTo("arraybuffer",ne),ee);case"base64":return m.encode(ne);default:return c.transformTo(q,ne)}}(D,function(q,ne){var ee,fe=0,pe=null,B=0;for(ee=0;ee<ne.length;ee++)B+=ne[ee].length;switch(q){case"string":return ne.join("");case"array":return Array.prototype.concat.apply([],ne);case"uint8array":for(pe=new Uint8Array(B),ee=0;ee<ne.length;ee++)pe.set(ne[ee],fe),fe+=ne[ee].length;return pe;case"nodebuffer":return Buffer.concat(ne);default:throw new Error("concat : unsupported type '"+q+"'")}}(P,E),M);j(z)}catch(q){_(q)}E=[]}).resume()})}function w(C,S,j){var _=S;switch(S){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=S,this._mimeType=j,c.checkSupport(_),this._worker=C.pipe(new u(_)),C.lock()}catch(E){this._worker=new h("error"),this._worker.error(E)}}w.prototype={accumulate:function(C){return k(this,C)},on:function(C,S){var j=this;return C==="data"?this._worker.on(C,function(_){S.call(j,_.data,_.meta)}):this._worker.on(C,function(){c.delay(S,arguments,j)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},C)}},s.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,s,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var c=new ArrayBuffer(0);try{l.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(c),l.blob=u.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!r("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(r,s,l){for(var c=r("./utils"),u=r("./support"),h=r("./nodejsUtils"),m=r("./stream/GenericWorker"),g=new Array(256),y=0;y<256;y++)g[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;g[254]=g[254]=1;function x(){m.call(this,"utf-8 decode"),this.leftOver=null}function k(){m.call(this,"utf-8 encode")}l.utf8encode=function(w){return u.nodebuffer?h.newBufferFrom(w,"utf-8"):function(C){var S,j,_,E,P,D=C.length,M=0;for(E=0;E<D;E++)(64512&(j=C.charCodeAt(E)))==55296&&E+1<D&&(64512&(_=C.charCodeAt(E+1)))==56320&&(j=65536+(j-55296<<10)+(_-56320),E++),M+=j<128?1:j<2048?2:j<65536?3:4;for(S=u.uint8array?new Uint8Array(M):new Array(M),E=P=0;P<M;E++)(64512&(j=C.charCodeAt(E)))==55296&&E+1<D&&(64512&(_=C.charCodeAt(E+1)))==56320&&(j=65536+(j-55296<<10)+(_-56320),E++),j<128?S[P++]=j:(j<2048?S[P++]=192|j>>>6:(j<65536?S[P++]=224|j>>>12:(S[P++]=240|j>>>18,S[P++]=128|j>>>12&63),S[P++]=128|j>>>6&63),S[P++]=128|63&j);return S}(w)},l.utf8decode=function(w){return u.nodebuffer?c.transformTo("nodebuffer",w).toString("utf-8"):function(C){var S,j,_,E,P=C.length,D=new Array(2*P);for(S=j=0;S<P;)if((_=C[S++])<128)D[j++]=_;else if(4<(E=g[_]))D[j++]=65533,S+=E-1;else{for(_&=E===2?31:E===3?15:7;1<E&&S<P;)_=_<<6|63&C[S++],E--;1<E?D[j++]=65533:_<65536?D[j++]=_:(_-=65536,D[j++]=55296|_>>10&1023,D[j++]=56320|1023&_)}return D.length!==j&&(D.subarray?D=D.subarray(0,j):D.length=j),c.applyFromCharCode(D)}(w=c.transformTo(u.uint8array?"uint8array":"array",w))},c.inherits(x,m),x.prototype.processChunk=function(w){var C=c.transformTo(u.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var S=C;(C=new Uint8Array(S.length+this.leftOver.length)).set(this.leftOver,0),C.set(S,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var j=function(E,P){var D;for((P=P||E.length)>E.length&&(P=E.length),D=P-1;0<=D&&(192&E[D])==128;)D--;return D<0||D===0?P:D+g[E[D]]>P?D:P}(C),_=C;j!==C.length&&(u.uint8array?(_=C.subarray(0,j),this.leftOver=C.subarray(j,C.length)):(_=C.slice(0,j),this.leftOver=C.slice(j,C.length))),this.push({data:l.utf8decode(_),meta:w.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=x,c.inherits(k,m),k.prototype.processChunk=function(w){this.push({data:l.utf8encode(w.data),meta:w.meta})},l.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,s,l){var c=r("./support"),u=r("./base64"),h=r("./nodejsUtils"),m=r("./external");function g(S){return S}function y(S,j){for(var _=0;_<S.length;++_)j[_]=255&S.charCodeAt(_);return j}r("setimmediate"),l.newBlob=function(S,j){l.checkSupport("blob");try{return new Blob([S],{type:j})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(S),_.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(S,j,_){var E=[],P=0,D=S.length;if(D<=_)return String.fromCharCode.apply(null,S);for(;P<D;)j==="array"||j==="nodebuffer"?E.push(String.fromCharCode.apply(null,S.slice(P,Math.min(P+_,D)))):E.push(String.fromCharCode.apply(null,S.subarray(P,Math.min(P+_,D)))),P+=_;return E.join("")},stringifyByChar:function(S){for(var j="",_=0;_<S.length;_++)j+=String.fromCharCode(S[_]);return j},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function k(S){var j=65536,_=l.getTypeOf(S),E=!0;if(_==="uint8array"?E=x.applyCanBeUsed.uint8array:_==="nodebuffer"&&(E=x.applyCanBeUsed.nodebuffer),E)for(;1<j;)try{return x.stringifyByChunk(S,_,j)}catch{j=Math.floor(j/2)}return x.stringifyByChar(S)}function w(S,j){for(var _=0;_<S.length;_++)j[_]=S[_];return j}l.applyFromCharCode=k;var C={};C.string={string:g,array:function(S){return y(S,new Array(S.length))},arraybuffer:function(S){return C.string.uint8array(S).buffer},uint8array:function(S){return y(S,new Uint8Array(S.length))},nodebuffer:function(S){return y(S,h.allocBuffer(S.length))}},C.array={string:k,array:g,arraybuffer:function(S){return new Uint8Array(S).buffer},uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return h.newBufferFrom(S)}},C.arraybuffer={string:function(S){return k(new Uint8Array(S))},array:function(S){return w(new Uint8Array(S),new Array(S.byteLength))},arraybuffer:g,uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return h.newBufferFrom(new Uint8Array(S))}},C.uint8array={string:k,array:function(S){return w(S,new Array(S.length))},arraybuffer:function(S){return S.buffer},uint8array:g,nodebuffer:function(S){return h.newBufferFrom(S)}},C.nodebuffer={string:k,array:function(S){return w(S,new Array(S.length))},arraybuffer:function(S){return C.nodebuffer.uint8array(S).buffer},uint8array:function(S){return w(S,new Uint8Array(S.length))},nodebuffer:g},l.transformTo=function(S,j){if(j=j||"",!S)return j;l.checkSupport(S);var _=l.getTypeOf(j);return C[_][S](j)},l.resolve=function(S){for(var j=S.split("/"),_=[],E=0;E<j.length;E++){var P=j[E];P==="."||P===""&&E!==0&&E!==j.length-1||(P===".."?_.pop():_.push(P))}return _.join("/")},l.getTypeOf=function(S){return typeof S=="string"?"string":Object.prototype.toString.call(S)==="[object Array]"?"array":c.nodebuffer&&h.isBuffer(S)?"nodebuffer":c.uint8array&&S instanceof Uint8Array?"uint8array":c.arraybuffer&&S instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(S){if(!c[S.toLowerCase()])throw new Error(S+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(S){var j,_,E="";for(_=0;_<(S||"").length;_++)E+="\\x"+((j=S.charCodeAt(_))<16?"0":"")+j.toString(16).toUpperCase();return E},l.delay=function(S,j,_){setImmediate(function(){S.apply(_||null,j||[])})},l.inherits=function(S,j){function _(){}_.prototype=j.prototype,S.prototype=new _},l.extend=function(){var S,j,_={};for(S=0;S<arguments.length;S++)for(j in arguments[S])Object.prototype.hasOwnProperty.call(arguments[S],j)&&_[j]===void 0&&(_[j]=arguments[S][j]);return _},l.prepareContent=function(S,j,_,E,P){return m.Promise.resolve(j).then(function(D){return c.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new m.Promise(function(M,z){var q=new FileReader;q.onload=function(ne){M(ne.target.result)},q.onerror=function(ne){z(ne.target.error)},q.readAsArrayBuffer(D)}):D}).then(function(D){var M=l.getTypeOf(D);return M?(M==="arraybuffer"?D=l.transformTo("uint8array",D):M==="string"&&(P?D=u.decode(D):_&&E!==!0&&(D=function(z){return y(z,c.uint8array?new Uint8Array(z.length):new Array(z.length))}(D))),D):m.Promise.reject(new Error("Can't read the data of '"+S+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,s,l){var c=r("./reader/readerFor"),u=r("./utils"),h=r("./signature"),m=r("./zipEntry"),g=r("./support");function y(x){this.files=[],this.loadOptions=x}y.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(k)+", expected "+u.pretty(x)+")")}},isSignature:function(x,k){var w=this.reader.index;this.reader.setIndex(x);var C=this.reader.readString(4)===k;return this.reader.setIndex(w),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),k=g.uint8array?"uint8array":"array",w=u.transformTo(k,x);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,k,w,C=this.zip64EndOfCentralSize-44;0<C;)x=this.reader.readInt(2),k=this.reader.readInt(4),w=this.reader.readData(k),this.zip64ExtensibleData[x]={id:x,length:k,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,k;for(x=0;x<this.files.length;x++)k=this.files[x],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(x=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var k=x;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var C=k-w;if(0<C)this.isSignature(k,h.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(x){this.reader=c(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,s,l){var c=r("./reader/readerFor"),u=r("./utils"),h=r("./compressedObject"),m=r("./crc32"),g=r("./utf8"),y=r("./compressions"),x=r("./support");function k(w,C){this.options=w,this.loadOptions=C}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(w){var C,S;if(w.skip(22),this.fileNameLength=w.readInt(2),S=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(S),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=function(j){for(var _ in y)if(Object.prototype.hasOwnProperty.call(y,_)&&y[_].magic===j)return y[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,C,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var C=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(C),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),w==0&&(this.dosPermissions=63&this.externalFileAttributes),w==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var w=c(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=w.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=w.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=w.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=w.readInt(4))}},readExtraFields:function(w){var C,S,j,_=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<_;)C=w.readInt(2),S=w.readInt(2),j=w.readData(S),this.extraFields[C]={id:C,length:S,value:j};w.setIndex(_)},handleUTF8:function(){var w=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var S=u.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(S)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var _=u.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var C=c(w.value);return C.readInt(1)!==1||m(this.fileName)!==C.readInt(4)?null:g.utf8decode(C.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var C=c(w.value);return C.readInt(1)!==1||m(this.fileComment)!==C.readInt(4)?null:g.utf8decode(C.readData(w.length-5))}return null}},s.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,s,l){function c(C,S,j){this.name=C,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=S,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var u=r("./stream/StreamHelper"),h=r("./stream/DataWorker"),m=r("./utf8"),g=r("./compressedObject"),y=r("./stream/GenericWorker");c.prototype={internalStream:function(C){var S=null,j="string";try{if(!C)throw new Error("No output type specified.");var _=(j=C.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),S=this._decompressWorker();var E=!this._dataBinary;E&&!_&&(S=S.pipe(new m.Utf8EncodeWorker)),!E&&_&&(S=S.pipe(new m.Utf8DecodeWorker))}catch(P){(S=new y("error")).error(P)}return new u(S,j,"")},async:function(C,S){return this.internalStream(C).accumulate(S)},nodeStream:function(C,S){return this.internalStream(C||"nodebuffer").toNodejsStream(S)},_compressWorker:function(C,S){if(this._data instanceof g&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new m.Utf8EncodeWorker)),g.createWorkerFrom(j,C,S)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof y?this._data:new h(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<x.length;w++)c.prototype[x[w]]=k;s.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,s,l){(function(c){var u,h,m=c.MutationObserver||c.WebKitMutationObserver;if(m){var g=0,y=new m(C),x=c.document.createTextNode("");y.observe(x,{characterData:!0}),u=function(){x.data=g=++g%2}}else if(c.setImmediate||c.MessageChannel===void 0)u="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var S=c.document.createElement("script");S.onreadystatechange=function(){C(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},c.document.documentElement.appendChild(S)}:function(){setTimeout(C,0)};else{var k=new c.MessageChannel;k.port1.onmessage=C,u=function(){k.port2.postMessage(0)}}var w=[];function C(){var S,j;h=!0;for(var _=w.length;_;){for(j=w,w=[],S=-1;++S<_;)j[S]();_=w.length}h=!1}s.exports=function(S){w.push(S)!==1||h||u()}}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,s,l){var c=r("immediate");function u(){}var h={},m=["REJECTED"],g=["FULFILLED"],y=["PENDING"];function x(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,_!==u&&S(this,_)}function k(_,E,P){this.promise=_,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function w(_,E,P){c(function(){var D;try{D=E(P)}catch(M){return h.reject(_,M)}D===_?h.reject(_,new TypeError("Cannot resolve promise with itself")):h.resolve(_,D)})}function C(_){var E=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof E=="function")return function(){E.apply(_,arguments)}}function S(_,E){var P=!1;function D(q){P||(P=!0,h.reject(_,q))}function M(q){P||(P=!0,h.resolve(_,q))}var z=j(function(){E(M,D)});z.status==="error"&&D(z.value)}function j(_,E){var P={};try{P.value=_(E),P.status="success"}catch(D){P.status="error",P.value=D}return P}(s.exports=x).prototype.finally=function(_){if(typeof _!="function")return this;var E=this.constructor;return this.then(function(P){return E.resolve(_()).then(function(){return P})},function(P){return E.resolve(_()).then(function(){throw P})})},x.prototype.catch=function(_){return this.then(null,_)},x.prototype.then=function(_,E){if(typeof _!="function"&&this.state===g||typeof E!="function"&&this.state===m)return this;var P=new this.constructor(u);return this.state!==y?w(P,this.state===g?_:E,this.outcome):this.queue.push(new k(P,_,E)),P},k.prototype.callFulfilled=function(_){h.resolve(this.promise,_)},k.prototype.otherCallFulfilled=function(_){w(this.promise,this.onFulfilled,_)},k.prototype.callRejected=function(_){h.reject(this.promise,_)},k.prototype.otherCallRejected=function(_){w(this.promise,this.onRejected,_)},h.resolve=function(_,E){var P=j(C,E);if(P.status==="error")return h.reject(_,P.value);var D=P.value;if(D)S(_,D);else{_.state=g,_.outcome=E;for(var M=-1,z=_.queue.length;++M<z;)_.queue[M].callFulfilled(E)}return _},h.reject=function(_,E){_.state=m,_.outcome=E;for(var P=-1,D=_.queue.length;++P<D;)_.queue[P].callRejected(E);return _},x.resolve=function(_){return _ instanceof this?_:h.resolve(new this(u),_)},x.reject=function(_){var E=new this(u);return h.reject(E,_)},x.all=function(_){var E=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=_.length,D=!1;if(!P)return this.resolve([]);for(var M=new Array(P),z=0,q=-1,ne=new this(u);++q<P;)ee(_[q],q);return ne;function ee(fe,pe){E.resolve(fe).then(function(B){M[pe]=B,++z!==P||D||(D=!0,h.resolve(ne,M))},function(B){D||(D=!0,h.reject(ne,B))})}},x.race=function(_){var E=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=_.length,D=!1;if(!P)return this.resolve([]);for(var M=-1,z=new this(u);++M<P;)q=_[M],E.resolve(q).then(function(ne){D||(D=!0,h.resolve(z,ne))},function(ne){D||(D=!0,h.reject(z,ne))});var q;return z}},{immediate:36}],38:[function(r,s,l){var c={};(0,r("./lib/utils/common").assign)(c,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),s.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,s,l){var c=r("./zlib/deflate"),u=r("./utils/common"),h=r("./utils/strings"),m=r("./zlib/messages"),g=r("./zlib/zstream"),y=Object.prototype.toString,x=0,k=-1,w=0,C=8;function S(_){if(!(this instanceof S))return new S(_);this.options=u.assign({level:k,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},_||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var P=c.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(P!==x)throw new Error(m[P]);if(E.header&&c.deflateSetHeader(this.strm,E.header),E.dictionary){var D;if(D=typeof E.dictionary=="string"?h.string2buf(E.dictionary):y.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(P=c.deflateSetDictionary(this.strm,D))!==x)throw new Error(m[P]);this._dict_set=!0}}function j(_,E){var P=new S(E);if(P.push(_,!0),P.err)throw P.msg||m[P.err];return P.result}S.prototype.push=function(_,E){var P,D,M=this.strm,z=this.options.chunkSize;if(this.ended)return!1;D=E===~~E?E:E===!0?4:0,typeof _=="string"?M.input=h.string2buf(_):y.call(_)==="[object ArrayBuffer]"?M.input=new Uint8Array(_):M.input=_,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new u.Buf8(z),M.next_out=0,M.avail_out=z),(P=c.deflate(M,D))!==1&&P!==x)return this.onEnd(P),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(u.shrinkBuf(M.output,M.next_out))):this.onData(u.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&P!==1);return D===4?(P=c.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===x):D!==2||(this.onEnd(x),!(M.avail_out=0))},S.prototype.onData=function(_){this.chunks.push(_)},S.prototype.onEnd=function(_){_===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},l.Deflate=S,l.deflate=j,l.deflateRaw=function(_,E){return(E=E||{}).raw=!0,j(_,E)},l.gzip=function(_,E){return(E=E||{}).gzip=!0,j(_,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,s,l){var c=r("./zlib/inflate"),u=r("./utils/common"),h=r("./utils/strings"),m=r("./zlib/constants"),g=r("./zlib/messages"),y=r("./zlib/zstream"),x=r("./zlib/gzheader"),k=Object.prototype.toString;function w(S){if(!(this instanceof w))return new w(S);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},S||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||S&&S.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&(15&j.windowBits)==0&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var _=c.inflateInit2(this.strm,j.windowBits);if(_!==m.Z_OK)throw new Error(g[_]);this.header=new x,c.inflateGetHeader(this.strm,this.header)}function C(S,j){var _=new w(j);if(_.push(S,!0),_.err)throw _.msg||g[_.err];return _.result}w.prototype.push=function(S,j){var _,E,P,D,M,z,q=this.strm,ne=this.options.chunkSize,ee=this.options.dictionary,fe=!1;if(this.ended)return!1;E=j===~~j?j:j===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof S=="string"?q.input=h.binstring2buf(S):k.call(S)==="[object ArrayBuffer]"?q.input=new Uint8Array(S):q.input=S,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new u.Buf8(ne),q.next_out=0,q.avail_out=ne),(_=c.inflate(q,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&ee&&(z=typeof ee=="string"?h.string2buf(ee):k.call(ee)==="[object ArrayBuffer]"?new Uint8Array(ee):ee,_=c.inflateSetDictionary(this.strm,z)),_===m.Z_BUF_ERROR&&fe===!0&&(_=m.Z_OK,fe=!1),_!==m.Z_STREAM_END&&_!==m.Z_OK)return this.onEnd(_),!(this.ended=!0);q.next_out&&(q.avail_out!==0&&_!==m.Z_STREAM_END&&(q.avail_in!==0||E!==m.Z_FINISH&&E!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=h.utf8border(q.output,q.next_out),D=q.next_out-P,M=h.buf2string(q.output,P),q.next_out=D,q.avail_out=ne-D,D&&u.arraySet(q.output,q.output,P,D,0),this.onData(M)):this.onData(u.shrinkBuf(q.output,q.next_out)))),q.avail_in===0&&q.avail_out===0&&(fe=!0)}while((0<q.avail_in||q.avail_out===0)&&_!==m.Z_STREAM_END);return _===m.Z_STREAM_END&&(E=m.Z_FINISH),E===m.Z_FINISH?(_=c.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===m.Z_OK):E!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(q.avail_out=0))},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},l.Inflate=w,l.inflate=C,l.inflateRaw=function(S,j){return(j=j||{}).raw=!0,C(S,j)},l.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,s,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(m){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var y=g.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var x in y)y.hasOwnProperty(x)&&(m[x]=y[x])}}return m},l.shrinkBuf=function(m,g){return m.length===g?m:m.subarray?m.subarray(0,g):(m.length=g,m)};var u={arraySet:function(m,g,y,x,k){if(g.subarray&&m.subarray)m.set(g.subarray(y,y+x),k);else for(var w=0;w<x;w++)m[k+w]=g[y+w]},flattenChunks:function(m){var g,y,x,k,w,C;for(g=x=0,y=m.length;g<y;g++)x+=m[g].length;for(C=new Uint8Array(x),g=k=0,y=m.length;g<y;g++)w=m[g],C.set(w,k),k+=w.length;return C}},h={arraySet:function(m,g,y,x,k){for(var w=0;w<x;w++)m[k+w]=g[y+w]},flattenChunks:function(m){return[].concat.apply([],m)}};l.setTyped=function(m){m?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,u)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,h))},l.setTyped(c)},{}],42:[function(r,s,l){var c=r("./common"),u=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var m=new c.Buf8(256),g=0;g<256;g++)m[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function y(x,k){if(k<65537&&(x.subarray&&h||!x.subarray&&u))return String.fromCharCode.apply(null,c.shrinkBuf(x,k));for(var w="",C=0;C<k;C++)w+=String.fromCharCode(x[C]);return w}m[254]=m[254]=1,l.string2buf=function(x){var k,w,C,S,j,_=x.length,E=0;for(S=0;S<_;S++)(64512&(w=x.charCodeAt(S)))==55296&&S+1<_&&(64512&(C=x.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),S++),E+=w<128?1:w<2048?2:w<65536?3:4;for(k=new c.Buf8(E),S=j=0;j<E;S++)(64512&(w=x.charCodeAt(S)))==55296&&S+1<_&&(64512&(C=x.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),S++),w<128?k[j++]=w:(w<2048?k[j++]=192|w>>>6:(w<65536?k[j++]=224|w>>>12:(k[j++]=240|w>>>18,k[j++]=128|w>>>12&63),k[j++]=128|w>>>6&63),k[j++]=128|63&w);return k},l.buf2binstring=function(x){return y(x,x.length)},l.binstring2buf=function(x){for(var k=new c.Buf8(x.length),w=0,C=k.length;w<C;w++)k[w]=x.charCodeAt(w);return k},l.buf2string=function(x,k){var w,C,S,j,_=k||x.length,E=new Array(2*_);for(w=C=0;w<_;)if((S=x[w++])<128)E[C++]=S;else if(4<(j=m[S]))E[C++]=65533,w+=j-1;else{for(S&=j===2?31:j===3?15:7;1<j&&w<_;)S=S<<6|63&x[w++],j--;1<j?E[C++]=65533:S<65536?E[C++]=S:(S-=65536,E[C++]=55296|S>>10&1023,E[C++]=56320|1023&S)}return y(E,C)},l.utf8border=function(x,k){var w;for((k=k||x.length)>x.length&&(k=x.length),w=k-1;0<=w&&(192&x[w])==128;)w--;return w<0||w===0?k:w+m[x[w]]>k?w:k}},{"./common":41}],43:[function(r,s,l){s.exports=function(c,u,h,m){for(var g=65535&c|0,y=c>>>16&65535|0,x=0;h!==0;){for(h-=x=2e3<h?2e3:h;y=y+(g=g+u[m++]|0)|0,--x;);g%=65521,y%=65521}return g|y<<16|0}},{}],44:[function(r,s,l){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,s,l){var c=function(){for(var u,h=[],m=0;m<256;m++){u=m;for(var g=0;g<8;g++)u=1&u?3988292384^u>>>1:u>>>1;h[m]=u}return h}();s.exports=function(u,h,m,g){var y=c,x=g+m;u^=-1;for(var k=g;k<x;k++)u=u>>>8^y[255&(u^h[k])];return-1^u}},{}],46:[function(r,s,l){var c,u=r("../utils/common"),h=r("./trees"),m=r("./adler32"),g=r("./crc32"),y=r("./messages"),x=0,k=4,w=0,C=-2,S=-1,j=4,_=2,E=8,P=9,D=286,M=30,z=19,q=2*D+1,ne=15,ee=3,fe=258,pe=fe+ee+1,B=42,Z=113,T=1,ue=2,Te=3,me=4;function ye(N,he){return N.msg=y[he],he}function J(N){return(N<<1)-(4<N?9:0)}function Q(N){for(var he=N.length;0<=--he;)N[he]=0}function I(N){var he=N.state,Y=he.pending;Y>N.avail_out&&(Y=N.avail_out),Y!==0&&(u.arraySet(N.output,he.pending_buf,he.pending_out,Y,N.next_out),N.next_out+=Y,he.pending_out+=Y,N.total_out+=Y,N.avail_out-=Y,he.pending-=Y,he.pending===0&&(he.pending_out=0))}function U(N,he){h._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,he),N.block_start=N.strstart,I(N.strm)}function le(N,he){N.pending_buf[N.pending++]=he}function de(N,he){N.pending_buf[N.pending++]=he>>>8&255,N.pending_buf[N.pending++]=255&he}function ie(N,he){var Y,F,L=N.max_chain_length,K=N.strstart,ve=N.prev_length,xe=N.nice_match,se=N.strstart>N.w_size-pe?N.strstart-(N.w_size-pe):0,Se=N.window,Re=N.w_mask,Ne=N.prev,$e=N.strstart+fe,et=Se[K+ve-1],Xe=Se[K+ve];N.prev_length>=N.good_match&&(L>>=2),xe>N.lookahead&&(xe=N.lookahead);do if(Se[(Y=he)+ve]===Xe&&Se[Y+ve-1]===et&&Se[Y]===Se[K]&&Se[++Y]===Se[K+1]){K+=2,Y++;do;while(Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&Se[++K]===Se[++Y]&&K<$e);if(F=fe-($e-K),K=$e-fe,ve<F){if(N.match_start=he,xe<=(ve=F))break;et=Se[K+ve-1],Xe=Se[K+ve]}}while((he=Ne[he&Re])>se&&--L!=0);return ve<=N.lookahead?ve:N.lookahead}function Ee(N){var he,Y,F,L,K,ve,xe,se,Se,Re,Ne=N.w_size;do{if(L=N.window_size-N.lookahead-N.strstart,N.strstart>=Ne+(Ne-pe)){for(u.arraySet(N.window,N.window,Ne,Ne,0),N.match_start-=Ne,N.strstart-=Ne,N.block_start-=Ne,he=Y=N.hash_size;F=N.head[--he],N.head[he]=Ne<=F?F-Ne:0,--Y;);for(he=Y=Ne;F=N.prev[--he],N.prev[he]=Ne<=F?F-Ne:0,--Y;);L+=Ne}if(N.strm.avail_in===0)break;if(ve=N.strm,xe=N.window,se=N.strstart+N.lookahead,Se=L,Re=void 0,Re=ve.avail_in,Se<Re&&(Re=Se),Y=Re===0?0:(ve.avail_in-=Re,u.arraySet(xe,ve.input,ve.next_in,Re,se),ve.state.wrap===1?ve.adler=m(ve.adler,xe,Re,se):ve.state.wrap===2&&(ve.adler=g(ve.adler,xe,Re,se)),ve.next_in+=Re,ve.total_in+=Re,Re),N.lookahead+=Y,N.lookahead+N.insert>=ee)for(K=N.strstart-N.insert,N.ins_h=N.window[K],N.ins_h=(N.ins_h<<N.hash_shift^N.window[K+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[K+ee-1])&N.hash_mask,N.prev[K&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=K,K++,N.insert--,!(N.lookahead+N.insert<ee)););}while(N.lookahead<pe&&N.strm.avail_in!==0)}function Ie(N,he){for(var Y,F;;){if(N.lookahead<pe){if(Ee(N),N.lookahead<pe&&he===x)return T;if(N.lookahead===0)break}if(Y=0,N.lookahead>=ee&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+ee-1])&N.hash_mask,Y=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),Y!==0&&N.strstart-Y<=N.w_size-pe&&(N.match_length=ie(N,Y)),N.match_length>=ee)if(F=h._tr_tally(N,N.strstart-N.match_start,N.match_length-ee),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=ee){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+ee-1])&N.hash_mask,Y=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else F=h._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(F&&(U(N,!1),N.strm.avail_out===0))return T}return N.insert=N.strstart<ee-1?N.strstart:ee-1,he===k?(U(N,!0),N.strm.avail_out===0?Te:me):N.last_lit&&(U(N,!1),N.strm.avail_out===0)?T:ue}function Pe(N,he){for(var Y,F,L;;){if(N.lookahead<pe){if(Ee(N),N.lookahead<pe&&he===x)return T;if(N.lookahead===0)break}if(Y=0,N.lookahead>=ee&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+ee-1])&N.hash_mask,Y=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=ee-1,Y!==0&&N.prev_length<N.max_lazy_match&&N.strstart-Y<=N.w_size-pe&&(N.match_length=ie(N,Y),N.match_length<=5&&(N.strategy===1||N.match_length===ee&&4096<N.strstart-N.match_start)&&(N.match_length=ee-1)),N.prev_length>=ee&&N.match_length<=N.prev_length){for(L=N.strstart+N.lookahead-ee,F=h._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-ee),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=L&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+ee-1])&N.hash_mask,Y=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=ee-1,N.strstart++,F&&(U(N,!1),N.strm.avail_out===0))return T}else if(N.match_available){if((F=h._tr_tally(N,0,N.window[N.strstart-1]))&&U(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return T}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(F=h._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<ee-1?N.strstart:ee-1,he===k?(U(N,!0),N.strm.avail_out===0?Te:me):N.last_lit&&(U(N,!1),N.strm.avail_out===0)?T:ue}function De(N,he,Y,F,L){this.good_length=N,this.max_lazy=he,this.nice_length=Y,this.max_chain=F,this.func=L}function Ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*q),this.dyn_dtree=new u.Buf16(2*(2*M+1)),this.bl_tree=new u.Buf16(2*(2*z+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(ne+1),this.heap=new u.Buf16(2*D+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*D+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(N){var he;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=_,(he=N.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?B:Z,N.adler=he.wrap===2?0:1,he.last_flush=x,h._tr_init(he),w):ye(N,C)}function ct(N){var he=it(N);return he===w&&function(Y){Y.window_size=2*Y.w_size,Q(Y.head),Y.max_lazy_match=c[Y.level].max_lazy,Y.good_match=c[Y.level].good_length,Y.nice_match=c[Y.level].nice_length,Y.max_chain_length=c[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=ee-1,Y.match_available=0,Y.ins_h=0}(N.state),he}function je(N,he,Y,F,L,K){if(!N)return C;var ve=1;if(he===S&&(he=6),F<0?(ve=0,F=-F):15<F&&(ve=2,F-=16),L<1||P<L||Y!==E||F<8||15<F||he<0||9<he||K<0||j<K)return ye(N,C);F===8&&(F=9);var xe=new Ke;return(N.state=xe).strm=N,xe.wrap=ve,xe.gzhead=null,xe.w_bits=F,xe.w_size=1<<xe.w_bits,xe.w_mask=xe.w_size-1,xe.hash_bits=L+7,xe.hash_size=1<<xe.hash_bits,xe.hash_mask=xe.hash_size-1,xe.hash_shift=~~((xe.hash_bits+ee-1)/ee),xe.window=new u.Buf8(2*xe.w_size),xe.head=new u.Buf16(xe.hash_size),xe.prev=new u.Buf16(xe.w_size),xe.lit_bufsize=1<<L+6,xe.pending_buf_size=4*xe.lit_bufsize,xe.pending_buf=new u.Buf8(xe.pending_buf_size),xe.d_buf=1*xe.lit_bufsize,xe.l_buf=3*xe.lit_bufsize,xe.level=he,xe.strategy=K,xe.method=Y,ct(N)}c=[new De(0,0,0,0,function(N,he){var Y=65535;for(Y>N.pending_buf_size-5&&(Y=N.pending_buf_size-5);;){if(N.lookahead<=1){if(Ee(N),N.lookahead===0&&he===x)return T;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var F=N.block_start+Y;if((N.strstart===0||N.strstart>=F)&&(N.lookahead=N.strstart-F,N.strstart=F,U(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-pe&&(U(N,!1),N.strm.avail_out===0))return T}return N.insert=0,he===k?(U(N,!0),N.strm.avail_out===0?Te:me):(N.strstart>N.block_start&&(U(N,!1),N.strm.avail_out),T)}),new De(4,4,8,4,Ie),new De(4,5,16,8,Ie),new De(4,6,32,32,Ie),new De(4,4,16,16,Pe),new De(8,16,32,32,Pe),new De(8,16,128,128,Pe),new De(8,32,128,256,Pe),new De(32,128,258,1024,Pe),new De(32,258,258,4096,Pe)],l.deflateInit=function(N,he){return je(N,he,E,15,8,0)},l.deflateInit2=je,l.deflateReset=ct,l.deflateResetKeep=it,l.deflateSetHeader=function(N,he){return N&&N.state?N.state.wrap!==2?C:(N.state.gzhead=he,w):C},l.deflate=function(N,he){var Y,F,L,K;if(!N||!N.state||5<he||he<0)return N?ye(N,C):C;if(F=N.state,!N.output||!N.input&&N.avail_in!==0||F.status===666&&he!==k)return ye(N,N.avail_out===0?-5:C);if(F.strm=N,Y=F.last_flush,F.last_flush=he,F.status===B)if(F.wrap===2)N.adler=0,le(F,31),le(F,139),le(F,8),F.gzhead?(le(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),le(F,255&F.gzhead.time),le(F,F.gzhead.time>>8&255),le(F,F.gzhead.time>>16&255),le(F,F.gzhead.time>>24&255),le(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),le(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(le(F,255&F.gzhead.extra.length),le(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(N.adler=g(N.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(le(F,0),le(F,0),le(F,0),le(F,0),le(F,0),le(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),le(F,3),F.status=Z);else{var ve=E+(F.w_bits-8<<4)<<8;ve|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(ve|=32),ve+=31-ve%31,F.status=Z,de(F,ve),F.strstart!==0&&(de(F,N.adler>>>16),de(F,65535&N.adler)),N.adler=1}if(F.status===69)if(F.gzhead.extra){for(L=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),I(N),L=F.pending,F.pending!==F.pending_buf_size));)le(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),I(N),L=F.pending,F.pending===F.pending_buf_size)){K=1;break}K=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,le(F,K)}while(K!==0);F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),K===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),I(N),L=F.pending,F.pending===F.pending_buf_size)){K=1;break}K=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,le(F,K)}while(K!==0);F.gzhead.hcrc&&F.pending>L&&(N.adler=g(N.adler,F.pending_buf,F.pending-L,L)),K===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&I(N),F.pending+2<=F.pending_buf_size&&(le(F,255&N.adler),le(F,N.adler>>8&255),N.adler=0,F.status=Z)):F.status=Z),F.pending!==0){if(I(N),N.avail_out===0)return F.last_flush=-1,w}else if(N.avail_in===0&&J(he)<=J(Y)&&he!==k)return ye(N,-5);if(F.status===666&&N.avail_in!==0)return ye(N,-5);if(N.avail_in!==0||F.lookahead!==0||he!==x&&F.status!==666){var xe=F.strategy===2?function(se,Se){for(var Re;;){if(se.lookahead===0&&(Ee(se),se.lookahead===0)){if(Se===x)return T;break}if(se.match_length=0,Re=h._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,Re&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Se===k?(U(se,!0),se.strm.avail_out===0?Te:me):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:ue}(F,he):F.strategy===3?function(se,Se){for(var Re,Ne,$e,et,Xe=se.window;;){if(se.lookahead<=fe){if(Ee(se),se.lookahead<=fe&&Se===x)return T;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=ee&&0<se.strstart&&(Ne=Xe[$e=se.strstart-1])===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]){et=se.strstart+fe;do;while(Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&Ne===Xe[++$e]&&$e<et);se.match_length=fe-(et-$e),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=ee?(Re=h._tr_tally(se,1,se.match_length-ee),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(Re=h._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),Re&&(U(se,!1),se.strm.avail_out===0))return T}return se.insert=0,Se===k?(U(se,!0),se.strm.avail_out===0?Te:me):se.last_lit&&(U(se,!1),se.strm.avail_out===0)?T:ue}(F,he):c[F.level].func(F,he);if(xe!==Te&&xe!==me||(F.status=666),xe===T||xe===Te)return N.avail_out===0&&(F.last_flush=-1),w;if(xe===ue&&(he===1?h._tr_align(F):he!==5&&(h._tr_stored_block(F,0,0,!1),he===3&&(Q(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),I(N),N.avail_out===0))return F.last_flush=-1,w}return he!==k?w:F.wrap<=0?1:(F.wrap===2?(le(F,255&N.adler),le(F,N.adler>>8&255),le(F,N.adler>>16&255),le(F,N.adler>>24&255),le(F,255&N.total_in),le(F,N.total_in>>8&255),le(F,N.total_in>>16&255),le(F,N.total_in>>24&255)):(de(F,N.adler>>>16),de(F,65535&N.adler)),I(N),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?w:1)},l.deflateEnd=function(N){var he;return N&&N.state?(he=N.state.status)!==B&&he!==69&&he!==73&&he!==91&&he!==103&&he!==Z&&he!==666?ye(N,C):(N.state=null,he===Z?ye(N,-3):w):C},l.deflateSetDictionary=function(N,he){var Y,F,L,K,ve,xe,se,Se,Re=he.length;if(!N||!N.state||(K=(Y=N.state).wrap)===2||K===1&&Y.status!==B||Y.lookahead)return C;for(K===1&&(N.adler=m(N.adler,he,Re,0)),Y.wrap=0,Re>=Y.w_size&&(K===0&&(Q(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),Se=new u.Buf8(Y.w_size),u.arraySet(Se,he,Re-Y.w_size,Y.w_size,0),he=Se,Re=Y.w_size),ve=N.avail_in,xe=N.next_in,se=N.input,N.avail_in=Re,N.next_in=0,N.input=he,Ee(Y);Y.lookahead>=ee;){for(F=Y.strstart,L=Y.lookahead-(ee-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[F+ee-1])&Y.hash_mask,Y.prev[F&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=F,F++,--L;);Y.strstart=F,Y.lookahead=ee-1,Ee(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=ee-1,Y.match_available=0,N.next_in=xe,N.input=se,N.avail_in=ve,Y.wrap=K,w},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,s,l){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,s,l){s.exports=function(c,u){var h,m,g,y,x,k,w,C,S,j,_,E,P,D,M,z,q,ne,ee,fe,pe,B,Z,T,ue;h=c.state,m=c.next_in,T=c.input,g=m+(c.avail_in-5),y=c.next_out,ue=c.output,x=y-(u-c.avail_out),k=y+(c.avail_out-257),w=h.dmax,C=h.wsize,S=h.whave,j=h.wnext,_=h.window,E=h.hold,P=h.bits,D=h.lencode,M=h.distcode,z=(1<<h.lenbits)-1,q=(1<<h.distbits)-1;e:do{P<15&&(E+=T[m++]<<P,P+=8,E+=T[m++]<<P,P+=8),ne=D[E&z];t:for(;;){if(E>>>=ee=ne>>>24,P-=ee,(ee=ne>>>16&255)===0)ue[y++]=65535&ne;else{if(!(16&ee)){if((64&ee)==0){ne=D[(65535&ne)+(E&(1<<ee)-1)];continue t}if(32&ee){h.mode=12;break e}c.msg="invalid literal/length code",h.mode=30;break e}fe=65535&ne,(ee&=15)&&(P<ee&&(E+=T[m++]<<P,P+=8),fe+=E&(1<<ee)-1,E>>>=ee,P-=ee),P<15&&(E+=T[m++]<<P,P+=8,E+=T[m++]<<P,P+=8),ne=M[E&q];r:for(;;){if(E>>>=ee=ne>>>24,P-=ee,!(16&(ee=ne>>>16&255))){if((64&ee)==0){ne=M[(65535&ne)+(E&(1<<ee)-1)];continue r}c.msg="invalid distance code",h.mode=30;break e}if(pe=65535&ne,P<(ee&=15)&&(E+=T[m++]<<P,(P+=8)<ee&&(E+=T[m++]<<P,P+=8)),w<(pe+=E&(1<<ee)-1)){c.msg="invalid distance too far back",h.mode=30;break e}if(E>>>=ee,P-=ee,(ee=y-x)<pe){if(S<(ee=pe-ee)&&h.sane){c.msg="invalid distance too far back",h.mode=30;break e}if(Z=_,(B=0)===j){if(B+=C-ee,ee<fe){for(fe-=ee;ue[y++]=_[B++],--ee;);B=y-pe,Z=ue}}else if(j<ee){if(B+=C+j-ee,(ee-=j)<fe){for(fe-=ee;ue[y++]=_[B++],--ee;);if(B=0,j<fe){for(fe-=ee=j;ue[y++]=_[B++],--ee;);B=y-pe,Z=ue}}}else if(B+=j-ee,ee<fe){for(fe-=ee;ue[y++]=_[B++],--ee;);B=y-pe,Z=ue}for(;2<fe;)ue[y++]=Z[B++],ue[y++]=Z[B++],ue[y++]=Z[B++],fe-=3;fe&&(ue[y++]=Z[B++],1<fe&&(ue[y++]=Z[B++]))}else{for(B=y-pe;ue[y++]=ue[B++],ue[y++]=ue[B++],ue[y++]=ue[B++],2<(fe-=3););fe&&(ue[y++]=ue[B++],1<fe&&(ue[y++]=ue[B++]))}break}}break}}while(m<g&&y<k);m-=fe=P>>3,E&=(1<<(P-=fe<<3))-1,c.next_in=m,c.next_out=y,c.avail_in=m<g?g-m+5:5-(m-g),c.avail_out=y<k?k-y+257:257-(y-k),h.hold=E,h.bits=P}},{}],49:[function(r,s,l){var c=r("../utils/common"),u=r("./adler32"),h=r("./crc32"),m=r("./inffast"),g=r("./inftrees"),y=1,x=2,k=0,w=-2,C=1,S=852,j=592;function _(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(B){var Z;return B&&B.state?(Z=B.state,B.total_in=B.total_out=Z.total=0,B.msg="",Z.wrap&&(B.adler=1&Z.wrap),Z.mode=C,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new c.Buf32(S),Z.distcode=Z.distdyn=new c.Buf32(j),Z.sane=1,Z.back=-1,k):w}function D(B){var Z;return B&&B.state?((Z=B.state).wsize=0,Z.whave=0,Z.wnext=0,P(B)):w}function M(B,Z){var T,ue;return B&&B.state?(ue=B.state,Z<0?(T=0,Z=-Z):(T=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?w:(ue.window!==null&&ue.wbits!==Z&&(ue.window=null),ue.wrap=T,ue.wbits=Z,D(B))):w}function z(B,Z){var T,ue;return B?(ue=new E,(B.state=ue).window=null,(T=M(B,Z))!==k&&(B.state=null),T):w}var q,ne,ee=!0;function fe(B){if(ee){var Z;for(q=new c.Buf32(512),ne=new c.Buf32(32),Z=0;Z<144;)B.lens[Z++]=8;for(;Z<256;)B.lens[Z++]=9;for(;Z<280;)B.lens[Z++]=7;for(;Z<288;)B.lens[Z++]=8;for(g(y,B.lens,0,288,q,0,B.work,{bits:9}),Z=0;Z<32;)B.lens[Z++]=5;g(x,B.lens,0,32,ne,0,B.work,{bits:5}),ee=!1}B.lencode=q,B.lenbits=9,B.distcode=ne,B.distbits=5}function pe(B,Z,T,ue){var Te,me=B.state;return me.window===null&&(me.wsize=1<<me.wbits,me.wnext=0,me.whave=0,me.window=new c.Buf8(me.wsize)),ue>=me.wsize?(c.arraySet(me.window,Z,T-me.wsize,me.wsize,0),me.wnext=0,me.whave=me.wsize):(ue<(Te=me.wsize-me.wnext)&&(Te=ue),c.arraySet(me.window,Z,T-ue,Te,me.wnext),(ue-=Te)?(c.arraySet(me.window,Z,T-ue,ue,0),me.wnext=ue,me.whave=me.wsize):(me.wnext+=Te,me.wnext===me.wsize&&(me.wnext=0),me.whave<me.wsize&&(me.whave+=Te))),0}l.inflateReset=D,l.inflateReset2=M,l.inflateResetKeep=P,l.inflateInit=function(B){return z(B,15)},l.inflateInit2=z,l.inflate=function(B,Z){var T,ue,Te,me,ye,J,Q,I,U,le,de,ie,Ee,Ie,Pe,De,Ke,it,ct,je,N,he,Y,F,L=0,K=new c.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return w;(T=B.state).mode===12&&(T.mode=13),ye=B.next_out,Te=B.output,Q=B.avail_out,me=B.next_in,ue=B.input,J=B.avail_in,I=T.hold,U=T.bits,le=J,de=Q,he=k;e:for(;;)switch(T.mode){case C:if(T.wrap===0){T.mode=13;break}for(;U<16;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(2&T.wrap&&I===35615){K[T.check=0]=255&I,K[1]=I>>>8&255,T.check=h(T.check,K,2,0),U=I=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&I)<<8)+(I>>8))%31){B.msg="incorrect header check",T.mode=30;break}if((15&I)!=8){B.msg="unknown compression method",T.mode=30;break}if(U-=4,N=8+(15&(I>>>=4)),T.wbits===0)T.wbits=N;else if(N>T.wbits){B.msg="invalid window size",T.mode=30;break}T.dmax=1<<N,B.adler=T.check=1,T.mode=512&I?10:12,U=I=0;break;case 2:for(;U<16;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(T.flags=I,(255&T.flags)!=8){B.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){B.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=I>>8&1),512&T.flags&&(K[0]=255&I,K[1]=I>>>8&255,T.check=h(T.check,K,2,0)),U=I=0,T.mode=3;case 3:for(;U<32;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.head&&(T.head.time=I),512&T.flags&&(K[0]=255&I,K[1]=I>>>8&255,K[2]=I>>>16&255,K[3]=I>>>24&255,T.check=h(T.check,K,4,0)),U=I=0,T.mode=4;case 4:for(;U<16;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.head&&(T.head.xflags=255&I,T.head.os=I>>8),512&T.flags&&(K[0]=255&I,K[1]=I>>>8&255,T.check=h(T.check,K,2,0)),U=I=0,T.mode=5;case 5:if(1024&T.flags){for(;U<16;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.length=I,T.head&&(T.head.extra_len=I),512&T.flags&&(K[0]=255&I,K[1]=I>>>8&255,T.check=h(T.check,K,2,0)),U=I=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(J<(ie=T.length)&&(ie=J),ie&&(T.head&&(N=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),c.arraySet(T.head.extra,ue,me,ie,N)),512&T.flags&&(T.check=h(T.check,ue,ie,me)),J-=ie,me+=ie,T.length-=ie),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(J===0)break e;for(ie=0;N=ue[me+ie++],T.head&&N&&T.length<65536&&(T.head.name+=String.fromCharCode(N)),N&&ie<J;);if(512&T.flags&&(T.check=h(T.check,ue,ie,me)),J-=ie,me+=ie,N)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(J===0)break e;for(ie=0;N=ue[me+ie++],T.head&&N&&T.length<65536&&(T.head.comment+=String.fromCharCode(N)),N&&ie<J;);if(512&T.flags&&(T.check=h(T.check,ue,ie,me)),J-=ie,me+=ie,N)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;U<16;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(I!==(65535&T.check)){B.msg="header crc mismatch",T.mode=30;break}U=I=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),B.adler=T.check=0,T.mode=12;break;case 10:for(;U<32;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}B.adler=T.check=_(I),U=I=0,T.mode=11;case 11:if(T.havedict===0)return B.next_out=ye,B.avail_out=Q,B.next_in=me,B.avail_in=J,T.hold=I,T.bits=U,2;B.adler=T.check=1,T.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(T.last){I>>>=7&U,U-=7&U,T.mode=27;break}for(;U<3;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}switch(T.last=1&I,U-=1,3&(I>>>=1)){case 0:T.mode=14;break;case 1:if(fe(T),T.mode=20,Z!==6)break;I>>>=2,U-=2;break e;case 2:T.mode=17;break;case 3:B.msg="invalid block type",T.mode=30}I>>>=2,U-=2;break;case 14:for(I>>>=7&U,U-=7&U;U<32;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if((65535&I)!=(I>>>16^65535)){B.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&I,U=I=0,T.mode=15,Z===6)break e;case 15:T.mode=16;case 16:if(ie=T.length){if(J<ie&&(ie=J),Q<ie&&(ie=Q),ie===0)break e;c.arraySet(Te,ue,me,ie,ye),J-=ie,me+=ie,Q-=ie,ye+=ie,T.length-=ie;break}T.mode=12;break;case 17:for(;U<14;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(T.nlen=257+(31&I),I>>>=5,U-=5,T.ndist=1+(31&I),I>>>=5,U-=5,T.ncode=4+(15&I),I>>>=4,U-=4,286<T.nlen||30<T.ndist){B.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;U<3;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.lens[ve[T.have++]]=7&I,I>>>=3,U-=3}for(;T.have<19;)T.lens[ve[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Y={bits:T.lenbits},he=g(0,T.lens,0,19,T.lencode,0,T.work,Y),T.lenbits=Y.bits,he){B.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;De=(L=T.lencode[I&(1<<T.lenbits)-1])>>>16&255,Ke=65535&L,!((Pe=L>>>24)<=U);){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(Ke<16)I>>>=Pe,U-=Pe,T.lens[T.have++]=Ke;else{if(Ke===16){for(F=Pe+2;U<F;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(I>>>=Pe,U-=Pe,T.have===0){B.msg="invalid bit length repeat",T.mode=30;break}N=T.lens[T.have-1],ie=3+(3&I),I>>>=2,U-=2}else if(Ke===17){for(F=Pe+3;U<F;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}U-=Pe,N=0,ie=3+(7&(I>>>=Pe)),I>>>=3,U-=3}else{for(F=Pe+7;U<F;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}U-=Pe,N=0,ie=11+(127&(I>>>=Pe)),I>>>=7,U-=7}if(T.have+ie>T.nlen+T.ndist){B.msg="invalid bit length repeat",T.mode=30;break}for(;ie--;)T.lens[T.have++]=N}}if(T.mode===30)break;if(T.lens[256]===0){B.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Y={bits:T.lenbits},he=g(y,T.lens,0,T.nlen,T.lencode,0,T.work,Y),T.lenbits=Y.bits,he){B.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Y={bits:T.distbits},he=g(x,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,Y),T.distbits=Y.bits,he){B.msg="invalid distances set",T.mode=30;break}if(T.mode=20,Z===6)break e;case 20:T.mode=21;case 21:if(6<=J&&258<=Q){B.next_out=ye,B.avail_out=Q,B.next_in=me,B.avail_in=J,T.hold=I,T.bits=U,m(B,de),ye=B.next_out,Te=B.output,Q=B.avail_out,me=B.next_in,ue=B.input,J=B.avail_in,I=T.hold,U=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;De=(L=T.lencode[I&(1<<T.lenbits)-1])>>>16&255,Ke=65535&L,!((Pe=L>>>24)<=U);){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(De&&(240&De)==0){for(it=Pe,ct=De,je=Ke;De=(L=T.lencode[je+((I&(1<<it+ct)-1)>>it)])>>>16&255,Ke=65535&L,!(it+(Pe=L>>>24)<=U);){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}I>>>=it,U-=it,T.back+=it}if(I>>>=Pe,U-=Pe,T.back+=Pe,T.length=Ke,De===0){T.mode=26;break}if(32&De){T.back=-1,T.mode=12;break}if(64&De){B.msg="invalid literal/length code",T.mode=30;break}T.extra=15&De,T.mode=22;case 22:if(T.extra){for(F=T.extra;U<F;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.length+=I&(1<<T.extra)-1,I>>>=T.extra,U-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;De=(L=T.distcode[I&(1<<T.distbits)-1])>>>16&255,Ke=65535&L,!((Pe=L>>>24)<=U);){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if((240&De)==0){for(it=Pe,ct=De,je=Ke;De=(L=T.distcode[je+((I&(1<<it+ct)-1)>>it)])>>>16&255,Ke=65535&L,!(it+(Pe=L>>>24)<=U);){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}I>>>=it,U-=it,T.back+=it}if(I>>>=Pe,U-=Pe,T.back+=Pe,64&De){B.msg="invalid distance code",T.mode=30;break}T.offset=Ke,T.extra=15&De,T.mode=24;case 24:if(T.extra){for(F=T.extra;U<F;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}T.offset+=I&(1<<T.extra)-1,I>>>=T.extra,U-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){B.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(Q===0)break e;if(ie=de-Q,T.offset>ie){if((ie=T.offset-ie)>T.whave&&T.sane){B.msg="invalid distance too far back",T.mode=30;break}Ee=ie>T.wnext?(ie-=T.wnext,T.wsize-ie):T.wnext-ie,ie>T.length&&(ie=T.length),Ie=T.window}else Ie=Te,Ee=ye-T.offset,ie=T.length;for(Q<ie&&(ie=Q),Q-=ie,T.length-=ie;Te[ye++]=Ie[Ee++],--ie;);T.length===0&&(T.mode=21);break;case 26:if(Q===0)break e;Te[ye++]=T.length,Q--,T.mode=21;break;case 27:if(T.wrap){for(;U<32;){if(J===0)break e;J--,I|=ue[me++]<<U,U+=8}if(de-=Q,B.total_out+=de,T.total+=de,de&&(B.adler=T.check=T.flags?h(T.check,Te,de,ye-de):u(T.check,Te,de,ye-de)),de=Q,(T.flags?I:_(I))!==T.check){B.msg="incorrect data check",T.mode=30;break}U=I=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;U<32;){if(J===0)break e;J--,I+=ue[me++]<<U,U+=8}if(I!==(4294967295&T.total)){B.msg="incorrect length check",T.mode=30;break}U=I=0}T.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return w}return B.next_out=ye,B.avail_out=Q,B.next_in=me,B.avail_in=J,T.hold=I,T.bits=U,(T.wsize||de!==B.avail_out&&T.mode<30&&(T.mode<27||Z!==4))&&pe(B,B.output,B.next_out,de-B.avail_out)?(T.mode=31,-4):(le-=B.avail_in,de-=B.avail_out,B.total_in+=le,B.total_out+=de,T.total+=de,T.wrap&&de&&(B.adler=T.check=T.flags?h(T.check,Te,de,B.next_out-de):u(T.check,Te,de,B.next_out-de)),B.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(le==0&&de===0||Z===4)&&he===k&&(he=-5),he)},l.inflateEnd=function(B){if(!B||!B.state)return w;var Z=B.state;return Z.window&&(Z.window=null),B.state=null,k},l.inflateGetHeader=function(B,Z){var T;return B&&B.state?(2&(T=B.state).wrap)==0?w:((T.head=Z).done=!1,k):w},l.inflateSetDictionary=function(B,Z){var T,ue=Z.length;return B&&B.state?(T=B.state).wrap!==0&&T.mode!==11?w:T.mode===11&&u(1,Z,ue,0)!==T.check?-3:pe(B,Z,ue,ue)?(T.mode=31,-4):(T.havedict=1,k):w},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,s,l){var c=r("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(y,x,k,w,C,S,j,_){var E,P,D,M,z,q,ne,ee,fe,pe=_.bits,B=0,Z=0,T=0,ue=0,Te=0,me=0,ye=0,J=0,Q=0,I=0,U=null,le=0,de=new c.Buf16(16),ie=new c.Buf16(16),Ee=null,Ie=0;for(B=0;B<=15;B++)de[B]=0;for(Z=0;Z<w;Z++)de[x[k+Z]]++;for(Te=pe,ue=15;1<=ue&&de[ue]===0;ue--);if(ue<Te&&(Te=ue),ue===0)return C[S++]=20971520,C[S++]=20971520,_.bits=1,0;for(T=1;T<ue&&de[T]===0;T++);for(Te<T&&(Te=T),B=J=1;B<=15;B++)if(J<<=1,(J-=de[B])<0)return-1;if(0<J&&(y===0||ue!==1))return-1;for(ie[1]=0,B=1;B<15;B++)ie[B+1]=ie[B]+de[B];for(Z=0;Z<w;Z++)x[k+Z]!==0&&(j[ie[x[k+Z]]++]=Z);if(q=y===0?(U=Ee=j,19):y===1?(U=u,le-=257,Ee=h,Ie-=257,256):(U=m,Ee=g,-1),B=T,z=S,ye=Z=I=0,D=-1,M=(Q=1<<(me=Te))-1,y===1&&852<Q||y===2&&592<Q)return 1;for(;;){for(ne=B-ye,fe=j[Z]<q?(ee=0,j[Z]):j[Z]>q?(ee=Ee[Ie+j[Z]],U[le+j[Z]]):(ee=96,0),E=1<<B-ye,T=P=1<<me;C[z+(I>>ye)+(P-=E)]=ne<<24|ee<<16|fe|0,P!==0;);for(E=1<<B-1;I&E;)E>>=1;if(E!==0?(I&=E-1,I+=E):I=0,Z++,--de[B]==0){if(B===ue)break;B=x[k+j[Z]]}if(Te<B&&(I&M)!==D){for(ye===0&&(ye=Te),z+=T,J=1<<(me=B-ye);me+ye<ue&&!((J-=de[me+ye])<=0);)me++,J<<=1;if(Q+=1<<me,y===1&&852<Q||y===2&&592<Q)return 1;C[D=I&M]=Te<<24|me<<16|z-S|0}}return I!==0&&(C[z+I]=B-ye<<24|64<<16|0),_.bits=Te,0}},{"../utils/common":41}],51:[function(r,s,l){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,s,l){var c=r("../utils/common"),u=0,h=1;function m(L){for(var K=L.length;0<=--K;)L[K]=0}var g=0,y=29,x=256,k=x+1+y,w=30,C=19,S=2*k+1,j=15,_=16,E=7,P=256,D=16,M=17,z=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=new Array(2*(k+2));m(pe);var B=new Array(2*w);m(B);var Z=new Array(512);m(Z);var T=new Array(256);m(T);var ue=new Array(y);m(ue);var Te,me,ye,J=new Array(w);function Q(L,K,ve,xe,se){this.static_tree=L,this.extra_bits=K,this.extra_base=ve,this.elems=xe,this.max_length=se,this.has_stree=L&&L.length}function I(L,K){this.dyn_tree=L,this.max_code=0,this.stat_desc=K}function U(L){return L<256?Z[L]:Z[256+(L>>>7)]}function le(L,K){L.pending_buf[L.pending++]=255&K,L.pending_buf[L.pending++]=K>>>8&255}function de(L,K,ve){L.bi_valid>_-ve?(L.bi_buf|=K<<L.bi_valid&65535,le(L,L.bi_buf),L.bi_buf=K>>_-L.bi_valid,L.bi_valid+=ve-_):(L.bi_buf|=K<<L.bi_valid&65535,L.bi_valid+=ve)}function ie(L,K,ve){de(L,ve[2*K],ve[2*K+1])}function Ee(L,K){for(var ve=0;ve|=1&L,L>>>=1,ve<<=1,0<--K;);return ve>>>1}function Ie(L,K,ve){var xe,se,Se=new Array(j+1),Re=0;for(xe=1;xe<=j;xe++)Se[xe]=Re=Re+ve[xe-1]<<1;for(se=0;se<=K;se++){var Ne=L[2*se+1];Ne!==0&&(L[2*se]=Ee(Se[Ne]++,Ne))}}function Pe(L){var K;for(K=0;K<k;K++)L.dyn_ltree[2*K]=0;for(K=0;K<w;K++)L.dyn_dtree[2*K]=0;for(K=0;K<C;K++)L.bl_tree[2*K]=0;L.dyn_ltree[2*P]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function De(L){8<L.bi_valid?le(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Ke(L,K,ve,xe){var se=2*K,Se=2*ve;return L[se]<L[Se]||L[se]===L[Se]&&xe[K]<=xe[ve]}function it(L,K,ve){for(var xe=L.heap[ve],se=ve<<1;se<=L.heap_len&&(se<L.heap_len&&Ke(K,L.heap[se+1],L.heap[se],L.depth)&&se++,!Ke(K,xe,L.heap[se],L.depth));)L.heap[ve]=L.heap[se],ve=se,se<<=1;L.heap[ve]=xe}function ct(L,K,ve){var xe,se,Se,Re,Ne=0;if(L.last_lit!==0)for(;xe=L.pending_buf[L.d_buf+2*Ne]<<8|L.pending_buf[L.d_buf+2*Ne+1],se=L.pending_buf[L.l_buf+Ne],Ne++,xe===0?ie(L,se,K):(ie(L,(Se=T[se])+x+1,K),(Re=q[Se])!==0&&de(L,se-=ue[Se],Re),ie(L,Se=U(--xe),ve),(Re=ne[Se])!==0&&de(L,xe-=J[Se],Re)),Ne<L.last_lit;);ie(L,P,K)}function je(L,K){var ve,xe,se,Se=K.dyn_tree,Re=K.stat_desc.static_tree,Ne=K.stat_desc.has_stree,$e=K.stat_desc.elems,et=-1;for(L.heap_len=0,L.heap_max=S,ve=0;ve<$e;ve++)Se[2*ve]!==0?(L.heap[++L.heap_len]=et=ve,L.depth[ve]=0):Se[2*ve+1]=0;for(;L.heap_len<2;)Se[2*(se=L.heap[++L.heap_len]=et<2?++et:0)]=1,L.depth[se]=0,L.opt_len--,Ne&&(L.static_len-=Re[2*se+1]);for(K.max_code=et,ve=L.heap_len>>1;1<=ve;ve--)it(L,Se,ve);for(se=$e;ve=L.heap[1],L.heap[1]=L.heap[L.heap_len--],it(L,Se,1),xe=L.heap[1],L.heap[--L.heap_max]=ve,L.heap[--L.heap_max]=xe,Se[2*se]=Se[2*ve]+Se[2*xe],L.depth[se]=(L.depth[ve]>=L.depth[xe]?L.depth[ve]:L.depth[xe])+1,Se[2*ve+1]=Se[2*xe+1]=se,L.heap[1]=se++,it(L,Se,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(Xe,Et){var er,Ct,nn,ht,Ve,jn,Dt=Et.dyn_tree,sn=Et.max_code,_r=Et.stat_desc.static_tree,ss=Et.stat_desc.has_stree,tr=Et.stat_desc.extra_bits,Sr=Et.stat_desc.extra_base,Vt=Et.stat_desc.max_length,qr=0;for(ht=0;ht<=j;ht++)Xe.bl_count[ht]=0;for(Dt[2*Xe.heap[Xe.heap_max]+1]=0,er=Xe.heap_max+1;er<S;er++)Vt<(ht=Dt[2*Dt[2*(Ct=Xe.heap[er])+1]+1]+1)&&(ht=Vt,qr++),Dt[2*Ct+1]=ht,sn<Ct||(Xe.bl_count[ht]++,Ve=0,Sr<=Ct&&(Ve=tr[Ct-Sr]),jn=Dt[2*Ct],Xe.opt_len+=jn*(ht+Ve),ss&&(Xe.static_len+=jn*(_r[2*Ct+1]+Ve)));if(qr!==0){do{for(ht=Vt-1;Xe.bl_count[ht]===0;)ht--;Xe.bl_count[ht]--,Xe.bl_count[ht+1]+=2,Xe.bl_count[Vt]--,qr-=2}while(0<qr);for(ht=Vt;ht!==0;ht--)for(Ct=Xe.bl_count[ht];Ct!==0;)sn<(nn=Xe.heap[--er])||(Dt[2*nn+1]!==ht&&(Xe.opt_len+=(ht-Dt[2*nn+1])*Dt[2*nn],Dt[2*nn+1]=ht),Ct--)}}(L,K),Ie(Se,et,L.bl_count)}function N(L,K,ve){var xe,se,Se=-1,Re=K[1],Ne=0,$e=7,et=4;for(Re===0&&($e=138,et=3),K[2*(ve+1)+1]=65535,xe=0;xe<=ve;xe++)se=Re,Re=K[2*(xe+1)+1],++Ne<$e&&se===Re||(Ne<et?L.bl_tree[2*se]+=Ne:se!==0?(se!==Se&&L.bl_tree[2*se]++,L.bl_tree[2*D]++):Ne<=10?L.bl_tree[2*M]++:L.bl_tree[2*z]++,Se=se,et=(Ne=0)===Re?($e=138,3):se===Re?($e=6,3):($e=7,4))}function he(L,K,ve){var xe,se,Se=-1,Re=K[1],Ne=0,$e=7,et=4;for(Re===0&&($e=138,et=3),xe=0;xe<=ve;xe++)if(se=Re,Re=K[2*(xe+1)+1],!(++Ne<$e&&se===Re)){if(Ne<et)for(;ie(L,se,L.bl_tree),--Ne!=0;);else se!==0?(se!==Se&&(ie(L,se,L.bl_tree),Ne--),ie(L,D,L.bl_tree),de(L,Ne-3,2)):Ne<=10?(ie(L,M,L.bl_tree),de(L,Ne-3,3)):(ie(L,z,L.bl_tree),de(L,Ne-11,7));Se=se,et=(Ne=0)===Re?($e=138,3):se===Re?($e=6,3):($e=7,4)}}m(J);var Y=!1;function F(L,K,ve,xe){de(L,(g<<1)+(xe?1:0),3),function(se,Se,Re,Ne){De(se),le(se,Re),le(se,~Re),c.arraySet(se.pending_buf,se.window,Se,Re,se.pending),se.pending+=Re}(L,K,ve)}l._tr_init=function(L){Y||(function(){var K,ve,xe,se,Se,Re=new Array(j+1);for(se=xe=0;se<y-1;se++)for(ue[se]=xe,K=0;K<1<<q[se];K++)T[xe++]=se;for(T[xe-1]=se,se=Se=0;se<16;se++)for(J[se]=Se,K=0;K<1<<ne[se];K++)Z[Se++]=se;for(Se>>=7;se<w;se++)for(J[se]=Se<<7,K=0;K<1<<ne[se]-7;K++)Z[256+Se++]=se;for(ve=0;ve<=j;ve++)Re[ve]=0;for(K=0;K<=143;)pe[2*K+1]=8,K++,Re[8]++;for(;K<=255;)pe[2*K+1]=9,K++,Re[9]++;for(;K<=279;)pe[2*K+1]=7,K++,Re[7]++;for(;K<=287;)pe[2*K+1]=8,K++,Re[8]++;for(Ie(pe,k+1,Re),K=0;K<w;K++)B[2*K+1]=5,B[2*K]=Ee(K,5);Te=new Q(pe,q,x+1,k,j),me=new Q(B,ne,0,w,j),ye=new Q(new Array(0),ee,0,C,E)}(),Y=!0),L.l_desc=new I(L.dyn_ltree,Te),L.d_desc=new I(L.dyn_dtree,me),L.bl_desc=new I(L.bl_tree,ye),L.bi_buf=0,L.bi_valid=0,Pe(L)},l._tr_stored_block=F,l._tr_flush_block=function(L,K,ve,xe){var se,Se,Re=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(Ne){var $e,et=4093624447;for($e=0;$e<=31;$e++,et>>>=1)if(1&et&&Ne.dyn_ltree[2*$e]!==0)return u;if(Ne.dyn_ltree[18]!==0||Ne.dyn_ltree[20]!==0||Ne.dyn_ltree[26]!==0)return h;for($e=32;$e<x;$e++)if(Ne.dyn_ltree[2*$e]!==0)return h;return u}(L)),je(L,L.l_desc),je(L,L.d_desc),Re=function(Ne){var $e;for(N(Ne,Ne.dyn_ltree,Ne.l_desc.max_code),N(Ne,Ne.dyn_dtree,Ne.d_desc.max_code),je(Ne,Ne.bl_desc),$e=C-1;3<=$e&&Ne.bl_tree[2*fe[$e]+1]===0;$e--);return Ne.opt_len+=3*($e+1)+5+5+4,$e}(L),se=L.opt_len+3+7>>>3,(Se=L.static_len+3+7>>>3)<=se&&(se=Se)):se=Se=ve+5,ve+4<=se&&K!==-1?F(L,K,ve,xe):L.strategy===4||Se===se?(de(L,2+(xe?1:0),3),ct(L,pe,B)):(de(L,4+(xe?1:0),3),function(Ne,$e,et,Xe){var Et;for(de(Ne,$e-257,5),de(Ne,et-1,5),de(Ne,Xe-4,4),Et=0;Et<Xe;Et++)de(Ne,Ne.bl_tree[2*fe[Et]+1],3);he(Ne,Ne.dyn_ltree,$e-1),he(Ne,Ne.dyn_dtree,et-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,Re+1),ct(L,L.dyn_ltree,L.dyn_dtree)),Pe(L),xe&&De(L)},l._tr_tally=function(L,K,ve){return L.pending_buf[L.d_buf+2*L.last_lit]=K>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&K,L.pending_buf[L.l_buf+L.last_lit]=255&ve,L.last_lit++,K===0?L.dyn_ltree[2*ve]++:(L.matches++,K--,L.dyn_ltree[2*(T[ve]+x+1)]++,L.dyn_dtree[2*U(K)]++),L.last_lit===L.lit_bufsize-1},l._tr_align=function(L){de(L,2,3),ie(L,P,pe),function(K){K.bi_valid===16?(le(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(r,s,l){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,s,l){(function(c){(function(u,h){if(!u.setImmediate){var m,g,y,x,k=1,w={},C=!1,S=u.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(u);j=j&&j.setTimeout?j:u,m={}.toString.call(u.process)==="[object process]"?function(D){process.nextTick(function(){E(D)})}:function(){if(u.postMessage&&!u.importScripts){var D=!0,M=u.onmessage;return u.onmessage=function(){D=!1},u.postMessage("","*"),u.onmessage=M,D}}()?(x="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",P,!1):u.attachEvent("onmessage",P),function(D){u.postMessage(x+D,"*")}):u.MessageChannel?((y=new MessageChannel).port1.onmessage=function(D){E(D.data)},function(D){y.port2.postMessage(D)}):S&&"onreadystatechange"in S.createElement("script")?(g=S.documentElement,function(D){var M=S.createElement("script");M.onreadystatechange=function(){E(D),M.onreadystatechange=null,g.removeChild(M),M=null},g.appendChild(M)}):function(D){setTimeout(E,0,D)},j.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var M=new Array(arguments.length-1),z=0;z<M.length;z++)M[z]=arguments[z+1];var q={callback:D,args:M};return w[k]=q,m(k),k++},j.clearImmediate=_}function _(D){delete w[D]}function E(D){if(C)setTimeout(E,0,D);else{var M=w[D];if(M){C=!0;try{(function(z){var q=z.callback,ne=z.args;switch(ne.length){case 0:q();break;case 1:q(ne[0]);break;case 2:q(ne[0],ne[1]);break;case 3:q(ne[0],ne[1],ne[2]);break;default:q.apply(h,ne)}})(M)}finally{_(D),C=!1}}}}function P(D){D.source===u&&typeof D.data=="string"&&D.data.indexOf(x)===0&&E(+D.data.slice(x.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(wu)),wu.exports}var Lx=Dx();const Ux=Ta(Lx);var bu={exports:{}};const Mx={},Fx=Object.freeze(Object.defineProperty({__proto__:null,default:Mx},Symbol.toStringTag,{value:"Module"})),cm=Cm(Fx);var um;function zx(){return um||(um=1,function(i,n){var r=void 0,s=function(l){return r||(r=new Promise(function(c,u){var h=typeof l<"u"?l:{},m=h.onAbort;h.onAbort=function(f){u(new Error(f)),m&&m(f)},h.postRun=h.postRun||[],h.postRun.push(function(){c(h)}),i=void 0;var g;g||=typeof h<"u"?h:{};var y=typeof window=="object",x=typeof WorkerGlobalScope<"u",k=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";g.onRuntimeInitialized=function(){function f(X,we){switch(typeof we){case"boolean":Il(X,we?1:0);break;case"number":Ki(X,we);break;case"string":Pl(X,we,-1,-1);break;case"object":if(we===null)Qi(X);else if(we.length!=null){var Fe=cs(we,An);Rl(X,Fe,we.length,-1),Qr(Fe)}else In(X,"Wrong API use : tried to return a value of an unknown type ("+we+").",-1);break;default:Qi(X)}}function v(X,we){for(var Fe=[],qe=0;qe<X;qe+=1){var Ze=ct(we+4*qe,"i32"),lt=Nl(Ze);if(lt===1||lt===2)Ze=Al(Ze);else if(lt===3)Ze=Cl(Ze);else if(lt===4){lt=Ze,Ze=El(lt),lt=Tl(lt);for(var yr=new Uint8Array(Ze),ar=0;ar<Ze;ar+=1)yr[ar]=fe[lt+ar];Ze=yr}else Ze=null;Fe.push(Ze)}return Fe}function A(X,we){this.Qa=X,this.db=we,this.Oa=1,this.lb=[]}function O(X,we){if(this.db=we,we=$e(X)+1,this.eb=fn(we),this.eb===null)throw Error("Unable to allocate memory for the SQL string");et(X,pe,this.eb,we),this.kb=this.eb,this.Za=this.pb=null}function W(X){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),X!=null){var we=this.filename,Fe="/",qe=we;if(Fe&&(Fe=typeof Fe=="string"?Fe:as(Fe),qe=we?K(Fe+"/"+we):Fe),we=jn(!0,!0),qe=zi(qe,we),X){if(typeof X=="string"){Fe=Array(X.length);for(var Ze=0,lt=X.length;Ze<lt;++Ze)Fe[Ze]=X.charCodeAt(Ze);X=Fe}cn(qe,we|146),Fe=un(qe,577),rr(Fe,X,0,X.length,0),Cn(Fe),cn(qe,we)}}this.handleError(We(this.filename,te)),this.db=ct(te,"i32"),Ji(this.db),this.fb={},this.Sa={}}var te=sr(4),ge=g.cwrap,We=ge("sqlite3_open","number",["string","number"]),tt=ge("sqlite3_close_v2","number",["number"]),Je=ge("sqlite3_exec","number",["number","string","number","number","number"]),dt=ge("sqlite3_changes","number",["number"]),Tt=ge("sqlite3_prepare_v2","number",["number","string","number","number","number"]),$a=ge("sqlite3_sql","string",["number"]),Zr=ge("sqlite3_normalized_sql","string",["number"]),Bs=ge("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Ws=ge("sqlite3_bind_text","number",["number","number","number","number","number"]),Ba=ge("sqlite3_bind_blob","number",["number","number","number","number","number"]),qs=ge("sqlite3_bind_double","number",["number","number","number"]),Hs=ge("sqlite3_bind_int","number",["number","number","number"]),Gi=ge("sqlite3_bind_parameter_index","number",["number","string"]),Qt=ge("sqlite3_step","number",["number"]),Rn=ge("sqlite3_errmsg","string",["number"]),Wa=ge("sqlite3_column_count","number",["number"]),ds=ge("sqlite3_data_count","number",["number"]),kl=ge("sqlite3_column_double","number",["number","number"]),Gs=ge("sqlite3_column_text","string",["number","number"]),qa=ge("sqlite3_column_blob","number",["number","number"]),hs=ge("sqlite3_column_bytes","number",["number","number"]),Vs=ge("sqlite3_column_type","number",["number","number"]),Vi=ge("sqlite3_column_name","string",["number","number"]),_l=ge("sqlite3_reset","number",["number"]),Sl=ge("sqlite3_clear_bindings","number",["number"]),jl=ge("sqlite3_finalize","number",["number"]),Ks=ge("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Nl=ge("sqlite3_value_type","number",["number"]),El=ge("sqlite3_value_bytes","number",["number"]),Cl=ge("sqlite3_value_text","string",["number"]),Tl=ge("sqlite3_value_blob","number",["number"]),Al=ge("sqlite3_value_double","number",["number"]),Ki=ge("sqlite3_result_double","",["number","number"]),Qi=ge("sqlite3_result_null","",["number"]),Pl=ge("sqlite3_result_text","",["number","string","number","number"]),Rl=ge("sqlite3_result_blob","",["number","number","number","number"]),Il=ge("sqlite3_result_int","",["number","number"]),In=ge("sqlite3_result_error","",["number","string","number"]),Zi=ge("sqlite3_aggregate_context","number",["number","number"]),Ji=ge("RegisterExtensionFunctions","number",["number"]),Xi=ge("sqlite3_update_hook","number",["number","number","number"]);A.prototype.bind=function(X){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(X)?this.Cb(X):X!=null&&typeof X=="object"?this.Db(X):!0},A.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var X=Qt(this.Qa);switch(X){case 100:return!0;case 101:return!1;default:throw this.db.handleError(X)}},A.prototype.wb=function(X){return X==null&&(X=this.Oa,this.Oa+=1),kl(this.Qa,X)},A.prototype.Gb=function(X){if(X==null&&(X=this.Oa,this.Oa+=1),X=Gs(this.Qa,X),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(X)},A.prototype.Hb=function(X){return X==null&&(X=this.Oa,this.Oa+=1),Gs(this.Qa,X)},A.prototype.getBlob=function(X){X==null&&(X=this.Oa,this.Oa+=1);var we=hs(this.Qa,X);X=qa(this.Qa,X);for(var Fe=new Uint8Array(we),qe=0;qe<we;qe+=1)Fe[qe]=fe[X+qe];return Fe},A.prototype.get=function(X,we){we=we||{},X!=null&&this.bind(X)&&this.step(),X=[];for(var Fe=ds(this.Qa),qe=0;qe<Fe;qe+=1)switch(Vs(this.Qa,qe)){case 1:var Ze=we.useBigInt?this.Gb(qe):this.wb(qe);X.push(Ze);break;case 2:X.push(this.wb(qe));break;case 3:X.push(this.Hb(qe));break;case 4:X.push(this.getBlob(qe));break;default:X.push(null)}return X},A.prototype.getColumnNames=function(){for(var X=[],we=Wa(this.Qa),Fe=0;Fe<we;Fe+=1)X.push(Vi(this.Qa,Fe));return X},A.prototype.getAsObject=function(X,we){X=this.get(X,we),we=this.getColumnNames();for(var Fe={},qe=0;qe<we.length;qe+=1)Fe[we[qe]]=X[qe];return Fe},A.prototype.getSQL=function(){return $a(this.Qa)},A.prototype.getNormalizedSQL=function(){return Zr(this.Qa)},A.prototype.run=function(X){return X!=null&&this.bind(X),this.step(),this.reset()},A.prototype.sb=function(X,we){we==null&&(we=this.Oa,this.Oa+=1),X=Xe(X);var Fe=cs(X,An);this.lb.push(Fe),this.db.handleError(Ws(this.Qa,we,Fe,X.length-1,0))},A.prototype.Bb=function(X,we){we==null&&(we=this.Oa,this.Oa+=1);var Fe=cs(X,An);this.lb.push(Fe),this.db.handleError(Ba(this.Qa,we,Fe,X.length,0))},A.prototype.rb=function(X,we){we==null&&(we=this.Oa,this.Oa+=1),this.db.handleError((X===(X|0)?Hs:qs)(this.Qa,we,X))},A.prototype.Eb=function(X){X==null&&(X=this.Oa,this.Oa+=1),Ba(this.Qa,X,0,0,0)},A.prototype.tb=function(X,we){switch(we==null&&(we=this.Oa,this.Oa+=1),typeof X){case"string":this.sb(X,we);return;case"number":this.rb(X,we);return;case"bigint":this.sb(X.toString(),we);return;case"boolean":this.rb(X+0,we);return;case"object":if(X===null){this.Eb(we);return}if(X.length!=null){this.Bb(X,we);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+X+")."},A.prototype.Db=function(X){var we=this;return Object.keys(X).forEach(function(Fe){var qe=Gi(we.Qa,Fe);qe!==0&&we.tb(X[Fe],qe)}),!0},A.prototype.Cb=function(X){for(var we=0;we<X.length;we+=1)this.tb(X[we],we+1);return!0},A.prototype.reset=function(){return this.freemem(),Sl(this.Qa)===0&&_l(this.Qa)===0},A.prototype.freemem=function(){for(var X;(X=this.lb.pop())!==void 0;)Qr(X)},A.prototype.free=function(){this.freemem();var X=jl(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,X},O.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var X=us(),we=sr(4);N(te),N(we);try{this.db.handleError(Bs(this.db.db,this.kb,-1,te,we)),this.kb=ct(we,"i32");var Fe=ct(te,"i32");return Fe===0?(this.mb(),{done:!0}):(this.Za=new A(Fe,this.db),this.db.fb[Fe]=this.Za,{value:this.Za,done:!1})}catch(qe){throw this.pb=F(this.kb),this.mb(),qe}finally{Pn(X)}},O.prototype.mb=function(){Qr(this.eb),this.eb=null},O.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:F(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(O.prototype[Symbol.iterator]=function(){return this}),W.prototype.run=function(X,we){if(!this.db)throw"Database closed";if(we){X=this.prepare(X,we);try{X.step()}finally{X.free()}}else this.handleError(Je(this.db,X,0,0,te));return this},W.prototype.exec=function(X,we,Fe){if(!this.db)throw"Database closed";var qe=us(),Ze=null;try{var lt=Fs(X),yr=sr(4);for(X=[];ct(lt,"i8")!==0;){N(te),N(yr),this.handleError(Bs(this.db,lt,-1,te,yr));var ar=ct(te,"i32");if(lt=ct(yr,"i32"),ar!==0){var Ut=null;for(Ze=new A(ar,this),we!=null&&Ze.bind(we);Ze.step();)Ut===null&&(Ut={columns:Ze.getColumnNames(),values:[]},X.push(Ut)),Ut.values.push(Ze.get(null,Fe));Ze.free()}}return X}catch(Mt){throw Ze&&Ze.free(),Mt}finally{Pn(qe)}},W.prototype.each=function(X,we,Fe,qe,Ze){typeof we=="function"&&(qe=Fe,Fe=we,we=void 0),X=this.prepare(X,we);try{for(;X.step();)Fe(X.getAsObject(null,Ze))}finally{X.free()}if(typeof qe=="function")return qe()},W.prototype.prepare=function(X,we){if(N(te),this.handleError(Tt(this.db,X,-1,te,0)),X=ct(te,"i32"),X===0)throw"Nothing to prepare";var Fe=new A(X,this);return we!=null&&Fe.bind(we),this.fb[X]=Fe},W.prototype.iterateStatements=function(X){return new O(X,this)},W.prototype.export=function(){Object.values(this.fb).forEach(function(we){we.free()}),Object.values(this.Sa).forEach(pr),this.Sa={},this.handleError(tt(this.db));var X=wl(this.filename);return this.handleError(We(this.filename,te)),this.db=ct(te,"i32"),Ji(this.db),X},W.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(X){X.free()}),Object.values(this.Sa).forEach(pr),this.Sa={},this.Ya&&(pr(this.Ya),this.Ya=void 0),this.handleError(tt(this.db)),$i("/"+this.filename),this.db=null)},W.prototype.handleError=function(X){if(X===0)return null;throw X=Rn(this.db),Error(X)},W.prototype.getRowsModified=function(){return dt(this.db)},W.prototype.create_function=function(X,we){Object.prototype.hasOwnProperty.call(this.Sa,X)&&(pr(this.Sa[X]),delete this.Sa[X]);var Fe=nr(function(qe,Ze,lt){Ze=v(Ze,lt);try{var yr=we.apply(null,Ze)}catch(ar){In(qe,ar,-1);return}f(qe,yr)},"viii");return this.Sa[X]=Fe,this.handleError(Ks(this.db,X,we.length,1,0,Fe,0,0,0)),this},W.prototype.create_aggregate=function(X,we){var Fe=we.init||function(){return null},qe=we.finalize||function(Ut){return Ut},Ze=we.step;if(!Ze)throw"An aggregate function must have a step function in "+X;var lt={};Object.hasOwnProperty.call(this.Sa,X)&&(pr(this.Sa[X]),delete this.Sa[X]),we=X+"__finalize",Object.hasOwnProperty.call(this.Sa,we)&&(pr(this.Sa[we]),delete this.Sa[we]);var yr=nr(function(Ut,Mt,Ha){var Jr=Zi(Ut,1);Object.hasOwnProperty.call(lt,Jr)||(lt[Jr]=Fe()),Mt=v(Mt,Ha),Mt=[lt[Jr]].concat(Mt);try{lt[Jr]=Ze.apply(null,Mt)}catch(Yi){delete lt[Jr],In(Ut,Yi,-1)}},"viii"),ar=nr(function(Ut){var Mt=Zi(Ut,1);try{var Ha=qe(lt[Mt])}catch(Jr){delete lt[Mt],In(Ut,Jr,-1);return}f(Ut,Ha),delete lt[Mt]},"vi");return this.Sa[X]=yr,this.Sa[we]=ar,this.handleError(Ks(this.db,X,Ze.length-1,1,0,0,yr,ar,0)),this},W.prototype.updateHook=function(X){this.Ya&&(Xi(this.db,0,0),pr(this.Ya),this.Ya=void 0),X&&(this.Ya=nr(function(we,Fe,qe,Ze,lt){switch(Fe){case 18:we="insert";break;case 23:we="update";break;case 9:we="delete";break;default:throw"unknown operationCode in updateHook callback: "+Fe}if(qe=qe?Y(pe,qe):"",Ze=Ze?Y(pe,Ze):"",lt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";X(we,qe,Ze,Number(lt))},"viiiij"),Xi(this.db,this.Ya,0))},g.Database=W};var w={...g},C="./this.program",S=(f,v)=>{throw v},j="",_,E;if(k){var P=cm;j=__dirname+"/",E=f=>(f=ye(f)?new URL(f):f,P.readFileSync(f)),_=async f=>(f=ye(f)?new URL(f):f,P.readFileSync(f,void 0)),!g.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),i.exports=g,S=(f,v)=>{throw process.exitCode=f,v}}else(y||x)&&(x?j=self.location.href:typeof document<"u"&&document.currentScript&&(j=document.currentScript.src),j=j.startsWith("blob:")?"":j.slice(0,j.replace(/[?#].*/,"").lastIndexOf("/")+1),x&&(E=f=>{var v=new XMLHttpRequest;return v.open("GET",f,!1),v.responseType="arraybuffer",v.send(null),new Uint8Array(v.response)}),_=async f=>{if(ye(f))return new Promise((A,O)=>{var W=new XMLHttpRequest;W.open("GET",f,!0),W.responseType="arraybuffer",W.onload=()=>{W.status==200||W.status==0&&W.response?A(W.response):O(W.status)},W.onerror=O,W.send(null)});var v=await fetch(f,{credentials:"same-origin"});if(v.ok)return v.arrayBuffer();throw Error(v.status+" : "+v.url)});var D=g.print||console.log.bind(console),M=g.printErr||console.error.bind(console);Object.assign(g,w),w=null,g.thisProgram&&(C=g.thisProgram);var z=g.wasmBinary,q,ne=!1,ee,fe,pe,B,Z,T,ue,Te,me,ye=f=>f.startsWith("file://");function J(){var f=q.buffer;g.HEAP8=fe=new Int8Array(f),g.HEAP16=B=new Int16Array(f),g.HEAPU8=pe=new Uint8Array(f),g.HEAPU16=new Uint16Array(f),g.HEAP32=Z=new Int32Array(f),g.HEAPU32=T=new Uint32Array(f),g.HEAPF32=ue=new Float32Array(f),g.HEAPF64=me=new Float64Array(f),g.HEAP64=Te=new BigInt64Array(f),g.HEAPU64=new BigUint64Array(f)}var Q=0,I=null;function U(f){throw g.onAbort?.(f),f="Aborted("+f+")",M(f),ne=!0,new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info.")}var le;async function de(f){if(!z)try{var v=await _(f);return new Uint8Array(v)}catch{}if(f==le&&z)f=new Uint8Array(z);else if(E)f=E(f);else throw"both async and sync fetching of the wasm failed";return f}async function ie(f,v){try{var A=await de(f);return await WebAssembly.instantiate(A,v)}catch(O){M(`failed to asynchronously prepare wasm: ${O}`),U(O)}}async function Ee(f){var v=le;if(!z&&typeof WebAssembly.instantiateStreaming=="function"&&!ye(v)&&!k)try{var A=fetch(v,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(A,f)}catch(O){M(`wasm streaming compile failed: ${O}`),M("falling back to ArrayBuffer instantiation")}return ie(v,f)}class Ie{name="ExitStatus";constructor(v){this.message=`Program terminated with exit(${v})`,this.status=v}}var Pe=f=>{for(;0<f.length;)f.shift()(g)},De=[],Ke=[],it=()=>{var f=g.preRun.shift();Ke.unshift(f)};function ct(f,v="i8"){switch(v.endsWith("*")&&(v="*"),v){case"i1":return fe[f];case"i8":return fe[f];case"i16":return B[f>>1];case"i32":return Z[f>>2];case"i64":return Te[f>>3];case"float":return ue[f>>2];case"double":return me[f>>3];case"*":return T[f>>2];default:U(`invalid type for getValue: ${v}`)}}var je=g.noExitRuntime||!0;function N(f){var v="i32";switch(v.endsWith("*")&&(v="*"),v){case"i1":fe[f]=0;break;case"i8":fe[f]=0;break;case"i16":B[f>>1]=0;break;case"i32":Z[f>>2]=0;break;case"i64":Te[f>>3]=BigInt(0);break;case"float":ue[f>>2]=0;break;case"double":me[f>>3]=0;break;case"*":T[f>>2]=0;break;default:U(`invalid type for setValue: ${v}`)}}var he=typeof TextDecoder<"u"?new TextDecoder:void 0,Y=(f,v=0,A=NaN)=>{var O=v+A;for(A=v;f[A]&&!(A>=O);)++A;if(16<A-v&&f.buffer&&he)return he.decode(f.subarray(v,A));for(O="";v<A;){var W=f[v++];if(W&128){var te=f[v++]&63;if((W&224)==192)O+=String.fromCharCode((W&31)<<6|te);else{var ge=f[v++]&63;W=(W&240)==224?(W&15)<<12|te<<6|ge:(W&7)<<18|te<<12|ge<<6|f[v++]&63,65536>W?O+=String.fromCharCode(W):(W-=65536,O+=String.fromCharCode(55296|W>>10,56320|W&1023))}}else O+=String.fromCharCode(W)}return O},F=(f,v)=>f?Y(pe,f,v):"",L=(f,v)=>{for(var A=0,O=f.length-1;0<=O;O--){var W=f[O];W==="."?f.splice(O,1):W===".."?(f.splice(O,1),A++):A&&(f.splice(O,1),A--)}if(v)for(;A;A--)f.unshift("..");return f},K=f=>{var v=f.charAt(0)==="/",A=f.slice(-1)==="/";return(f=L(f.split("/").filter(O=>!!O),!v).join("/"))||v||(f="."),f&&A&&(f+="/"),(v?"/":"")+f},ve=f=>{var v=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(f).slice(1);return f=v[0],v=v[1],!f&&!v?".":(v&&=v.slice(0,-1),f+v)},xe=f=>f&&f.match(/([^\/]+|\/)\/*$/)[1],se=()=>{if(k){var f=cm;return v=>f.randomFillSync(v)}return v=>crypto.getRandomValues(v)},Se=f=>{(Se=se())(f)},Re=(...f)=>{for(var v="",A=!1,O=f.length-1;-1<=O&&!A;O--){if(A=0<=O?f[O]:"/",typeof A!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!A)return"";v=A+"/"+v,A=A.charAt(0)==="/"}return v=L(v.split("/").filter(W=>!!W),!A).join("/"),(A?"/":"")+v||"."},Ne=[],$e=f=>{for(var v=0,A=0;A<f.length;++A){var O=f.charCodeAt(A);127>=O?v++:2047>=O?v+=2:55296<=O&&57343>=O?(v+=4,++A):v+=3}return v},et=(f,v,A,O)=>{if(!(0<O))return 0;var W=A;O=A+O-1;for(var te=0;te<f.length;++te){var ge=f.charCodeAt(te);if(55296<=ge&&57343>=ge){var We=f.charCodeAt(++te);ge=65536+((ge&1023)<<10)|We&1023}if(127>=ge){if(A>=O)break;v[A++]=ge}else{if(2047>=ge){if(A+1>=O)break;v[A++]=192|ge>>6}else{if(65535>=ge){if(A+2>=O)break;v[A++]=224|ge>>12}else{if(A+3>=O)break;v[A++]=240|ge>>18,v[A++]=128|ge>>12&63}v[A++]=128|ge>>6&63}v[A++]=128|ge&63}}return v[A]=0,A-W},Xe=(f,v)=>{var A=Array($e(f)+1);return f=et(f,A,0,A.length),v&&(A.length=f),A},Et=[];function er(f,v){Et[f]={input:[],output:[],cb:v},Oa(f,Ct)}var Ct={open(f){var v=Et[f.node.rdev];if(!v)throw new Ae(43);f.tty=v,f.seekable=!1},close(f){f.tty.cb.fsync(f.tty)},fsync(f){f.tty.cb.fsync(f.tty)},read(f,v,A,O){if(!f.tty||!f.tty.cb.xb)throw new Ae(60);for(var W=0,te=0;te<O;te++){try{var ge=f.tty.cb.xb(f.tty)}catch{throw new Ae(29)}if(ge===void 0&&W===0)throw new Ae(6);if(ge==null)break;W++,v[A+te]=ge}return W&&(f.node.atime=Date.now()),W},write(f,v,A,O){if(!f.tty||!f.tty.cb.qb)throw new Ae(60);try{for(var W=0;W<O;W++)f.tty.cb.qb(f.tty,v[A+W])}catch{throw new Ae(29)}return O&&(f.node.mtime=f.node.ctime=Date.now()),W}},nn={xb(){e:{if(!Ne.length){var f=null;if(k){var v=Buffer.alloc(256),A=0,O=process.stdin.fd;try{A=P.readSync(O,v,0,256)}catch(W){if(W.toString().includes("EOF"))A=0;else throw W}0<A&&(f=v.slice(0,A).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(f=window.prompt("Input: "),f!==null&&(f+=`
`));if(!f){f=null;break e}Ne=Xe(f,!0)}f=Ne.shift()}return f},qb(f,v){v===null||v===10?(D(Y(f.output)),f.output=[]):v!=0&&f.output.push(v)},fsync(f){0<f.output?.length&&(D(Y(f.output)),f.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},ht={qb(f,v){v===null||v===10?(M(Y(f.output)),f.output=[]):v!=0&&f.output.push(v)},fsync(f){0<f.output?.length&&(M(Y(f.output)),f.output=[])}},Ve={Wa:null,Xa(){return Ve.createNode(null,"/",16895,0)},createNode(f,v,A,O){if((A&61440)===24576||(A&61440)===4096)throw new Ae(63);return Ve.Wa||(Ve.Wa={dir:{node:{Ta:Ve.La.Ta,Ua:Ve.La.Ua,lookup:Ve.La.lookup,hb:Ve.La.hb,rename:Ve.La.rename,unlink:Ve.La.unlink,rmdir:Ve.La.rmdir,readdir:Ve.La.readdir,symlink:Ve.La.symlink},stream:{Va:Ve.Ma.Va}},file:{node:{Ta:Ve.La.Ta,Ua:Ve.La.Ua},stream:{Va:Ve.Ma.Va,read:Ve.Ma.read,write:Ve.Ma.write,ib:Ve.Ma.ib,jb:Ve.Ma.jb}},link:{node:{Ta:Ve.La.Ta,Ua:Ve.La.Ua,readlink:Ve.La.readlink},stream:{}},ub:{node:{Ta:Ve.La.Ta,Ua:Ve.La.Ua},stream:Fi}}),A=Nn(f,v,A,O),$t(A.mode)?(A.La=Ve.Wa.dir.node,A.Ma=Ve.Wa.dir.stream,A.Na={}):(A.mode&61440)===32768?(A.La=Ve.Wa.file.node,A.Ma=Ve.Wa.file.stream,A.Ra=0,A.Na=null):(A.mode&61440)===40960?(A.La=Ve.Wa.link.node,A.Ma=Ve.Wa.link.stream):(A.mode&61440)===8192&&(A.La=Ve.Wa.ub.node,A.Ma=Ve.Wa.ub.stream),A.atime=A.mtime=A.ctime=Date.now(),f&&(f.Na[v]=A,f.atime=f.mtime=f.ctime=A.atime),A},Sb(f){return f.Na?f.Na.subarray?f.Na.subarray(0,f.Ra):new Uint8Array(f.Na):new Uint8Array(0)},La:{Ta(f){var v={};return v.dev=(f.mode&61440)===8192?f.id:1,v.ino=f.id,v.mode=f.mode,v.nlink=1,v.uid=0,v.gid=0,v.rdev=f.rdev,$t(f.mode)?v.size=4096:(f.mode&61440)===32768?v.size=f.Ra:(f.mode&61440)===40960?v.size=f.link.length:v.size=0,v.atime=new Date(f.atime),v.mtime=new Date(f.mtime),v.ctime=new Date(f.ctime),v.blksize=4096,v.blocks=Math.ceil(v.size/v.blksize),v},Ua(f,v){for(var A of["mode","atime","mtime","ctime"])v[A]!=null&&(f[A]=v[A]);v.size!==void 0&&(v=v.size,f.Ra!=v&&(v==0?(f.Na=null,f.Ra=0):(A=f.Na,f.Na=new Uint8Array(v),A&&f.Na.set(A.subarray(0,Math.min(v,f.Ra))),f.Ra=v)))},lookup(){throw Ve.vb},hb(f,v,A,O){return Ve.createNode(f,v,A,O)},rename(f,v,A){try{var O=Rr(v,A)}catch{}if(O){if($t(f.mode))for(var W in O.Na)throw new Ae(55);an(O)}delete f.parent.Na[f.name],v.Na[A]=f,f.name=A,v.ctime=v.mtime=f.parent.ctime=f.parent.mtime=Date.now()},unlink(f,v){delete f.Na[v],f.ctime=f.mtime=Date.now()},rmdir(f,v){var A=Rr(f,v),O;for(O in A.Na)throw new Ae(55);delete f.Na[v],f.ctime=f.mtime=Date.now()},readdir(f){return[".","..",...Object.keys(f.Na)]},symlink(f,v,A){return f=Ve.createNode(f,v,41471,0),f.link=A,f},readlink(f){if((f.mode&61440)!==40960)throw new Ae(28);return f.link}},Ma:{read(f,v,A,O,W){var te=f.node.Na;if(W>=f.node.Ra)return 0;if(f=Math.min(f.node.Ra-W,O),8<f&&te.subarray)v.set(te.subarray(W,W+f),A);else for(O=0;O<f;O++)v[A+O]=te[W+O];return f},write(f,v,A,O,W,te){if(v.buffer===fe.buffer&&(te=!1),!O)return 0;if(f=f.node,f.mtime=f.ctime=Date.now(),v.subarray&&(!f.Na||f.Na.subarray)){if(te)return f.Na=v.subarray(A,A+O),f.Ra=O;if(f.Ra===0&&W===0)return f.Na=v.slice(A,A+O),f.Ra=O;if(W+O<=f.Ra)return f.Na.set(v.subarray(A,A+O),W),O}te=W+O;var ge=f.Na?f.Na.length:0;if(ge>=te||(te=Math.max(te,ge*(1048576>ge?2:1.125)>>>0),ge!=0&&(te=Math.max(te,256)),ge=f.Na,f.Na=new Uint8Array(te),0<f.Ra&&f.Na.set(ge.subarray(0,f.Ra),0)),f.Na.subarray&&v.subarray)f.Na.set(v.subarray(A,A+O),W);else for(te=0;te<O;te++)f.Na[W+te]=v[A+te];return f.Ra=Math.max(f.Ra,W+O),O},Va(f,v,A){if(A===1?v+=f.position:A===2&&(f.node.mode&61440)===32768&&(v+=f.node.Ra),0>v)throw new Ae(28);return v},ib(f,v,A,O,W){if((f.node.mode&61440)!==32768)throw new Ae(43);if(f=f.node.Na,W&2||!f||f.buffer!==fe.buffer){W=!0,O=65536*Math.ceil(v/65536);var te=Or(65536,O);if(te&&pe.fill(0,te,te+O),O=te,!O)throw new Ae(48);f&&((0<A||A+v<f.length)&&(f.subarray?f=f.subarray(A,A+v):f=Array.prototype.slice.call(f,A,A+v)),fe.set(f,O))}else W=!1,O=f.byteOffset;return{Kb:O,Ab:W}},jb(f,v,A,O){return Ve.Ma.write(f,v,0,O,A,!1),0}}},jn=(f,v)=>{var A=0;return f&&(A|=365),v&&(A|=146),A},Dt=null,sn={},_r=[],ss=1,tr=null,Sr=!1,Vt=!0,qr={},Ae=class{name="ErrnoError";constructor(f){this.Pa=f}},Li=class{gb={};node=null;get flags(){return this.gb.flags}set flags(f){this.gb.flags=f}get position(){return this.gb.position}set position(f){this.gb.position=f}},Ui=class{La={};Ma={};ab=null;constructor(f,v,A,O){f||=this,this.parent=f,this.Xa=f.Xa,this.id=ss++,this.name=v,this.mode=A,this.rdev=O,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(f){f?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(f){f?this.mode|=146:this.mode&=-147}};function Kt(f,v={}){if(!f)throw new Ae(44);v.nb??(v.nb=!0),f.charAt(0)==="/"||(f="//"+f);var A=0;e:for(;40>A;A++){f=f.split("/").filter(We=>!!We);for(var O=Dt,W="/",te=0;te<f.length;te++){var ge=te===f.length-1;if(ge&&v.parent)break;if(f[te]!==".")if(f[te]==="..")W=ve(W),O=O.parent;else{W=K(W+"/"+f[te]);try{O=Rr(O,f[te])}catch(We){if(We?.Pa===44&&ge&&v.Jb)return{path:W};throw We}if(!O.ab||ge&&!v.nb||(O=O.ab.root),(O.mode&61440)===40960&&(!ge||v.$a)){if(!O.La.readlink)throw new Ae(52);O=O.La.readlink(O),O.charAt(0)==="/"||(O=ve(W)+"/"+O),f=O+"/"+f.slice(te+1).join("/");continue e}}}return{path:W,node:O}}throw new Ae(32)}function as(f){for(var v;;){if(f===f.parent)return f=f.Xa.zb,v?f[f.length-1]!=="/"?`${f}/${v}`:f+v:f;v=v?`${f.name}/${v}`:f.name,f=f.parent}}function Rs(f,v){for(var A=0,O=0;O<v.length;O++)A=(A<<5)-A+v.charCodeAt(O)|0;return(f+A>>>0)%tr.length}function an(f){var v=Rs(f.parent.id,f.name);if(tr[v]===f)tr[v]=f.bb;else for(v=tr[v];v;){if(v.bb===f){v.bb=f.bb;break}v=v.bb}}function Rr(f,v){var A=$t(f.mode)?(A=Ir(f,"x"))?A:f.La.lookup?0:2:54;if(A)throw new Ae(A);for(A=tr[Rs(f.id,v)];A;A=A.bb){var O=A.name;if(A.parent.id===f.id&&O===v)return A}return f.La.lookup(f,v)}function Nn(f,v,A,O){return f=new Ui(f,v,A,O),v=Rs(f.parent.id,f.name),f.bb=tr[v],tr[v]=f}function $t(f){return(f&61440)===16384}function En(f){var v=["r","w","rw"][f&3];return f&512&&(v+="w"),v}function Ir(f,v){if(Vt)return 0;if(!v.includes("r")||f.mode&292){if(v.includes("w")&&!(f.mode&146)||v.includes("x")&&!(f.mode&73))return 2}else return 2;return 0}function is(f,v){if(!$t(f.mode))return 54;try{return Rr(f,v),20}catch{}return Ir(f,"wx")}function Is(f,v,A){try{var O=Rr(f,v)}catch(W){return W.Pa}if(f=Ir(f,"wx"))return f;if(A){if(!$t(O.mode))return 54;if(O===O.parent||as(O)==="/")return 10}else if($t(O.mode))return 31;return 0}function Os(f){if(!f)throw new Ae(63);return f}function Lt(f){if(f=_r[f],!f)throw new Ae(8);return f}function Mi(f,v=-1){if(f=Object.assign(new Li,f),v==-1)e:{for(v=0;4096>=v;v++)if(!_r[v])break e;throw new Ae(33)}return f.fd=v,_r[v]=f}function on(f,v=-1){return f=Mi(f,v),f.Ma?.Rb?.(f),f}function Ds(f,v,A){var O=f?.Ma.Ua;f=O?f:v,O??=v.La.Ua,Os(O),O(f,A)}var Fi={open(f){f.Ma=sn[f.node.rdev].Ma,f.Ma.open?.(f)},Va(){throw new Ae(70)}};function Oa(f,v){sn[f]={Ma:v}}function Da(f,v){var A=v==="/";if(A&&Dt)throw new Ae(10);if(!A&&v){var O=Kt(v,{nb:!1});if(v=O.path,O=O.node,O.ab)throw new Ae(10);if(!$t(O.mode))throw new Ae(54)}v={type:f,Wb:{},zb:v,Ib:[]},f=f.Xa(v),f.Xa=v,v.root=f,A?Dt=f:O&&(O.ab=v,O.Xa&&O.Xa.Ib.push(v))}function os(f,v,A){var O=Kt(f,{parent:!0}).node;if(f=xe(f),!f)throw new Ae(28);if(f==="."||f==="..")throw new Ae(20);var W=is(O,f);if(W)throw new Ae(W);if(!O.La.hb)throw new Ae(63);return O.La.hb(O,f,v,A)}function zi(f,v=438){return os(f,v&4095|32768,0)}function fr(f,v=511){return os(f,v&1023|16384,0)}function Ls(f,v,A){typeof A>"u"&&(A=v,v=438),os(f,v|8192,A)}function La(f,v){if(!Re(f))throw new Ae(44);var A=Kt(v,{parent:!0}).node;if(!A)throw new Ae(44);v=xe(v);var O=is(A,v);if(O)throw new Ae(O);if(!A.La.symlink)throw new Ae(63);A.La.symlink(A,v,f)}function yt(f){var v=Kt(f,{parent:!0}).node;f=xe(f);var A=Rr(v,f),O=Is(v,f,!0);if(O)throw new Ae(O);if(!v.La.rmdir)throw new Ae(63);if(A.ab)throw new Ae(10);v.La.rmdir(v,f),an(A)}function $i(f){var v=Kt(f,{parent:!0}).node;if(!v)throw new Ae(44);f=xe(f);var A=Rr(v,f),O=Is(v,f,!1);if(O)throw new Ae(O);if(!v.La.unlink)throw new Ae(63);if(A.ab)throw new Ae(10);v.La.unlink(v,f),an(A)}function ln(f,v){return f=Kt(f,{$a:!v}).node,Os(f.La.Ta)(f)}function Ua(f,v,A,O){Ds(f,v,{mode:A&4095|v.mode&-4096,ctime:Date.now(),Fb:O})}function cn(f,v){f=typeof f=="string"?Kt(f,{$a:!0}).node:f,Ua(null,f,v)}function Bi(f,v,A){if($t(v.mode))throw new Ae(31);if((v.mode&61440)!==32768)throw new Ae(28);var O=Ir(v,"w");if(O)throw new Ae(O);Ds(f,v,{size:A,timestamp:Date.now()})}function un(f,v,A=438){if(f==="")throw new Ae(44);if(typeof v=="string"){var O={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[v];if(typeof O>"u")throw Error(`Unknown file open mode: ${v}`);v=O}if(A=v&64?A&4095|32768:0,typeof f=="object")O=f;else{var W=f.endsWith("/");f=Kt(f,{$a:!(v&131072),Jb:!0}),O=f.node,f=f.path}var te=!1;if(v&64)if(O){if(v&128)throw new Ae(20)}else{if(W)throw new Ae(31);O=os(f,A|511,0),te=!0}if(!O)throw new Ae(44);if((O.mode&61440)===8192&&(v&=-513),v&65536&&!$t(O.mode))throw new Ae(54);if(!te&&(W=O?(O.mode&61440)===40960?32:$t(O.mode)&&(En(v)!=="r"||v&576)?31:Ir(O,En(v)):44))throw new Ae(W);return v&512&&!te&&(W=O,W=typeof W=="string"?Kt(W,{$a:!0}).node:W,Bi(null,W,0)),v&=-131713,W=Mi({node:O,path:as(O),flags:v,seekable:!0,position:0,Ma:O.Ma,Lb:[],error:!1}),W.Ma.open&&W.Ma.open(W),te&&cn(O,A&511),!g.logReadFiles||v&1||f in qr||(qr[f]=1),W}function Cn(f){if(f.fd===null)throw new Ae(8);f.ob&&(f.ob=null);try{f.Ma.close&&f.Ma.close(f)}catch(v){throw v}finally{_r[f.fd]=null}f.fd=null}function mr(f,v,A){if(f.fd===null)throw new Ae(8);if(!f.seekable||!f.Ma.Va)throw new Ae(70);if(A!=0&&A!=1&&A!=2)throw new Ae(28);f.position=f.Ma.Va(f,v,A),f.Lb=[]}function Wi(f,v,A,O,W){if(0>O||0>W)throw new Ae(28);if(f.fd===null)throw new Ae(8);if((f.flags&2097155)===1)throw new Ae(8);if($t(f.node.mode))throw new Ae(31);if(!f.Ma.read)throw new Ae(28);var te=typeof W<"u";if(!te)W=f.position;else if(!f.seekable)throw new Ae(70);return v=f.Ma.read(f,v,A,O,W),te||(f.position+=v),v}function rr(f,v,A,O,W){if(0>O||0>W)throw new Ae(28);if(f.fd===null)throw new Ae(8);if((f.flags&2097155)===0)throw new Ae(8);if($t(f.node.mode))throw new Ae(31);if(!f.Ma.write)throw new Ae(28);f.seekable&&f.flags&1024&&mr(f,0,2);var te=typeof W<"u";if(!te)W=f.position;else if(!f.seekable)throw new Ae(70);return v=f.Ma.write(f,v,A,O,W,void 0),te||(f.position+=v),v}function wl(f){var v,A=un(f,A||0);f=ln(f).size;var O=new Uint8Array(f);return Wi(A,O,0,f,0),v=O,Cn(A),v}function Hr(f,v,A){f=K("/dev/"+f);var O=jn(!!v,!!A);Hr.yb??(Hr.yb=64);var W=Hr.yb++<<8|0;Oa(W,{open(te){te.seekable=!1},close(){A?.buffer?.length&&A(10)},read(te,ge,We,tt){for(var Je=0,dt=0;dt<tt;dt++){try{var Tt=v()}catch{throw new Ae(29)}if(Tt===void 0&&Je===0)throw new Ae(6);if(Tt==null)break;Je++,ge[We+dt]=Tt}return Je&&(te.node.atime=Date.now()),Je},write(te,ge,We,tt){for(var Je=0;Je<tt;Je++)try{A(ge[We+Je])}catch{throw new Ae(29)}return tt&&(te.node.mtime=te.node.ctime=Date.now()),Je}}),Ls(f,O,W)}var ut={};function jr(f,v,A){if(v.charAt(0)==="/")return v;if(f=f===-100?"/":Lt(f).path,v.length==0){if(!A)throw new Ae(44);return f}return f+"/"+v}function dn(f,v){Z[f>>2]=v.dev,Z[f+4>>2]=v.mode,T[f+8>>2]=v.nlink,Z[f+12>>2]=v.uid,Z[f+16>>2]=v.gid,Z[f+20>>2]=v.rdev,Te[f+24>>3]=BigInt(v.size),Z[f+32>>2]=4096,Z[f+36>>2]=v.blocks;var A=v.atime.getTime(),O=v.mtime.getTime(),W=v.ctime.getTime();return Te[f+40>>3]=BigInt(Math.floor(A/1e3)),T[f+48>>2]=A%1e3*1e6,Te[f+56>>3]=BigInt(Math.floor(O/1e3)),T[f+64>>2]=O%1e3*1e6,Te[f+72>>3]=BigInt(Math.floor(W/1e3)),T[f+80>>2]=W%1e3*1e6,Te[f+88>>3]=BigInt(v.ino),0}var Gr=void 0,hn=()=>{var f=Z[+Gr>>2];return Gr+=4,f},Ma=0,bl=[0,31,60,91,121,152,182,213,244,274,305,335],Fa=[0,31,59,90,120,151,181,212,243,273,304,334],Tn={},Us=f=>{ee=f,je||0<Ma||(g.onExit?.(f),ne=!0),S(f,new Ie(f))},ls=f=>{if(!ne)try{if(f(),!(je||0<Ma))try{ee=f=ee,Us(f)}catch(v){v instanceof Ie||v=="unwind"||S(1,v)}}catch(v){v instanceof Ie||v=="unwind"||S(1,v)}},za={},Ms=()=>{if(!st){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},v;for(v in za)za[v]===void 0?delete f[v]:f[v]=za[v];var A=[];for(v in f)A.push(`${v}=${f[v]}`);st=A}return st},st,Fs=f=>{var v=$e(f)+1,A=sr(v);return et(f,pe,A,v),A},qi=(f,v,A,O)=>{var W={string:Je=>{var dt=0;return Je!=null&&Je!==0&&(dt=Fs(Je)),dt},array:Je=>{var dt=sr(Je.length);return fe.set(Je,dt),dt}};f=g["_"+f];var te=[],ge=0;if(O)for(var We=0;We<O.length;We++){var tt=W[A[We]];tt?(ge===0&&(ge=us()),te[We]=tt(O[We])):te[We]=O[We]}return A=f(...te),A=function(Je){return ge!==0&&Pn(ge),v==="string"?Je?Y(pe,Je):"":v==="boolean"?!!Je:Je}(A)},An=0,cs=(f,v)=>(v=v==1?sr(f.length):fn(f.length),f.subarray||f.slice||(f=new Uint8Array(f)),pe.set(f,v),v),Vr,zs=[],gr,pr=f=>{Vr.delete(gr.get(f)),gr.set(f,null),zs.push(f)},nr=(f,v)=>{if(!Vr){Vr=new WeakMap;var A=gr.length;if(Vr)for(var O=0;O<0+A;O++){var W=gr.get(O);W&&Vr.set(W,O)}}if(A=Vr.get(f)||0)return A;if(zs.length)A=zs.pop();else{try{gr.grow(1)}catch(tt){throw tt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":tt}A=gr.length-1}try{gr.set(A,f)}catch(tt){if(!(tt instanceof TypeError))throw tt;if(typeof WebAssembly.Function=="function"){var te=WebAssembly.Function;O={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},W={parameters:[],results:v[0]=="v"?[]:[O[v[0]]]};for(var ge=1;ge<v.length;++ge)W.parameters.push(O[v[ge]]);v=new te(W,f)}else{O=[1],W=v.slice(0,1),v=v.slice(1),ge={i:127,p:127,j:126,f:125,d:124,e:111},O.push(96);var We=v.length;128>We?O.push(We):O.push(We%128|128,We>>7);for(te of v)O.push(ge[te]);W=="v"?O.push(0):O.push(1,ge[W]),v=[0,97,115,109,1,0,0,0,1],te=O.length,128>te?v.push(te):v.push(te%128|128,te>>7),v.push(...O),v.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),v=new WebAssembly.Module(new Uint8Array(v)),v=new WebAssembly.Instance(v,{e:{f}}).exports.f}gr.set(A,v)}return Vr.set(f,A),A};tr=Array(4096),Da(Ve,"/"),fr("/tmp"),fr("/home"),fr("/home/web_user"),function(){fr("/dev"),Oa(259,{read:()=>0,write:(O,W,te,ge)=>ge,Va:()=>0}),Ls("/dev/null",259),er(1280,nn),er(1536,ht),Ls("/dev/tty",1280),Ls("/dev/tty1",1536);var f=new Uint8Array(1024),v=0,A=()=>(v===0&&(Se(f),v=f.byteLength),f[--v]);Hr("random",A),Hr("urandom",A),fr("/dev/shm"),fr("/dev/shm/tmp")}(),function(){fr("/proc");var f=fr("/proc/self");fr("/proc/self/fd"),Da({Xa(){var v=Nn(f,"fd",16895,73);return v.Ma={Va:Ve.Ma.Va},v.La={lookup(A,O){A=+O;var W=Lt(A);return A={parent:null,Xa:{zb:"fake"},La:{readlink:()=>W.path},id:A+1},A.parent=A},readdir(){return Array.from(_r.entries()).filter(([,A])=>A).map(([A])=>A.toString())}},v}},"/proc/self/fd")}(),Ve.vb=new Ae(44),Ve.vb.stack="<generic error, no stack>";var Kr={a:(f,v,A,O)=>U(`Assertion failed: ${f?Y(pe,f):""}, at: `+[v?v?Y(pe,v):"":"unknown filename",A,O?O?Y(pe,O):"":"unknown function"]),i:function(f,v){try{return f=f?Y(pe,f):"",cn(f,v),0}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},L:function(f,v,A){try{if(v=v?Y(pe,v):"",v=jr(f,v),A&-8)return-28;var O=Kt(v,{$a:!0}).node;return O?(f="",A&4&&(f+="r"),A&2&&(f+="w"),A&1&&(f+="x"),f&&Ir(O,f)?-2:0):-44}catch(W){if(typeof ut>"u"||W.name!=="ErrnoError")throw W;return-W.Pa}},j:function(f,v){try{var A=Lt(f);return Ua(A,A.node,v,!1),0}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},h:function(f){try{var v=Lt(f);return Ds(v,v.node,{timestamp:Date.now(),Fb:!1}),0}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},b:function(f,v,A){Gr=A;try{var O=Lt(f);switch(v){case 0:var W=hn();if(0>W)break;for(;_r[W];)W++;return on(O,W).fd;case 1:case 2:return 0;case 3:return O.flags;case 4:return W=hn(),O.flags|=W,0;case 12:return W=hn(),B[W+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(te){if(typeof ut>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},g:function(f,v){try{var A=Lt(f),O=A.node,W=A.Ma.Ta;f=W?A:O,W??=O.La.Ta,Os(W);var te=W(f);return dn(v,te)}catch(ge){if(typeof ut>"u"||ge.name!=="ErrnoError")throw ge;return-ge.Pa}},H:function(f,v){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v);try{if(isNaN(v))return 61;var A=Lt(f);if(0>v||(A.flags&2097155)===0)throw new Ae(28);return Bi(A,A.node,v),0}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},G:function(f,v){try{if(v===0)return-28;var A=$e("/")+1;return v<A?-68:(et("/",pe,f,v),A)}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},K:function(f,v){try{return f=f?Y(pe,f):"",dn(v,ln(f,!0))}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},C:function(f,v,A){try{return v=v?Y(pe,v):"",v=jr(f,v),fr(v,A),0}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},J:function(f,v,A,O){try{v=v?Y(pe,v):"";var W=O&256;return v=jr(f,v,O&4096),dn(A,W?ln(v,!0):ln(v))}catch(te){if(typeof ut>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},x:function(f,v,A,O){Gr=O;try{v=v?Y(pe,v):"",v=jr(f,v);var W=O?hn():0;return un(v,A,W).fd}catch(te){if(typeof ut>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},v:function(f,v,A,O){try{if(v=v?Y(pe,v):"",v=jr(f,v),0>=O)return-28;var W=Kt(v).node;if(!W)throw new Ae(44);if(!W.La.readlink)throw new Ae(28);var te=W.La.readlink(W),ge=Math.min(O,$e(te)),We=fe[A+ge];return et(te,pe,A,O+1),fe[A+ge]=We,ge}catch(tt){if(typeof ut>"u"||tt.name!=="ErrnoError")throw tt;return-tt.Pa}},u:function(f){try{return f=f?Y(pe,f):"",yt(f),0}catch(v){if(typeof ut>"u"||v.name!=="ErrnoError")throw v;return-v.Pa}},f:function(f,v){try{return f=f?Y(pe,f):"",dn(v,ln(f))}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},r:function(f,v,A){try{return v=v?Y(pe,v):"",v=jr(f,v),A===0?$i(v):A===512?yt(v):U("Invalid flags passed to unlinkat"),0}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},q:function(f,v,A){try{v=v?Y(pe,v):"",v=jr(f,v,!0);var O=Date.now(),W,te;if(A){var ge=T[A>>2]+4294967296*Z[A+4>>2],We=Z[A+8>>2];We==1073741823?W=O:We==1073741822?W=null:W=1e3*ge+We/1e6,A+=16,ge=T[A>>2]+4294967296*Z[A+4>>2],We=Z[A+8>>2],We==1073741823?te=O:We==1073741822?te=null:te=1e3*ge+We/1e6}else te=W=O;if((te??W)!==null){f=W;var tt=Kt(v,{$a:!0}).node;Os(tt.La.Ua)(tt,{atime:f,mtime:te})}return 0}catch(Je){if(typeof ut>"u"||Je.name!=="ErrnoError")throw Je;return-Je.Pa}},m:()=>U(""),l:()=>{je=!1,Ma=0},A:function(f,v){f=-9007199254740992>f||9007199254740992<f?NaN:Number(f),f=new Date(1e3*f),Z[v>>2]=f.getSeconds(),Z[v+4>>2]=f.getMinutes(),Z[v+8>>2]=f.getHours(),Z[v+12>>2]=f.getDate(),Z[v+16>>2]=f.getMonth(),Z[v+20>>2]=f.getFullYear()-1900,Z[v+24>>2]=f.getDay();var A=f.getFullYear();Z[v+28>>2]=(A%4!==0||A%100===0&&A%400!==0?Fa:bl)[f.getMonth()]+f.getDate()-1|0,Z[v+36>>2]=-(60*f.getTimezoneOffset()),A=new Date(f.getFullYear(),6,1).getTimezoneOffset();var O=new Date(f.getFullYear(),0,1).getTimezoneOffset();Z[v+32>>2]=(A!=O&&f.getTimezoneOffset()==Math.min(O,A))|0},y:function(f,v,A,O,W,te,ge){W=-9007199254740992>W||9007199254740992<W?NaN:Number(W);try{if(isNaN(W))return 61;var We=Lt(O);if((v&2)!==0&&(A&2)===0&&(We.flags&2097155)!==2)throw new Ae(2);if((We.flags&2097155)===1)throw new Ae(2);if(!We.Ma.ib)throw new Ae(43);if(!f)throw new Ae(28);var tt=We.Ma.ib(We,f,W,v,A),Je=tt.Kb;return Z[te>>2]=tt.Ab,T[ge>>2]=Je,0}catch(dt){if(typeof ut>"u"||dt.name!=="ErrnoError")throw dt;return-dt.Pa}},z:function(f,v,A,O,W,te){te=-9007199254740992>te||9007199254740992<te?NaN:Number(te);try{var ge=Lt(W);if(A&2){if(A=te,(ge.node.mode&61440)!==32768)throw new Ae(43);if(!(O&2)){var We=pe.slice(f,f+v);ge.Ma.jb&&ge.Ma.jb(ge,We,A,v,O)}}}catch(tt){if(typeof ut>"u"||tt.name!=="ErrnoError")throw tt;return-tt.Pa}},n:(f,v)=>{if(Tn[f]&&(clearTimeout(Tn[f].id),delete Tn[f]),!v)return 0;var A=setTimeout(()=>{delete Tn[f],ls(()=>Hi(f,performance.now()))},v);return Tn[f]={id:A,Xb:v},0},B:(f,v,A,O)=>{var W=new Date().getFullYear(),te=new Date(W,0,1).getTimezoneOffset();W=new Date(W,6,1).getTimezoneOffset(),T[f>>2]=60*Math.max(te,W),Z[v>>2]=+(te!=W),v=ge=>{var We=Math.abs(ge);return`UTC${0<=ge?"-":"+"}${String(Math.floor(We/60)).padStart(2,"0")}${String(We%60).padStart(2,"0")}`},f=v(te),v=v(W),W<te?(et(f,pe,A,17),et(v,pe,O,17)):(et(f,pe,O,17),et(v,pe,A,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:f=>{var v=pe.length;if(f>>>=0,2147483648<f)return!1;for(var A=1;4>=A;A*=2){var O=v*(1+.2/A);O=Math.min(O,f+100663296);e:{O=(Math.min(2147483648,65536*Math.ceil(Math.max(f,O)/65536))-q.buffer.byteLength+65535)/65536|0;try{q.grow(O),J();var W=1;break e}catch{}W=void 0}if(W)return!0}return!1},E:(f,v)=>{var A=0;return Ms().forEach((O,W)=>{var te=v+A;for(W=T[f+4*W>>2]=te,te=0;te<O.length;++te)fe[W++]=O.charCodeAt(te);fe[W]=0,A+=O.length+1}),0},F:(f,v)=>{var A=Ms();T[f>>2]=A.length;var O=0;return A.forEach(W=>O+=W.length+1),T[v>>2]=O,0},e:function(f){try{var v=Lt(f);return Cn(v),0}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return A.Pa}},p:function(f,v){try{var A=Lt(f);return fe[v]=A.tty?2:$t(A.mode)?3:(A.mode&61440)===40960?7:4,B[v+2>>1]=0,Te[v+8>>3]=BigInt(0),Te[v+16>>3]=BigInt(0),0}catch(O){if(typeof ut>"u"||O.name!=="ErrnoError")throw O;return O.Pa}},w:function(f,v,A,O){try{e:{var W=Lt(f);f=v;for(var te,ge=v=0;ge<A;ge++){var We=T[f>>2],tt=T[f+4>>2];f+=8;var Je=Wi(W,fe,We,tt,te);if(0>Je){var dt=-1;break e}if(v+=Je,Je<tt)break;typeof te<"u"&&(te+=Je)}dt=v}return T[O>>2]=dt,0}catch(Tt){if(typeof ut>"u"||Tt.name!=="ErrnoError")throw Tt;return Tt.Pa}},D:function(f,v,A,O){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v);try{if(isNaN(v))return 61;var W=Lt(f);return mr(W,v,A),Te[O>>3]=BigInt(W.position),W.ob&&v===0&&A===0&&(W.ob=null),0}catch(te){if(typeof ut>"u"||te.name!=="ErrnoError")throw te;return te.Pa}},I:function(f){try{var v=Lt(f);return v.Ma?.fsync?v.Ma.fsync(v):0}catch(A){if(typeof ut>"u"||A.name!=="ErrnoError")throw A;return A.Pa}},t:function(f,v,A,O){try{e:{var W=Lt(f);f=v;for(var te,ge=v=0;ge<A;ge++){var We=T[f>>2],tt=T[f+4>>2];f+=8;var Je=rr(W,fe,We,tt,te);if(0>Je){var dt=-1;break e}if(v+=Je,Je<tt)break;typeof te<"u"&&(te+=Je)}dt=v}return T[O>>2]=dt,0}catch(Tt){if(typeof ut>"u"||Tt.name!=="ErrnoError")throw Tt;return Tt.Pa}},k:Us},Ue;(async function(){function f(A){return Ue=A.exports,q=Ue.M,J(),gr=Ue.O,Q--,g.monitorRunDependencies?.(Q),Q==0&&I&&(A=I,I=null,A()),Ue}Q++,g.monitorRunDependencies?.(Q);var v={a:Kr};return g.instantiateWasm?new Promise(A=>{g.instantiateWasm(v,(O,W)=>{f(O),A(O.exports)})}):(le??=g.locateFile?g.locateFile("sql-wasm.wasm",j):j+"sql-wasm.wasm",f((await Ee(v)).instance))})(),g._sqlite3_free=f=>(g._sqlite3_free=Ue.P)(f),g._sqlite3_value_text=f=>(g._sqlite3_value_text=Ue.Q)(f),g._sqlite3_prepare_v2=(f,v,A,O,W)=>(g._sqlite3_prepare_v2=Ue.R)(f,v,A,O,W),g._sqlite3_step=f=>(g._sqlite3_step=Ue.S)(f),g._sqlite3_reset=f=>(g._sqlite3_reset=Ue.T)(f),g._sqlite3_exec=(f,v,A,O,W)=>(g._sqlite3_exec=Ue.U)(f,v,A,O,W),g._sqlite3_finalize=f=>(g._sqlite3_finalize=Ue.V)(f),g._sqlite3_column_name=(f,v)=>(g._sqlite3_column_name=Ue.W)(f,v),g._sqlite3_column_text=(f,v)=>(g._sqlite3_column_text=Ue.X)(f,v),g._sqlite3_column_type=(f,v)=>(g._sqlite3_column_type=Ue.Y)(f,v),g._sqlite3_errmsg=f=>(g._sqlite3_errmsg=Ue.Z)(f),g._sqlite3_clear_bindings=f=>(g._sqlite3_clear_bindings=Ue._)(f),g._sqlite3_value_blob=f=>(g._sqlite3_value_blob=Ue.$)(f),g._sqlite3_value_bytes=f=>(g._sqlite3_value_bytes=Ue.aa)(f),g._sqlite3_value_double=f=>(g._sqlite3_value_double=Ue.ba)(f),g._sqlite3_value_int=f=>(g._sqlite3_value_int=Ue.ca)(f),g._sqlite3_value_type=f=>(g._sqlite3_value_type=Ue.da)(f),g._sqlite3_result_blob=(f,v,A,O)=>(g._sqlite3_result_blob=Ue.ea)(f,v,A,O),g._sqlite3_result_double=(f,v)=>(g._sqlite3_result_double=Ue.fa)(f,v),g._sqlite3_result_error=(f,v,A)=>(g._sqlite3_result_error=Ue.ga)(f,v,A),g._sqlite3_result_int=(f,v)=>(g._sqlite3_result_int=Ue.ha)(f,v),g._sqlite3_result_int64=(f,v)=>(g._sqlite3_result_int64=Ue.ia)(f,v),g._sqlite3_result_null=f=>(g._sqlite3_result_null=Ue.ja)(f),g._sqlite3_result_text=(f,v,A,O)=>(g._sqlite3_result_text=Ue.ka)(f,v,A,O),g._sqlite3_aggregate_context=(f,v)=>(g._sqlite3_aggregate_context=Ue.la)(f,v),g._sqlite3_column_count=f=>(g._sqlite3_column_count=Ue.ma)(f),g._sqlite3_data_count=f=>(g._sqlite3_data_count=Ue.na)(f),g._sqlite3_column_blob=(f,v)=>(g._sqlite3_column_blob=Ue.oa)(f,v),g._sqlite3_column_bytes=(f,v)=>(g._sqlite3_column_bytes=Ue.pa)(f,v),g._sqlite3_column_double=(f,v)=>(g._sqlite3_column_double=Ue.qa)(f,v),g._sqlite3_bind_blob=(f,v,A,O,W)=>(g._sqlite3_bind_blob=Ue.ra)(f,v,A,O,W),g._sqlite3_bind_double=(f,v,A)=>(g._sqlite3_bind_double=Ue.sa)(f,v,A),g._sqlite3_bind_int=(f,v,A)=>(g._sqlite3_bind_int=Ue.ta)(f,v,A),g._sqlite3_bind_text=(f,v,A,O,W)=>(g._sqlite3_bind_text=Ue.ua)(f,v,A,O,W),g._sqlite3_bind_parameter_index=(f,v)=>(g._sqlite3_bind_parameter_index=Ue.va)(f,v),g._sqlite3_sql=f=>(g._sqlite3_sql=Ue.wa)(f),g._sqlite3_normalized_sql=f=>(g._sqlite3_normalized_sql=Ue.xa)(f),g._sqlite3_changes=f=>(g._sqlite3_changes=Ue.ya)(f),g._sqlite3_close_v2=f=>(g._sqlite3_close_v2=Ue.za)(f),g._sqlite3_create_function_v2=(f,v,A,O,W,te,ge,We,tt)=>(g._sqlite3_create_function_v2=Ue.Aa)(f,v,A,O,W,te,ge,We,tt),g._sqlite3_update_hook=(f,v,A)=>(g._sqlite3_update_hook=Ue.Ba)(f,v,A),g._sqlite3_open=(f,v)=>(g._sqlite3_open=Ue.Ca)(f,v);var fn=g._malloc=f=>(fn=g._malloc=Ue.Da)(f),Qr=g._free=f=>(Qr=g._free=Ue.Ea)(f);g._RegisterExtensionFunctions=f=>(g._RegisterExtensionFunctions=Ue.Fa)(f);var Or=(f,v)=>(Or=Ue.Ga)(f,v),Hi=(f,v)=>(Hi=Ue.Ha)(f,v),Pn=f=>(Pn=Ue.Ia)(f),sr=f=>(sr=Ue.Ja)(f),us=()=>(us=Ue.Ka)();g.stackSave=()=>us(),g.stackRestore=f=>Pn(f),g.stackAlloc=f=>sr(f),g.cwrap=(f,v,A,O)=>{var W=!A||A.every(te=>te==="number"||te==="boolean");return v!=="string"&&W&&!O?g["_"+f]:(...te)=>qi(f,v,A,te)},g.addFunction=nr,g.removeFunction=pr,g.UTF8ToString=F,g.ALLOC_NORMAL=An,g.allocate=cs,g.allocateUTF8OnStack=Fs;function $s(){function f(){if(g.calledRun=!0,!ne){if(!g.noFSInit&&!Sr){var v,A;Sr=!0,O??=g.stdin,v??=g.stdout,A??=g.stderr,O?Hr("stdin",O):La("/dev/tty","/dev/stdin"),v?Hr("stdout",null,v):La("/dev/tty","/dev/stdout"),A?Hr("stderr",null,A):La("/dev/tty1","/dev/stderr"),un("/dev/stdin",0),un("/dev/stdout",1),un("/dev/stderr",1)}if(Ue.N(),Vt=!1,g.onRuntimeInitialized?.(),g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;){var O=g.postRun.shift();De.unshift(O)}Pe(De)}}if(0<Q)I=$s;else{if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)it();Pe(Ke),0<Q?I=$s:g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),f()},1)):f()}}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return $s(),h}),r)};i.exports=s,i.exports.default=s}(bu)),bu.exports}var $x=zx();const Bx=Ta($x),vi={newCardsPerDay:20,maxReviewsPerDay:100,easyBonus:1.3,intervalModifier:1,maximumInterval:36500,minimumInterval:1},ul=i=>i.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/\[sound:[^\]]*\]/g,"").trim(),Wx=i=>{if(i.length===0)return{frontIndex:0,backIndex:1};const n=i[0].length,r=[];for(let s=0;s<n;s++)for(let l=s+1;l<n;l++){let c=0,u=0;for(const m of i){const g=ul(m[s]||""),y=ul(m[l]||"");g&&y&&(u++,g.length>2&&y.length>2&&(c+=10),g!==y&&(c+=5),!g.match(/^\[sound:/)&&!y.match(/^\[sound:/)&&(c+=3),!g.match(/^\d+$/)&&!y.match(/^\d+$/)&&(c+=2))}const h=u>0?c/u:0;r.push({frontIndex:s,backIndex:l,score:h})}return r.sort((s,l)=>l.score-s.score),r.length>0&&r[0].score>0?(console.log(`Best field combination: ${r[0].frontIndex} -> ${r[0].backIndex} (score: ${r[0].score})`),{frontIndex:r[0].frontIndex,backIndex:r[0].backIndex}):n>=3?{frontIndex:0,backIndex:2}:{frontIndex:0,backIndex:1}},qx=async i=>{try{const n=await Bx({locateFile:k=>`https://sql.js.org/dist/${k}`}),r=await i.arrayBuffer(),c=(await new Ux().loadAsync(r)).file("collection.anki2");if(!c)throw new Error("Invalid .apkg file: collection.anki2 not found");const u=await c.async("arraybuffer"),h=new n.Database(new Uint8Array(u)),m=h.exec("SELECT decks FROM col LIMIT 1");let g=i.name.replace(/\.apkg$/,"");if(m.length>0&&m[0].values.length>0)try{const k=m[0].values[0][0],w=JSON.parse(k),C=Object.keys(w).filter(S=>S!=="1");C.length>0&&(g=w[C[0]].name||g)}catch{console.warn("Could not parse deck names from .apkg file, using filename")}const y=h.exec(`
      SELECT n.flds, n.tags, c.type
      FROM notes n
      JOIN cards c ON n.id = c.nid
      WHERE c.type >= 0
      ORDER BY n.id
    `),x=[];if(y.length>0){const k=Math.min(10,y[0].values.length),w=[];for(let j=0;j<k;j++){const _=y[0].values[j][0].split("");w.push(_)}const{frontIndex:C,backIndex:S}=Wx(w);console.log(`Using field combination: ${C} (front) -> ${S} (back)`);for(const j of y[0].values){const _=j[0].split("");if(_.length>Math.max(C,S)){const E=ul(_[C]||""),P=ul(_[S]||"");E&&P&&E!==P&&x.push({front:E,back:P})}}}if(h.close(),x.length===0)throw new Error("No valid cards found in the .apkg file");return console.log(`Successfully parsed ${x.length} cards from .apkg file`),{name:g,cards:x}}catch(n){throw console.error("Error parsing .apkg file:",n),new Error(`Failed to parse .apkg file: ${n instanceof Error?n.message:"Unknown error"}`)}},Di=Pi()(yl((i,n)=>({decks:[],cards:{},currentStudySession:null,isLoading:!1,error:null,importProgress:0,importStatus:null,createDeck:async r=>{i({isLoading:!0,error:null});try{const s={...r,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),settings:{...vi,...r.settings}};return i(l=>({decks:[...l.decks,s],cards:{...l.cards,[s.id]:[]},isLoading:!1})),s}catch(s){throw i({error:"Failed to create deck",isLoading:!1}),s}},updateDeck:async(r,s)=>{i({isLoading:!0,error:null});try{i(l=>({decks:l.decks.map(c=>c.id===r?{...c,...s,updatedAt:new Date().toISOString()}:c),isLoading:!1}))}catch(l){throw i({error:"Failed to update deck",isLoading:!1}),l}},deleteDeck:async r=>{i({isLoading:!0,error:null});try{i(s=>{const{[r]:l,...c}=s.cards;return{decks:s.decks.filter(u=>u.id!==r),cards:c,isLoading:!1}})}catch(s){throw i({error:"Failed to delete deck",isLoading:!1}),s}},getDeck:r=>n().decks.find(s=>s.id===r),addCard:async(r,s)=>{i({isLoading:!0,error:null});try{const l={...s,id:crypto.randomUUID(),deckId:r,createdAt:new Date().toISOString(),easeFactor:2.5,intervalDays:0,nextReview:new Date().toISOString(),reviewCount:0,lapseCount:0};return i(c=>{const h=[...c.cards[r]||[],l];return{cards:{...c.cards,[r]:h},decks:c.decks.map(m=>m.id===r?{...m,cardCount:h.length,updatedAt:new Date().toISOString()}:m),isLoading:!1}}),l}catch(l){throw i({error:"Failed to add card",isLoading:!1}),l}},addCardBulk:async(r,s)=>{try{const c=n().cards[r]||[],u=`${s.frontContent.trim().toLowerCase()}|${s.backContent.trim().toLowerCase()}`;if(c.some(g=>`${g.frontContent.trim().toLowerCase()}|${g.backContent.trim().toLowerCase()}`===u))return console.log("Skipping duplicate card:",s.frontContent),{...s,id:"duplicate-skipped",deckId:r,createdAt:new Date().toISOString(),easeFactor:2.5,intervalDays:0,nextReview:new Date().toISOString(),reviewCount:0,lapseCount:0};const m={...s,id:crypto.randomUUID(),deckId:r,createdAt:new Date().toISOString(),easeFactor:2.5,intervalDays:0,nextReview:new Date().toISOString(),reviewCount:0,lapseCount:0};return i(g=>{const x=[...g.cards[r]||[],m];return{cards:{...g.cards,[r]:x},decks:g.decks.map(k=>k.id===r?{...k,cardCount:x.length,updatedAt:new Date().toISOString()}:k)}}),m}catch(l){throw console.error("Failed to add card during bulk import:",l),l}},createDeckBulk:async r=>{try{const s={...r,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),settings:{...vi,...r.settings}};return i(l=>({decks:[...l.decks,s],cards:{...l.cards,[s.id]:[]}})),s}catch(s){throw console.error("Failed to create deck during bulk import:",s),s}},addCardsBatch:async(r,s)=>{try{const c=n().cards[r]||[],u=new Set(c.map(g=>`${g.frontContent.trim().toLowerCase()}|${g.backContent.trim().toLowerCase()}`)),h=s.filter(g=>{const y=`${g.frontContent.trim().toLowerCase()}|${g.backContent.trim().toLowerCase()}`;return!u.has(y)});if(console.log(`Batch processing: ${s.length} cards submitted, ${h.length} unique cards to add`),h.length===0)return console.log("No new unique cards to add in this batch"),[];const m=h.map(g=>({...g,id:crypto.randomUUID(),deckId:r,createdAt:new Date().toISOString(),easeFactor:2.5,intervalDays:0,nextReview:new Date().toISOString(),reviewCount:0,lapseCount:0}));return i(g=>{const x=[...g.cards[r]||[],...m];return{cards:{...g.cards,[r]:x},decks:g.decks.map(k=>k.id===r?{...k,cardCount:x.length,updatedAt:new Date().toISOString()}:k)}}),m}catch(l){throw console.error("Failed to add cards during batch import:",l),l}},updateCard:async(r,s)=>{i({isLoading:!0,error:null});try{i(l=>{const c={...l.cards};for(const u in c)c[u]=c[u].map(h=>h.id===r?{...h,...s}:h);return{cards:c,isLoading:!1}})}catch(l){throw i({error:"Failed to update card",isLoading:!1}),l}},deleteCard:async r=>{i({isLoading:!0,error:null});try{i(s=>{const l={...s.cards};let c="";for(const u in l)if(l[u].findIndex(m=>m.id===r)!==-1){l[u]=l[u].filter(m=>m.id!==r),c=u;break}return{cards:l,decks:s.decks.map(u=>u.id===c?{...u,cardCount:l[c].length,updatedAt:new Date().toISOString()}:u),isLoading:!1}})}catch(s){throw i({error:"Failed to delete card",isLoading:!1}),s}},getCards:r=>n().cards[r]||[],importAnkiDeck:async r=>{const{setImportProgress:s,resetImportProgress:l}=n();i({isLoading:!0,error:null}),l();try{const c=r.name.toLowerCase();if(c.endsWith(".apkg")){s(10,"Reading file...");const{name:u,cards:h}=await qx(r);s(30,"Creating deck...");const m=await n().createDeckBulk({userId:"current-user",title:u,description:`Imported Anki deck with ${h.length} cards`,cardCount:0,isPublic:!1,settings:vi,category:"imported"});s(40,`Importing ${h.length} cards...`);const g=[],y=new Set;for(const C of h){const S=`${C.front.trim().toLowerCase()}|${C.back.trim().toLowerCase()}`;y.has(S)||(y.add(S),g.push(C))}console.log(`Removed ${h.length-g.length} duplicates from Anki cards. Processing ${g.length} unique cards.`);const x=100;let k=0;const w=g.length;console.log(`Starting batch import of ${w} unique cards`);for(let C=0;C<w;C+=x){const S=g.slice(C,C+x),j=S.map(_=>bi(_.front,_.back,{type:"basic"},[]));try{console.log(`Processing batch ${Math.floor(C/x)+1}/${Math.ceil(w/x)} (${S.length} cards)`),await n().addCardsBatch(m.id,j),k+=S.length;const _=40+50*Math.min(C+x,w)/w;s(_,`Imported ${k}/${w} cards...`),console.log(`Batch completed. Progress: ${_.toFixed(1)}%`),await new Promise(E=>setTimeout(E,50))}catch(_){console.error("Failed to import batch:",_);for(const P of S)try{await n().addCardBulk(m.id,bi(P.front,P.back,{type:"basic"},[])),k++}catch(D){console.warn("Failed to import individual card:",P,D)}const E=40+50*Math.min(C+x,w)/w;s(E,`Imported ${k}/${w} cards...`)}}return console.log(`Batch import completed. Total successful: ${k}`),s(95,"Finalizing import..."),await n().updateDeck(m.id,{description:`Imported Anki deck with ${k} cards`}),s(100,"Import completed!"),setTimeout(()=>{l()},1e3),i({isLoading:!1}),m}else if(c.endsWith(".txt")||c.endsWith(".tsv")||c.endsWith(".csv")){s(10,"Reading text file...");const u=await r.text();let h="	";c.endsWith(".csv")&&(h=","),s(20,"Processing text content...");const m=u.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim(),g=await n().importFromText(r.name.replace(/\.[^/.]+$/,""),m,h);return i({isLoading:!1}),g}else{s(10,"Reading file as text...");const u=await r.text();s(20,"Processing content...");const h=u.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim(),m=await n().importFromText(r.name.replace(/\.[^/.]+$/,""),h,"	");return i({isLoading:!1}),m}}catch(c){const u=c instanceof Error?c.message:"Failed to import Anki deck";throw i({error:u,isLoading:!1}),l(),c}},importFromText:async(r,s,l="	")=>{const{setImportProgress:c,resetImportProgress:u}=n();i({isLoading:!0,error:null});try{c(30,"Processing text content...");const m=s.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\\u0000/g,"").replace(/[\\u0001-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g,"").trim().split(`
`).map(j=>j.trim()).filter(j=>j.length>0);if(m.length===0)throw new Error("No valid content found in the file");c(40,"Creating deck...");const g=await n().createDeckBulk({userId:"current-user",title:r,description:`Imported deck with ${m.length} cards`,cardCount:0,isPublic:!1,settings:vi,category:"imported"});c(50,`Importing ${m.length} cards...`);const y=[];let x=0;for(let j=0;j<m.length;j++){const _=m[j];try{let E;if(l===","&&_.includes('"')?E=_.split(",").map(P=>P.replace(/^"(.*)"$/,"$1").trim()):E=_.split(l),E.length>=2){const P=E[0].trim(),D=E[1].trim();P&&D?y.push(bi(P,D,{type:"basic"},[])):x++}else x++}catch(E){console.warn("Failed to parse line:",_,E),x++}}const k=[],w=new Set;for(const j of y){const _=`${j.frontContent.trim().toLowerCase()}|${j.backContent.trim().toLowerCase()}`;w.has(_)||(w.add(_),k.push(j))}console.log(`Removed ${y.length-k.length} duplicates from parsed cards. Processing ${k.length} unique cards.`);const C=100;let S=0;console.log(`Starting text import batch processing of ${k.length} unique cards`);for(let j=0;j<k.length;j+=C){const _=k.slice(j,j+C);try{console.log(`Processing text batch ${Math.floor(j/C)+1}/${Math.ceil(k.length/C)} (${_.length} cards)`);const E=await n().addCardsBatch(g.id,_);S+=E.length;const P=50+40*Math.min(j+C,k.length)/k.length;c(P,`Imported ${S}/${k.length} cards...`),console.log(`Text batch completed. Progress: ${P.toFixed(1)}%, Added: ${E.length} cards`),await new Promise(D=>setTimeout(D,50))}catch(E){console.error("Failed to import text batch:",E);for(const D of _)try{(await n().addCardBulk(g.id,D)).id!=="duplicate-skipped"&&S++}catch(M){console.warn("Failed to import individual text card:",D,M)}const P=50+40*Math.min(j+C,k.length)/k.length;c(P,`Imported ${S}/${k.length} cards...`)}}if(console.log(`Text import batch processing completed. Total successful: ${S}`),c(95,"Finalizing import..."),await n().updateDeck(g.id,{description:`Imported deck with ${S} cards${x>0?` (${x} lines skipped)`:""}`}),S===0)throw new Error("No valid cards could be imported. Please check the file format.");return c(100,"Import completed!"),setTimeout(()=>{u()},1e3),i({isLoading:!1}),g}catch(h){throw i({error:"Failed to import from text",isLoading:!1}),u(),h}},loadExampleDecks:async()=>{i({isLoading:!0,error:null});try{const r=n(),s=new Set(r.decks.map(u=>u.title));if(["Spanish Vocabulary","JavaScript Concepts","World Capitals"].some(u=>s.has(u))){console.log("Example decks already exist, skipping load"),i({isLoading:!1});return}const c=[{title:"Spanish Vocabulary",description:"Essential Spanish words for beginners",category:"language",cards:[{front:"Hello",back:"Hola"},{front:"Goodbye",back:"Adiós"},{front:"Thank you",back:"Gracias"},{front:"Please",back:"Por favor"},{front:"Yes",back:"Sí"},{front:"No",back:"No"},{front:"Water",back:"Agua"},{front:"Food",back:"Comida"},{front:"House",back:"Casa"},{front:"Car",back:"Coche"}]},{title:"JavaScript Concepts",description:"Important JavaScript programming concepts",category:"programming",cards:[{front:"What is a closure?",back:"A closure is a function that has access to variables in its outer (enclosing) scope even after the outer function has returned."},{front:"What is hoisting?",back:"Hoisting is JavaScript's default behavior of moving declarations to the top of their scope."},{front:"What is the difference between let and var?",back:"let has block scope and cannot be redeclared, while var has function scope and can be redeclared."},{front:"What is a Promise?",back:"A Promise is an object representing the eventual completion or failure of an asynchronous operation."},{front:"What is async/await?",back:"async/await is syntactic sugar for working with Promises, making asynchronous code look more like synchronous code."}]},{title:"World Capitals",description:"Capital cities of countries around the world",category:"geography",cards:[{front:"France",back:"Paris"},{front:"Germany",back:"Berlin"},{front:"Italy",back:"Rome"},{front:"Spain",back:"Madrid"},{front:"United Kingdom",back:"London"},{front:"Japan",back:"Tokyo"},{front:"China",back:"Beijing"},{front:"Australia",back:"Canberra"},{front:"Brazil",back:"Brasília"},{front:"Canada",back:"Ottawa"}]}];console.log("Loading example decks...");for(const u of c){const h=await n().createDeck({userId:"current-user",title:u.title,description:u.description,cardCount:0,isPublic:!1,settings:vi,category:u.category,tags:[u.category]});for(const m of u.cards)await n().addCard(h.id,bi(m.front,m.back,{type:"basic"},[]))}console.log("Example decks loaded successfully"),i({isLoading:!1})}catch(r){throw i({error:"Failed to load example decks",isLoading:!1}),r}},clearError:()=>i({error:null}),setLoading:r=>i({isLoading:r}),removeDuplicateCards:async r=>{try{const l=n().cards[r]||[];if(l.length===0)return 0;const c=new Map;let u=0;for(const m of l){const g=`${m.frontContent.trim().toLowerCase()}|${m.backContent.trim().toLowerCase()}`;c.has(g)?(u++,console.log(`Removing duplicate card: ${m.frontContent}`)):c.set(g,m)}const h=Array.from(c.values());return u>0&&(i(m=>({cards:{...m.cards,[r]:h},decks:m.decks.map(g=>g.id===r?{...g,cardCount:h.length,updatedAt:new Date().toISOString()}:g)})),console.log(`Removed ${u} duplicate cards from deck. ${h.length} unique cards remaining.`)),u}catch(s){throw console.error("Failed to remove duplicate cards:",s),s}},setImportProgress:(r,s)=>i({importProgress:r,importStatus:s}),resetImportProgress:()=>i({importProgress:0,importStatus:null}),startStudySession:(r,s)=>{i({currentStudySession:{deckId:r,currentCardIndex:0,studyCards:s,sessionStats:{total:s.length,correct:0,incorrect:0},startedAt:new Date().toISOString()}})},updateStudySession:(r,s)=>{i(l=>({currentStudySession:l.currentStudySession?{...l.currentStudySession,currentCardIndex:r,sessionStats:s}:null}))},clearStudySession:()=>{i({currentStudySession:null})},getStudySession:r=>{const s=n();return s.currentStudySession?.deckId===r?s.currentStudySession:null},resetAllStudyData:()=>{i(r=>{const s={};for(const[l,c]of Object.entries(r.cards))s[l]=c.map(u=>({...u,easeFactor:2.5,intervalDays:0,nextReview:new Date().toISOString(),reviewCount:0,lapseCount:0}));return{cards:s,currentStudySession:null}})}}),{name:"deck-storage",partialize:i=>({decks:i.decks,cards:i.cards,currentStudySession:i.currentStudySession})})),Hx=()=>{const i=Pa(),{decks:n,getCards:r}=Di(),{userStats:s,userAchievements:l,achievements:c}=Ii(),{user:u}=Oi(),h=()=>n.map(k=>{const C=r(k.id).filter(S=>S.reviewCount===0?!0:new Date(S.nextReview)<=new Date);return{...k,dueCount:C.length}}).filter(k=>k.dueCount>0),m=()=>l.map(k=>{const w=c.find(C=>C.id===k.achievementId);return w?{...w,earnedAt:k.earnedAt}:null}).filter(Boolean).sort((k,w)=>new Date(w.earnedAt).getTime()-new Date(k.earnedAt).getTime()).slice(0,3),g=k=>k>=1e6?`${(k/1e6).toFixed(1)}M`:k>=1e3?`${(k/1e3).toFixed(1)}K`:k.toString(),y=h(),x=m();return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gradient mb-4",children:"Welcome to StudyMaster"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"Master your learning with spaced repetition and gamification"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Live data • Real-time insights"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:g(s.xp)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total XP"})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-success-600 mb-2",children:s.currentStreak}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Day Streak"})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-warning-600 mb-2",children:s.gold}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Coins"})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:s.level}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Level"})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"📚 Study Today"}),y.length>0?a.jsxs("div",{className:"space-y-4",children:[y.slice(0,3).map(k=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:k.title}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.dueCount," cards due"]})]}),a.jsx("button",{onClick:()=>i(`/study/${k.id}`),className:"btn btn-primary btn-sm",children:"Study Now"})]},k.id)),y.length>3&&a.jsx("div",{className:"text-center",children:a.jsxs("button",{onClick:()=>i("/decks"),className:"btn btn-secondary btn-sm",children:["View All Decks (",y.length-3," more)"]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"All caught up!"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No cards are due for review right now. Great job!"}),a.jsx("button",{onClick:()=>i("/decks"),className:"btn btn-primary",children:"Browse Your Decks"})]})]}),x.length>0&&a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"🏆 Recent Achievements"}),a.jsx("div",{className:"space-y-3",children:x.map(k=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-success-100 dark:bg-success-900 rounded-full flex items-center justify-center",children:k.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:k.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.description})]})]},k.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(xi,{to:"/decks",className:"card p-6 text-center hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📚"}),a.jsx("h3",{className:"font-semibold",children:"My Decks"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage your study materials"})]}),a.jsxs(xi,{to:"/global-stats",className:"card p-6 text-center hover:shadow-lg transition-shadow bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🌍"}),a.jsx("h3",{className:"font-semibold",children:"Global Stats"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real-time learning insights"})]}),a.jsxs(xi,{to:"/challenges",className:"card p-6 text-center hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),a.jsx("h3",{className:"font-semibold",children:"Challenges"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Join learning challenges"})]}),a.jsxs(xi,{to:"/leaderboard",className:"card p-6 text-center hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"text-4xl mb-2",children:"🏆"}),a.jsx("h3",{className:"font-semibold",children:"Leaderboard"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"See how you rank"})]})]}),a.jsxs("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-blue-800 dark:text-blue-200 flex items-center gap-2",children:"💡 Learning Insights"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"87%"}),a.jsx("div",{className:"text-blue-700 dark:text-blue-300",children:"Spaced repetition effectiveness"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"25min"}),a.jsx("div",{className:"text-green-700 dark:text-green-300",children:"Optimal study session"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"7-9PM"}),a.jsx("div",{className:"text-purple-700 dark:text-purple-300",children:"Peak learning hours"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"3x"}),a.jsx("div",{className:"text-orange-700 dark:text-orange-300",children:"Retention improvement"})]})]})]})]})};var Gx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gu=(i,n)=>{const r=G.forwardRef(({color:s="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,children:h,...m},g)=>G.createElement("svg",{ref:g,...Gx,width:l,height:l,stroke:s,strokeWidth:u?Number(c)*24/Number(l):c,className:`lucide lucide-${Vx(i)}`,...m},[...n.map(([y,x])=>G.createElement(y,x)),...(Array.isArray(h)?h:[h])||[]]));return r.displayName=`${i}`,r},Kx=Gu("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Qx=Gu("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Zx=Gu("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Jx={europe:["AD","LI","LU","MT","MC","SM","VA","CY","ME","MK","XK","SI","MD"],world:["AD","LI","LU","MT","MC","SM","VA","SG","BH","BN","QA","KW","BB","GD","LC","VC","AG","KN","DM","MV","NR","TV","PW","MH","FM","KI","TO","WS","VU","FJ"],africa:["DJ","GM","GW","GQ","CV","KM","MU","SC","ST"],"north-america":["BB","GD","LC","VC","AG","KN","DM","TT","JM"],us:["DE","RI","CT","NJ","NH","VT","MA","MD","HI"]},xg=({options:i,showAnswer:n=!1,onAnswer:r,isStudyMode:s=!1})=>{const[l,c]=G.useState(""),[u,h]=G.useState(""),[m,g]=G.useState(!1),[y,x]=G.useState(1),[k,w]=G.useState(0),[C,S]=G.useState(0),[j,_]=G.useState(!1),[E,P]=G.useState({x:0,y:0}),[D,M]=G.useState(!1),z=G.useRef(null),q=G.useCallback(async()=>{try{const de=await(await fetch(i.svgPath)).text();c(de)}catch(le){console.error("Failed to load SVG:",le)}},[i.svgPath]);G.useEffect(()=>{q()},[q]),G.useEffect(()=>{h(""),g(!1),M(!1),w(0),S(0)},[i.countryId,i.countryName]);const ne=G.useCallback((le,de)=>{try{const ie=z.current?.getBoundingClientRect();if(!ie)return 1;const Ee=le.getAttribute("viewBox");let Ie=1e3,Pe=600;if(Ee){const[,,Re,Ne]=Ee.split(" ").map(Number);Ie=Re,Pe=Ne}const De=ie.width,Ke=ie.height,it=De/Ie,ct=Ke/Pe,je=Math.min(it,ct)*.98;if(!de){const Re=Math.max(je,4);return Math.max(4,Math.min(Re,6))}const N=de.getBBox();if(!N||N.width===0||N.height===0)return console.warn("Invalid bounding box for country element"),Math.max(.5,Math.min(je,3));const he=25,Y=he/je,F=he/je,L=N.width<Y?Y/N.width:1,K=N.height<F?F/N.height:1;let ve=Math.max(L,K);(N.width<10||N.height<10)&&(ve=Math.max(ve,12)),(N.width<3||N.height<3)&&(ve=Math.max(ve,25)),(N.width<1||N.height<1)&&(ve=Math.max(ve,40));const xe=je*ve,se=Math.max(4,je),Se=Math.max(se,Math.min(xe,50));return console.log("Zoom calculation details:",{containerSize:`${De}x${Ke}`,svgSize:`${Ie}x${Pe}`,baseZoom:je.toFixed(3),countryBBox:`${N.width.toFixed(1)}x${N.height.toFixed(1)} at (${N.x.toFixed(1)},${N.y.toFixed(1)})`,countryZoom:ve.toFixed(3),finalZoom:Se.toFixed(3)}),Se}catch(ie){console.warn("Error calculating initial zoom:",ie);const Ee=z.current?.getBoundingClientRect();if(Ee){const Ie=Math.min(Ee.width/1e3,Ee.height/600)*.98;return Math.max(4,Math.min(Ie,6))}return 4}},[]),ee=G.useCallback(()=>{x(le=>Math.min(le*1.5,50))},[]),fe=G.useCallback(()=>{x(le=>Math.max(le/1.5,.5))},[]),pe=G.useCallback(()=>{M(!1),w(0),S(0)},[]),B=G.useCallback(le=>{y>1&&(_(!0),P({x:le.clientX-k,y:le.clientY-C}))},[y,k,C]),Z=G.useCallback(le=>{j&&y>1&&(w(le.clientX-E.x),S(le.clientY-E.y))},[j,E,y]),T=G.useCallback(()=>{_(!1)},[]),ue=G.useCallback(le=>{le.preventDefault();const de=le.deltaY>0?.9:1.1;x(ie=>Math.max(.5,Math.min(50,ie*de)))},[]),Te=G.useCallback(le=>{if(le.touches.length===1&&y>1){const de=le.touches[0];_(!0),P({x:de.clientX-k,y:de.clientY-C})}},[y,k,C]),me=G.useCallback(le=>{if(j&&le.touches.length===1&&y>1){le.preventDefault();const de=le.touches[0];w(de.clientX-E.x),S(de.clientY-E.y)}},[j,E,y]),ye=G.useCallback(()=>{_(!1)},[]),J=le=>le.split("/").pop()?.replace(".svg","")||"",Q=dl.useMemo(()=>{if(!l)return"";const de=new DOMParser().parseFromString(l,"image/svg+xml"),ie=de.querySelector("svg");ie&&(ie.setAttribute("width","100%"),ie.setAttribute("height","100%"),ie.setAttribute("viewBox",ie.getAttribute("viewBox")||"0 0 1000 600"),ie.setAttribute("preserveAspectRatio","xMidYMid meet"),ie.style.maxWidth="100%",ie.style.maxHeight="100%");const Ee=J(i.svgPath),Ie=de.querySelector(`[id="${i.countryId}"]`);return(Jx[Ee]||[]).includes(i.countryId),Ie&&(Ie.setAttribute("fill","#ef4444"),Ie.setAttribute("stroke","#dc2626"),Ie.setAttribute("stroke-width","2")),de.querySelectorAll("path[id], polygon[id], circle[id]").forEach(Ke=>{Ke.getAttribute("id")!==i.countryId&&(Ke.setAttribute("fill","#e5e7eb"),Ke.setAttribute("stroke","#9ca3af"),Ke.setAttribute("stroke-width","1"))}),new XMLSerializer().serializeToString(de)},[l,i.countryId,i.svgPath]);G.useEffect(()=>{if(!Q||D)return;const le=setTimeout(()=>{const de=z.current;if(!de)return;const ie=de.querySelector("svg");if(!ie)return;let Ee=ie.querySelector(`[id="${i.countryId}"]`);Ee||(Ee=ie.querySelector(`[id="${i.countryId.toLowerCase()}"]`)||ie.querySelector(`[id="${i.countryId.toUpperCase()}"]`)||ie.querySelector(`[class*="${i.countryId}"]`)||ie.querySelector(`[data-id="${i.countryId}"]`)||ie.querySelector(`[data-country="${i.countryId}"]`)||ie.querySelector(`[name="${i.countryId}"]`));const Ie=ne(ie,Ee||void 0);x(Ie),M(!0),console.log("Setting initial zoom:",Ie,"for country:",i.countryId,"found element:",!!Ee)},100);return()=>clearTimeout(le)},[Q,i.countryId,D,ne]);const I=()=>{const le=u.toLowerCase().trim()===i.countryName.toLowerCase().trim();g(!0),r&&r(le)},U=le=>{le.key==="Enter"&&u.trim()&&!m&&I()};return l?a.jsxs("div",{className:"w-full mx-auto",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 mb-4 relative",children:[a.jsxs("div",{className:"absolute top-2 right-2 z-10 flex flex-col gap-1 bg-white dark:bg-gray-700 rounded-lg shadow-lg p-1",children:[a.jsx("button",{onClick:ee,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",title:"Zoom In",children:a.jsx(Qx,{size:16,className:"text-gray-700 dark:text-gray-300"})}),a.jsx("button",{onClick:fe,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",title:"Zoom Out",children:a.jsx(Zx,{size:16,className:"text-gray-700 dark:text-gray-300"})}),a.jsx("button",{onClick:pe,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",title:"Reset View",children:a.jsx(Kx,{size:16,className:"text-gray-700 dark:text-gray-300"})})]}),y!==1&&a.jsxs("div",{className:"absolute top-2 left-2 z-10 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm",children:[Math.round(y*100),"%"]}),a.jsx("div",{ref:z,className:"w-full h-64 md:h-80 flex items-center justify-center overflow-hidden cursor-grab active:cursor-grabbing",style:{cursor:y>1?j?"grabbing":"grab":"default"},onMouseDown:B,onMouseMove:Z,onMouseUp:T,onMouseLeave:T,onWheel:ue,onTouchStart:Te,onTouchMove:me,onTouchEnd:ye,children:a.jsx("div",{className:"transition-transform duration-200 ease-out",style:{transform:`scale(${y}) translate(${k/y}px, ${C/y}px)`,transformOrigin:"center center"},dangerouslySetInnerHTML:{__html:Q}})}),y===1&&a.jsx("div",{className:"absolute bottom-2 left-2 z-10 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:"Use controls or scroll to zoom • Drag to pan when zoomed"})]}),s&&!n&&a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-center",children:["What ",J(i.svgPath).includes("us")?"state":J(i.svgPath).includes("gb")||J(i.svgPath).includes("fi")||J(i.svgPath).includes("fr")||J(i.svgPath).includes("no")||J(i.svgPath).includes("se")||J(i.svgPath).includes("vn")?"region":"country"," is highlighted in red?"]}),m?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`text-lg font-semibold mb-2 ${u.toLowerCase().trim()===i.countryName.toLowerCase().trim()?"text-green-600":"text-red-600"}`,children:u.toLowerCase().trim()===i.countryName.toLowerCase().trim()?"✓ Correct!":"✗ Incorrect"}),a.jsxs("div",{className:"text-gray-700",children:["Your answer: ",a.jsx("span",{className:"font-medium",children:u})]}),a.jsxs("div",{className:"text-gray-700",children:["Correct answer: ",a.jsx("span",{className:"font-medium",children:i.countryName})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",value:u,onChange:le=>h(le.target.value),onKeyPress:U,placeholder:"Enter country name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),a.jsx("button",{onClick:I,disabled:!u.trim(),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Submit Answer"})]})]}),n&&a.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:i.countryName})})]}):a.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded-lg",children:a.jsx("div",{className:"text-gray-500",children:"Loading map..."})})},Xx=({card:i,showAnswer:n,onAnswerSubmit:r})=>{if(i.cardType.type==="svg_map"){const s=i.cardType.options;return a.jsx(xg,{options:s,showAnswer:n,isStudyMode:!n,onAnswer:l=>{r&&r(l?"correct":"incorrect")}})}return a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:n?"Answer":"Question"}),a.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:n?i.backContent:i.frontContent})]})})},Yx=({shortcuts:i,enabled:n=!0,preventDefault:r=!0,stopPropagation:s=!0,debugMode:l=!1})=>{const c=G.useRef(i),u=G.useRef(n);G.useEffect(()=>{c.current=i,u.current=n},[i,n]);const h=G.useCallback(m=>{if(!u.current)return;const g=m.target;if(g.tagName==="INPUT"||g.tagName==="TEXTAREA"||g.isContentEditable)return;const y=m.key.toLowerCase(),x=m.ctrlKey||m.metaKey,k=m.altKey,w=m.shiftKey;l&&console.log("[KeyboardShortcuts] Key pressed:",{key:y,ctrlKey:x,altKey:k,shiftKey:w,code:m.code});const C=c.current.find(S=>{if(S.disabled)return!1;const j=S.key.toLowerCase()===y,_=(S.ctrlKey||!1)===x,E=(S.altKey||!1)===k,P=(S.shiftKey||!1)===w;return j&&_&&E&&P});if(C){l&&console.log("[KeyboardShortcuts] Executing shortcut:",{key:C.key,description:C.description}),r&&m.preventDefault(),s&&m.stopPropagation();try{C.action()}catch(S){console.error("[KeyboardShortcuts] Error executing shortcut:",S)}}},[r,s,l]);return G.useEffect(()=>(n&&(document.addEventListener("keydown",h),l&&console.log("[KeyboardShortcuts] Registered shortcuts:",i.map(m=>({key:m.key,description:m.description,modifiers:{ctrl:m.ctrlKey,alt:m.altKey,shift:m.shiftKey}})))),()=>{document.removeEventListener("keydown",h),l&&console.log("[KeyboardShortcuts] Unregistered shortcuts")}),[h,n,l,i]),{shortcuts:c.current,enabled:u.current}},ew=({onFlipCard:i,onAnswerAgain:n,onAnswerHard:r,onAnswerGood:s,onAnswerEasy:l,onExitStudy:c,showAnswer:u,enabled:h=!0,debugMode:m=!1})=>Yx({shortcuts:[{key:" ",description:"Flip card / Show answer",action:i,disabled:u},{key:"enter",description:"Flip card / Show answer",action:i,disabled:u},{key:"1",description:"Answer: Again",action:n,disabled:!u},{key:"2",description:"Answer: Hard",action:r,disabled:!u},{key:"3",description:"Answer: Good",action:s,disabled:!u},{key:"4",description:"Answer: Easy",action:l,disabled:!u},{key:"a",description:"Answer: Again",action:n,disabled:!u},{key:"h",description:"Answer: Hard",action:r,disabled:!u},{key:"g",description:"Answer: Good",action:s,disabled:!u},{key:"e",description:"Answer: Easy",action:l,disabled:!u},{key:"escape",description:"Exit study session",action:c},{key:"q",description:"Exit study session",action:c}],enabled:h,debugMode:m}),tw=({shortcuts:i,className:n="",title:r="Keyboard Shortcuts",compact:s=!1})=>{const l=u=>{const h=[];u.ctrlKey&&h.push("Ctrl"),u.altKey&&h.push("Alt"),u.shiftKey&&h.push("Shift");let m=u.key;return m===" "&&(m="Space"),m==="enter"&&(m="Enter"),m==="escape"&&(m="Esc"),h.push(m.toUpperCase()),h.join(" + ")},c=i.filter(u=>!u.disabled);return c.length===0?null:s?a.jsx("div",{className:`text-xs text-gray-500 dark:text-gray-400 ${n}`,children:c.slice(0,4).map((u,h)=>a.jsxs("span",{className:"mr-4",children:[a.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs",children:u.key===" "?"Space":u.key.toUpperCase()})," ",u.description]},h))}):a.jsxs("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-4 ${n}`,children:[a.jsx("h3",{className:"font-semibold text-sm text-gray-700 dark:text-gray-300 mb-3",children:r}),a.jsx("div",{className:"space-y-2",children:c.map((u,h)=>a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:u.description}),a.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200 font-mono",children:l(u)})]},h))})]})},dm=({showAnswer:i,className:n="",compact:r=!1})=>{const s=[{key:"escape",description:"Exit study",action:()=>{},disabled:!1},{key:" ",description:"Show answer",action:()=>{},disabled:i},{key:"1",description:"Again",action:()=>{},disabled:!i},{key:"2",description:"Hard",action:()=>{},disabled:!i},{key:"3",description:"Good",action:()=>{},disabled:!i},{key:"4",description:"Easy",action:()=>{},disabled:!i}];return a.jsx(tw,{shortcuts:s,className:n,title:"Study Shortcuts",compact:r})};function rw(i){switch(i.state){case"new":return"New - Never studied before";case"learning":return"Learning - Recently seen, still being learned";case"review":return`Review (${i.ivl<21?"Young":"Mature"}) - Finished learning, scheduled for review`;case"relearning":return"Relearning - Failed in review, being relearned";case"suspended":return"Suspended - Manually suspended from study";case"buried":return"Buried - Hidden until next day";default:return"Unknown state"}}function nw(i){switch(i.state){case"new":return"#3b82f6";case"learning":return"#f59e0b";case"review":return i.ivl<21?"#10b981":"#059669";case"relearning":return"#ef4444";case"suspended":return"#6b7280";case"buried":return"#9ca3af";default:return"#374151"}}function sw(i){switch(i.state){case"new":return null;case"learning":case"relearning":return new Date(Date.now()+i.left*60*1e3);case"review":return new Date(i.due*24*60*60*1e3);case"suspended":case"buried":return null;default:return null}}function aw(i,n=new Date){if(i.state!=="review")return 0;const r=Math.floor(n.getTime()/(1440*60*1e3));return Math.max(0,r-i.due)}const iw=({card:i,className:n="",showDescription:r=!1,compact:s=!1})=>{const l=nw(i),c=rw(i),u=sw(i),h=aw(i),m=()=>{switch(i.state){case"new":return"✨";case"learning":return"📚";case"review":return i.ivl<21?"🌱":"🌳";case"relearning":return"🔄";case"suspended":return"⏸️";case"buried":return"📦";default:return"❓"}},g=()=>{switch(i.state){case"new":return"New";case"learning":return"Learning";case"review":return i.ivl<21?"Young":"Mature";case"relearning":return"Relearning";case"suspended":return"Suspended";case"buried":return"Buried";default:return"Unknown"}},y=()=>{switch(i.state){case"learning":case"relearning":return`Step ${i.learningStep+1}, ${i.left}min left`;case"review":return h>0?`${h} days overdue`:`Interval: ${i.ivl} days`;case"new":return"Never studied";default:return""}};return s?a.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${n}`,style:{backgroundColor:`${l}20`,color:l,border:`1px solid ${l}40`},children:[a.jsx("span",{children:m()}),a.jsx("span",{children:g()})]}):a.jsxs("div",{className:`bg-white rounded-lg border shadow-sm p-3 ${n}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l}}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:m()}),a.jsx("span",{className:"font-medium text-gray-900",children:g()})]})]}),r&&a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[y()&&a.jsx("div",{children:y()}),i.state==="review"&&a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Ease: ",(i.factor/10).toFixed(0),"%"]}),a.jsxs("span",{children:["Reviews: ",i.reps]})]}),i.lapses>0&&a.jsxs("div",{className:"text-red-500",children:["Lapses: ",i.lapses]}),u&&i.state!=="learning"&&i.state!=="relearning"&&a.jsxs("div",{children:["Next: ",u.toLocaleDateString()]})]})]})},wg=()=>{console.log(`
🧪 TESTING STATS LOGIC - 10 CARD SIMULATION`),console.log("Pattern: Again, Hard, Again, Hard, etc.");let i={total:10,correct:0,incorrect:0};const n=["again","hard"];for(let r=0;r<10;r++){const s=n[r%2],l=r+1;console.log(`
--- Card ${l} ---`),console.log(`Answer: ${s}`),console.log("Stats before:",i),i=s==="again"?{...i,incorrect:i.incorrect+1}:{...i,correct:i.correct+1},console.log("Stats after:",i);const u=Math.floor((l+1)/2),h=Math.floor(l/2),m=i.correct===h,g=i.incorrect===u;if(console.log(`Expected: correct=${h}, incorrect=${u}`),console.log(`✅ Correct count: ${m?"PASS":"FAIL"}`),console.log(`✅ Incorrect count: ${g?"PASS":"FAIL"}`),!m||!g)return console.error(`❌ TEST FAILED at card ${l}`),!1}return console.log(`
🎉 ALL TESTS PASSED!`),console.log(`Final stats: correct=${i.correct}, incorrect=${i.incorrect}`),!0};console.log("Running stats logic test...");wg();typeof window<"u"&&(window.testStatsLogic=wg);const hm=()=>{const{deckId:i}=I0(),n=Pa(),{getDeck:r,getCards:s,updateCard:l,decks:c,cards:u,startStudySession:h,updateStudySession:m,clearStudySession:g,getStudySession:y}=Di(),{awardStudyXP:x}=Ii(),[k,w]=G.useState(0),[C,S]=G.useState(!1),[j,_]=G.useState([]),[E,P]=G.useState(!1),[D,M]=G.useState({total:0,correct:0,incorrect:0}),[z,q]=G.useState(0),[ne,ee]=G.useState(!1),[fe,pe]=G.useState(!1),B=i?r(i):null,Z=G.useMemo(()=>i?s(i):[],[i,s]);G.useEffect(()=>{if(Z.length>0&&i&&!ne){const J=y(i);if(J)_(J.studyCards),w(J.currentCardIndex),M({total:J.studyCards.length,correct:J.sessionStats.correct,incorrect:J.sessionStats.incorrect}),console.log(`Restored study session: card ${J.currentCardIndex+1} of ${J.studyCards.length}`),console.log("Session stats:",J.sessionStats);else{const Q=Z.filter(U=>U.reviewCount===0?!0:new Date(U.nextReview)<=new Date),I=Q.length>0?Q:Z;_(I),w(0),M({total:I.length,correct:0,incorrect:0}),h(i,I),console.log(`Started new study session with ${I.length} cards`)}ee(!0)}},[i,h,ne,y,Z]);const T=j[k];ew({onFlipCard:()=>{!C&&T&&(S(!0),console.log("[Keyboard] Flipped card to show answer"))},onAnswerAgain:()=>{C&&T&&(console.log("[Keyboard] Answered: Again"),ue("again"))},onAnswerHard:()=>{C&&T&&(console.log("[Keyboard] Answered: Hard"),ue("hard"))},onAnswerGood:()=>{C&&T&&(console.log("[Keyboard] Answered: Good"),ue("good"))},onAnswerEasy:()=>{C&&T&&(console.log("[Keyboard] Answered: Easy"),ue("easy"))},onExitStudy:()=>{console.log("[Keyboard] Exiting study session"),me()},showAnswer:C,enabled:!E&&T!==void 0,debugMode:!0});const ue=async J=>{if(!T)return;console.log(`
=== CARD ${k+1} ANSWER ===`),console.log(`Difficulty: ${J}`),console.log("Current stats BEFORE update:",D);const Q=J==="again",I=Q?{...D,incorrect:D.incorrect+1}:{...D,correct:D.correct+1};console.log(`Answer "${J}" is ${Q?"INCORRECT":"CORRECT"}`),console.log("Calculated new stats:",I),console.log(`Expected: correct=${I.correct}, incorrect=${I.incorrect}`),pf.flushSync(()=>{M(I),console.log("Stats updated to:",I)});const U=k>=j.length-1,le=k+1;U||pf.flushSync(()=>{w(le),S(!1),console.log(`Card index: ${k} -> ${le}`)});const de=async()=>{const ie=new Date;let Ee=T.intervalDays,Ie=T.easeFactor;const Pe=T.reviewCount+1;switch(J){case"again":Ee=1,Ie=Math.max(1.3,T.easeFactor-.2);break;case"hard":T.intervalDays===0?Ee=1:Ee=Math.max(1,Math.round(T.intervalDays*1.2)),Ie=Math.max(1.3,T.easeFactor-.15);break;case"good":T.intervalDays===0?Ee=1:Ee=Math.round(T.intervalDays*T.easeFactor);break;case"easy":T.intervalDays===0?Ee=4:Ee=Math.round(T.intervalDays*T.easeFactor*1.3),Ie=T.easeFactor+.15;break}const De=new Date(ie.getTime()+Ee*24*60*60*1e3);await l(T.id,{intervalDays:Ee,easeFactor:Ie,reviewCount:Pe,nextReview:De.toISOString()}),i&&!U&&(console.log("Store update - Stats being sent to store:",I),console.log("Store update - Card index being sent:",le),m(le,I))};if(U){P(!0);const ie=D.correct+D.incorrect+1,Ee=I.correct,Ie=ie,Pe=Ee,De=Math.floor(Ee/10)*10,Ke=Ie+Pe+De;console.log(`🎓 Study session completed! Awarding XP for ${ie} cards studied, ${Ee} correct answers`),console.log(`🎉 XP Breakdown: ${Ie} base + ${Pe} bonus + ${De} milestone = ${Ke} total`),q(Ke),x(ie,Ee)}de().catch(ie=>{console.error("Error processing card update:",ie)})},Te=()=>{w(0),S(!1),P(!1),M({total:j.length,correct:0,incorrect:0}),q(0),i&&(g(),j.length>0&&h(i,j))},me=()=>{n("/decks")},ye=()=>{i&&g(),n("/decks")};if(G.useEffect(()=>{if(!i&&c.length>0){let J=null,Q=new Date("2099-12-31");for(const I of c){const U=u[I.id]||[];if(U.length===0)continue;const le=U.filter(de=>de.reviewCount===0?!0:new Date(de.nextReview)<=new Date);if(le.length>0){const de=le.reduce((ie,Ee)=>{const Ie=Ee.reviewCount===0?new Date(Ee.createdAt):new Date(Ee.nextReview);return Ie<ie?Ie:ie},new Date("2099-12-31"));de<Q&&(Q=de,J=I)}}if(J){n(`/study/${J.id}`,{replace:!0});return}}},[i,c,u,n]),!i)return c.length===0?a.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"No Decks Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have any decks to study yet. Create your first deck to get started!"}),a.jsx("button",{onClick:me,className:"btn btn-primary",children:"Go to My Decks"})]}):a.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Finding Your Next Study Session"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Looking for the deck with the most urgent cards to review..."})]});if(!B)return a.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"❌"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Deck Not Found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The deck you're trying to study doesn't exist."}),a.jsx("button",{onClick:me,className:"btn btn-primary",children:"Back to Decks"})]});if(j.length===0)return a.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"No Cards to Study"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This deck doesn't have any cards to study right now."}),a.jsx("button",{onClick:me,className:"btn btn-primary",children:"Back to Decks"})]});if(E){const J=D.correct+D.incorrect,Q=J>0?Math.round(D.correct/J*100):0;return a.jsxs("div",{className:"max-w-4xl mx-auto text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Session Complete!"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:["Great job studying ",a.jsx("strong",{children:B.title})]}),a.jsxs("div",{className:"card p-6 mb-8 max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Session Stats"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Cards Studied:"}),a.jsx("span",{className:"font-medium",children:J})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Correct:"}),a.jsx("span",{className:"font-medium text-green-600",children:D.correct})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Incorrect:"}),a.jsx("span",{className:"font-medium text-red-600",children:D.incorrect})]}),a.jsxs("div",{className:"flex justify-between border-t pt-2",children:[a.jsx("span",{children:"Accuracy:"}),a.jsxs("span",{className:"font-medium",children:[Q,"%"]})]}),z>0&&a.jsxs("div",{className:"flex justify-between border-t pt-2 bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 py-2 rounded",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{children:"🎉"}),a.jsx("span",{className:"font-medium",children:"XP Earned:"})]}),a.jsxs("span",{className:"font-bold text-yellow-600 dark:text-yellow-400",children:["+",z," XP"]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsx("button",{onClick:Te,className:"btn btn-primary",children:"Study Again"}),a.jsx("button",{onClick:me,className:"btn btn-secondary",children:"Back to Decks"})]}),a.jsx("button",{onClick:ye,className:"btn btn-outline btn-sm text-gray-500 hover:text-gray-700",children:"Clear Progress & Start Fresh Next Time"})]})]})}return a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:B.title}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:["Card ",k+1," of ",j.length]}),T&&a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(iw,{card:T,compact:!0,className:"shadow-sm"})}),i&&y(i)&&k>0&&a.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 mb-4 flex items-center justify-center gap-2",children:[a.jsx("span",{children:"📍"}),"Resumed from where you left off"]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(k+1)/j.length*100}%`}})})]}),a.jsxs("div",{className:"card p-8 mb-8 min-h-[300px] flex flex-col justify-center",children:[a.jsx(Xx,{card:T,showAnswer:C}),C?a.jsxs("div",{className:"space-y-4 mt-6",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center",children:"How well did you know this?"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[a.jsxs("button",{onClick:()=>ue("again"),className:"btn bg-red-500 hover:bg-red-600 text-white py-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Again"}),a.jsx("div",{className:"text-xs opacity-80",children:"< 1 day"}),a.jsx("div",{className:"text-xs opacity-60 mt-1",children:"1 or A"})]}),a.jsxs("button",{onClick:()=>ue("hard"),className:"btn bg-orange-500 hover:bg-orange-600 text-white py-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Hard"}),a.jsx("div",{className:"text-xs opacity-80",children:"1-3 days"}),a.jsx("div",{className:"text-xs opacity-60 mt-1",children:"2 or H"})]}),a.jsxs("button",{onClick:()=>ue("good"),className:"btn bg-green-500 hover:bg-green-600 text-white py-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Good"}),a.jsx("div",{className:"text-xs opacity-80",children:"3-7 days"}),a.jsx("div",{className:"text-xs opacity-60 mt-1",children:"3 or G"})]}),a.jsxs("button",{onClick:()=>ue("easy"),className:"btn bg-blue-500 hover:bg-blue-600 text-white py-3",children:[a.jsx("div",{className:"text-sm font-medium",children:"Easy"}),a.jsx("div",{className:"text-xs opacity-80",children:"1+ weeks"}),a.jsx("div",{className:"text-xs opacity-60 mt-1",children:"4 or E"})]})]})]}):a.jsx("div",{className:"text-center mt-6",children:a.jsxs("button",{onClick:()=>S(!0),className:"btn btn-primary btn-lg",children:["Show Answer",a.jsx("span",{className:"ml-2 text-xs opacity-75",children:"(Space/Enter)"})]})})]}),a.jsx(dm,{showAnswer:C,compact:!0,className:"mb-4"}),a.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:["Correct: ",a.jsx("span",{className:"text-green-600 font-medium",children:D.correct})," | Incorrect: ",a.jsx("span",{className:"text-red-600 font-medium",children:D.incorrect})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>pe(!fe),className:"btn btn-outline btn-sm",title:"Toggle keyboard shortcuts help",children:"⌨️"}),a.jsx("button",{onClick:me,className:"btn btn-secondary btn-sm",children:"Exit Study"})]})]}),fe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Keyboard Shortcuts"}),a.jsx("button",{onClick:()=>pe(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),a.jsx(dm,{showAnswer:C,compact:!1}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("p",{children:["💡 ",a.jsx("strong",{children:"Tip:"})," Use Space or Enter to flip cards, then 1-4 or A/H/G/E to answer!"]}),a.jsx("p",{children:"Press Esc or Q to exit the study session anytime."})]})]})})]})},ow=({deckId:i,onClose:n})=>{const{getCards:r,addCard:s,updateCard:l,deleteCard:c,getDeck:u}=Di(),[h,m]=G.useState(!1),[g,y]=G.useState(null),[x,k]=G.useState(""),[w,C]=G.useState(""),S=u(i),j=r(i),_=async z=>{if(z.preventDefault(),!(!x.trim()||!w.trim()))try{await s(i,bi(x.trim(),w.trim(),{type:"basic"},[])),k(""),C(""),m(!1)}catch(q){console.error("Failed to add card:",q)}},E=async z=>{if(z.preventDefault(),!(!g||!x.trim()||!w.trim()))try{await l(g.id,{frontContent:x.trim(),backContent:w.trim()}),y(null),k(""),C("")}catch(q){console.error("Failed to update card:",q)}},P=async z=>{if(confirm("Are you sure you want to delete this card?"))try{await c(z)}catch(q){console.error("Failed to delete card:",q)}},D=z=>{y(z),k(z.frontContent),C(z.backContent),m(!1)},M=()=>{y(null),k(""),C(""),m(!1)};return S?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:S.title}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[j.length," cards"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>m(!0),className:"btn btn-primary",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Card"]}),a.jsx("button",{onClick:n,className:"btn btn-secondary",children:"Close"})]})]}),(h||g)&&a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[a.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:g?"Edit Card":"Add New Card"}),a.jsxs("form",{onSubmit:g?E:_,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Front"}),a.jsx("textarea",{value:x,onChange:z=>k(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",rows:3,placeholder:"Enter the question or front side...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Back"}),a.jsx("textarea",{value:w,onChange:z=>C(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",rows:3,placeholder:"Enter the answer or back side...",required:!0})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:g?"Update Card":"Add Card"}),a.jsx("button",{type:"button",onClick:M,className:"btn btn-secondary",children:"Cancel"})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:j.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📝"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No cards yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add your first card to start studying"}),a.jsx("button",{onClick:()=>m(!0),className:"btn btn-primary",children:"Add First Card"})]}):a.jsx("div",{className:"space-y-4",children:j.map((z,q)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Card #",q+1]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>D(z),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit card",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("button",{onClick:()=>P(z.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete card",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Front"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-600 rounded border min-h-[60px] text-gray-900 dark:text-white",children:z.frontContent})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Back"}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-600 rounded border min-h-[60px] text-gray-900 dark:text-white",children:z.backContent})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Reviews: ",z.reviewCount]}),a.jsxs("span",{children:["Ease: ",z.easeFactor.toFixed(1)]}),a.jsxs("span",{children:["Interval: ",z.intervalDays," days"]}),z.reviewCount>0&&a.jsxs("span",{children:["Next: ",new Date(z.nextReview).toLocaleDateString()]})]})})]},z.id))})})]})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:[a.jsx("p",{className:"text-red-600",children:"Deck not found"}),a.jsx("button",{onClick:n,className:"btn btn-secondary mt-4",children:"Close"})]})})},fm=({progress:i,label:n,showPercentage:r=!0,className:s=""})=>{const l=Math.min(Math.max(i,0),100);return a.jsxs("div",{className:`w-full ${s}`,children:[n&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n}),r&&a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.round(l),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${l}%`}})})]})},mm=[{id:"AL",name:"Albania"},{id:"AD",name:"Andorra"},{id:"AM",name:"Armenia"},{id:"AT",name:"Austria"},{id:"BE",name:"Belgium"},{id:"BG",name:"Bulgaria"},{id:"BA",name:"Bosnia and Herzegovina"},{id:"BY",name:"Belarus"},{id:"CH",name:"Switzerland"},{id:"CZ",name:"Czech Republic"},{id:"DE",name:"Germany"},{id:"DK",name:"Denmark"},{id:"EE",name:"Estonia"},{id:"FI",name:"Finland"},{id:"GB",name:"United Kingdom"},{id:"GE",name:"Georgia"},{id:"GR",name:"Greece"},{id:"HR",name:"Croatia"},{id:"HU",name:"Hungary"},{id:"IE",name:"Ireland"},{id:"IS",name:"Iceland"},{id:"IT",name:"Italy"},{id:"LI",name:"Liechtenstein"},{id:"LT",name:"Lithuania"},{id:"LU",name:"Luxembourg"},{id:"LV",name:"Latvia"},{id:"MD",name:"Moldova"},{id:"MK",name:"Macedonia"},{id:"ME",name:"Montenegro"},{id:"NO",name:"Norway"},{id:"PL",name:"Poland"},{id:"PT",name:"Portugal"},{id:"RO",name:"Romania"},{id:"RS",name:"Serbia"},{id:"SK",name:"Slovakia"},{id:"SI",name:"Slovenia"},{id:"SE",name:"Sweden"},{id:"TR",name:"Turkey"},{id:"UA",name:"Ukraine"},{id:"XK",name:"Kosovo"},{id:"NL",name:"Netherlands"},{id:"ES",name:"Spain"},{id:"FR",name:"France"},{id:"CY",name:"Cyprus"}],gm=[{id:"AL",name:"Albania"},{id:"DZ",name:"Algeria"},{id:"AM",name:"Armenia"},{id:"AT",name:"Austria"},{id:"AE",name:"United Arab Emirates"},{id:"BD",name:"Bangladesh"},{id:"BE",name:"Belgium"},{id:"BJ",name:"Benin"},{id:"BF",name:"Burkina Faso"},{id:"BG",name:"Bulgaria"},{id:"BI",name:"Burundi"},{id:"BN",name:"Brunei"},{id:"BT",name:"Bhutan"},{id:"BY",name:"Belarus"},{id:"BZ",name:"Belize"},{id:"BO",name:"Bolivia"},{id:"BR",name:"Brazil"},{id:"BW",name:"Botswana"},{id:"BA",name:"Bosnia and Herzegovina"},{id:"BH",name:"Bahrain"},{id:"CA",name:"Canada"},{id:"CH",name:"Switzerland"},{id:"CL",name:"Chile"},{id:"CN",name:"China"},{id:"CI",name:"Côte d'Ivoire"},{id:"CM",name:"Cameroon"},{id:"CG",name:"Congo"},{id:"CO",name:"Colombia"},{id:"CR",name:"Costa Rica"},{id:"CU",name:"Cuba"},{id:"CZ",name:"Czech Republic"},{id:"DE",name:"Germany"},{id:"DJ",name:"Djibouti"},{id:"DK",name:"Denmark"},{id:"DO",name:"Dominican Republic"},{id:"EC",name:"Ecuador"},{id:"EG",name:"Egypt"},{id:"ER",name:"Eritrea"},{id:"EE",name:"Estonia"},{id:"ET",name:"Ethiopia"},{id:"FI",name:"Finland"},{id:"FR",name:"France"},{id:"GA",name:"Gabon"},{id:"GB",name:"United Kingdom"},{id:"GE",name:"Georgia"},{id:"GH",name:"Ghana"},{id:"GL",name:"Greenland"},{id:"GM",name:"Gambia"},{id:"GN",name:"Guinea"},{id:"GW",name:"Guinea-Bissau"},{id:"GQ",name:"Equatorial Guinea"},{id:"GR",name:"Greece"},{id:"GT",name:"Guatemala"},{id:"GY",name:"Guyana"},{id:"HN",name:"Honduras"},{id:"HR",name:"Croatia"},{id:"HT",name:"Haiti"},{id:"HU",name:"Hungary"},{id:"ID",name:"Indonesia"},{id:"IN",name:"India"},{id:"IE",name:"Ireland"},{id:"IR",name:"Iran"},{id:"IQ",name:"Iraq"},{id:"IS",name:"Iceland"},{id:"IL",name:"Israel"},{id:"IT",name:"Italy"},{id:"JM",name:"Jamaica"},{id:"JO",name:"Jordan"},{id:"JP",name:"Japan"},{id:"KZ",name:"Kazakhstan"},{id:"KE",name:"Kenya"},{id:"KG",name:"Kyrgyzstan"},{id:"KH",name:"Cambodia"},{id:"KP",name:"North Korea"},{id:"KR",name:"South Korea"},{id:"KW",name:"Kuwait"},{id:"LA",name:"Laos"},{id:"LB",name:"Lebanon"},{id:"LR",name:"Liberia"},{id:"LY",name:"Libya"},{id:"LK",name:"Sri Lanka"},{id:"LS",name:"Lesotho"},{id:"LT",name:"Lithuania"},{id:"LU",name:"Luxembourg"},{id:"LV",name:"Latvia"},{id:"MA",name:"Morocco"},{id:"MD",name:"Moldova"},{id:"MG",name:"Madagascar"},{id:"MX",name:"Mexico"},{id:"MK",name:"North Macedonia"},{id:"ML",name:"Mali"},{id:"MM",name:"Myanmar"},{id:"ME",name:"Montenegro"},{id:"MN",name:"Mongolia"},{id:"MZ",name:"Mozambique"},{id:"MR",name:"Mauritania"},{id:"MW",name:"Malawi"},{id:"MY",name:"Malaysia"},{id:"NA",name:"Namibia"},{id:"NE",name:"Niger"},{id:"NG",name:"Nigeria"},{id:"NI",name:"Nicaragua"},{id:"NL",name:"Netherlands"},{id:"NO",name:"Norway"},{id:"NP",name:"Nepal"},{id:"NZ",name:"New Zealand"},{id:"OM",name:"Oman"},{id:"PA",name:"Panama"},{id:"PE",name:"Peru"},{id:"PH",name:"Philippines"},{id:"PK",name:"Pakistan"},{id:"PL",name:"Poland"},{id:"PT",name:"Portugal"},{id:"PY",name:"Paraguay"},{id:"PS",name:"Palestine"},{id:"QA",name:"Qatar"},{id:"RO",name:"Romania"},{id:"RU",name:"Russia"},{id:"RW",name:"Rwanda"},{id:"EH",name:"Western Sahara"},{id:"SA",name:"Saudi Arabia"},{id:"SD",name:"Sudan"},{id:"SS",name:"South Sudan"},{id:"SN",name:"Senegal"},{id:"SL",name:"Sierra Leone"},{id:"SV",name:"El Salvador"},{id:"RS",name:"Serbia"},{id:"SR",name:"Suriname"},{id:"SK",name:"Slovakia"},{id:"SI",name:"Slovenia"},{id:"SE",name:"Sweden"},{id:"SZ",name:"Eswatini"},{id:"SY",name:"Syria"},{id:"TD",name:"Chad"},{id:"TG",name:"Togo"},{id:"TH",name:"Thailand"},{id:"TJ",name:"Tajikistan"},{id:"TM",name:"Turkmenistan"},{id:"TL",name:"Timor-Leste"},{id:"TN",name:"Tunisia"},{id:"TR",name:"Turkey"},{id:"TW",name:"Taiwan"},{id:"TZ",name:"Tanzania"},{id:"UG",name:"Uganda"},{id:"UA",name:"Ukraine"},{id:"UY",name:"Uruguay"},{id:"US",name:"United States"},{id:"UZ",name:"Uzbekistan"},{id:"VE",name:"Venezuela"},{id:"VN",name:"Vietnam"},{id:"YE",name:"Yemen"},{id:"ZA",name:"South Africa"},{id:"ZM",name:"Zambia"},{id:"ZW",name:"Zimbabwe"},{id:"SO",name:"Somalia"},{id:"XK",name:"Kosovo"},{id:"ES",name:"Spain"}],pm=[{id:"DZ",name:"Algeria"},{id:"AO",name:"Angola"},{id:"BJ",name:"Benin"},{id:"BW",name:"Botswana"},{id:"BF",name:"Burkina Faso"},{id:"BI",name:"Burundi"},{id:"CV",name:"Cape Verde"},{id:"CM",name:"Cameroon"},{id:"CF",name:"Central African Republic"},{id:"TD",name:"Chad"},{id:"KM",name:"Comoros"},{id:"CG",name:"Congo"},{id:"CD",name:"Democratic Republic of the Congo"},{id:"CI",name:"Côte d'Ivoire"},{id:"DJ",name:"Djibouti"},{id:"EG",name:"Egypt"},{id:"GQ",name:"Equatorial Guinea"},{id:"ER",name:"Eritrea"},{id:"ET",name:"Ethiopia"},{id:"GA",name:"Gabon"},{id:"GM",name:"Gambia"},{id:"GH",name:"Ghana"},{id:"GN",name:"Guinea"},{id:"GW",name:"Guinea-Bissau"},{id:"KE",name:"Kenya"},{id:"LS",name:"Lesotho"},{id:"LR",name:"Liberia"},{id:"LY",name:"Libya"},{id:"MG",name:"Madagascar"},{id:"MW",name:"Malawi"},{id:"ML",name:"Mali"},{id:"MR",name:"Mauritania"},{id:"MU",name:"Mauritius"},{id:"MA",name:"Morocco"},{id:"MZ",name:"Mozambique"},{id:"NA",name:"Namibia"},{id:"NE",name:"Niger"},{id:"NG",name:"Nigeria"},{id:"RW",name:"Rwanda"},{id:"ST",name:"São Tomé and Príncipe"},{id:"SN",name:"Senegal"},{id:"SC",name:"Seychelles"},{id:"SL",name:"Sierra Leone"},{id:"SO",name:"Somalia"},{id:"ZA",name:"South Africa"},{id:"SS",name:"South Sudan"},{id:"SD",name:"Sudan"},{id:"SZ",name:"Eswatini"},{id:"TZ",name:"Tanzania"},{id:"TG",name:"Togo"},{id:"TN",name:"Tunisia"},{id:"UG",name:"Uganda"},{id:"ZM",name:"Zambia"},{id:"ZW",name:"Zimbabwe"}],ym=[{id:"AG",name:"Antigua and Barbuda"},{id:"BS",name:"Bahamas"},{id:"BB",name:"Barbados"},{id:"BZ",name:"Belize"},{id:"CA",name:"Canada"},{id:"CR",name:"Costa Rica"},{id:"CU",name:"Cuba"},{id:"DM",name:"Dominica"},{id:"DO",name:"Dominican Republic"},{id:"SV",name:"El Salvador"},{id:"GD",name:"Grenada"},{id:"GT",name:"Guatemala"},{id:"HT",name:"Haiti"},{id:"HN",name:"Honduras"},{id:"JM",name:"Jamaica"},{id:"MX",name:"Mexico"},{id:"NI",name:"Nicaragua"},{id:"PA",name:"Panama"},{id:"KN",name:"Saint Kitts and Nevis"},{id:"LC",name:"Saint Lucia"},{id:"VC",name:"Saint Vincent and the Grenadines"},{id:"TT",name:"Trinidad and Tobago"},{id:"US",name:"United States"}],vm=[{id:"FI-01",name:"Åland"},{id:"FI-02",name:"South Karelia"},{id:"FI-03",name:"Southern Ostrobothnia"},{id:"FI-04",name:"Southern Savonia"},{id:"FI-05",name:"Kainuu"},{id:"FI-06",name:"Tavastia Proper"},{id:"FI-07",name:"Central Ostrobothnia"},{id:"FI-08",name:"Central Finland"},{id:"FI-09",name:"Kymenlaakso"},{id:"FI-10",name:"Lapland"},{id:"FI-11",name:"Pirkanmaa"},{id:"FI-12",name:"Ostrobothnia"},{id:"FI-13",name:"North Karelia"},{id:"FI-14",name:"Northern Ostrobothnia"},{id:"FI-15",name:"Northern Savonia"},{id:"FI-16",name:"Päijät-Häme"},{id:"FI-17",name:"Satakunta"},{id:"FI-18",name:"Uusimaa"},{id:"FI-19",name:"Southwest Finland"}],xm=[{id:"FR-ARA",name:"Auvergne-Rhône-Alpes"},{id:"FR-BFC",name:"Bourgogne-Franche-Comté"},{id:"FR-BRE",name:"Brittany"},{id:"FR-CVL",name:"Centre-Val de Loire"},{id:"FR-COR",name:"Corsica"},{id:"FR-GES",name:"Grand Est"},{id:"FR-HDF",name:"Hauts-de-France"},{id:"FR-IDF",name:"Île-de-France"},{id:"FR-NOR",name:"Normandy"},{id:"FR-NAQ",name:"Nouvelle-Aquitaine"},{id:"FR-OCC",name:"Occitania"},{id:"FR-PDL",name:"Pays de la Loire"},{id:"FR-PAC",name:"Provence-Alpes-Côte d'Azur"}],wm=[{id:"GB-ENG",name:"England"},{id:"GB-SCT",name:"Scotland"},{id:"GB-WLS",name:"Wales"},{id:"GB-NIR",name:"Northern Ireland"}],bm=[{id:"NO-03",name:"Oslo"},{id:"NO-11",name:"Rogaland"},{id:"NO-15",name:"Møre og Romsdal"},{id:"NO-18",name:"Nordland"},{id:"NO-30",name:"Viken"},{id:"NO-34",name:"Innlandet"},{id:"NO-38",name:"Vestfold og Telemark"},{id:"NO-42",name:"Agder"},{id:"NO-46",name:"Vestland"},{id:"NO-50",name:"Trøndelag"},{id:"NO-54",name:"Troms og Finnmark"}],km=[{id:"SE-AB",name:"Stockholm"},{id:"SE-C",name:"Uppsala"},{id:"SE-D",name:"Södermanland"},{id:"SE-E",name:"Östergötland"},{id:"SE-F",name:"Jönköping"},{id:"SE-G",name:"Kronoberg"},{id:"SE-H",name:"Kalmar"},{id:"SE-I",name:"Gotland"},{id:"SE-K",name:"Blekinge"},{id:"SE-M",name:"Skåne"},{id:"SE-N",name:"Halland"},{id:"SE-O",name:"Västra Götaland"},{id:"SE-S",name:"Värmland"},{id:"SE-T",name:"Örebro"},{id:"SE-U",name:"Västmanland"},{id:"SE-W",name:"Dalarna"},{id:"SE-X",name:"Gävleborg"},{id:"SE-Y",name:"Västernorrland"},{id:"SE-Z",name:"Jämtland"},{id:"SE-AC",name:"Västerbotten"},{id:"SE-BD",name:"Norrbotten"}],_m=[{id:"US-AL",name:"Alabama"},{id:"US-AK",name:"Alaska"},{id:"US-AZ",name:"Arizona"},{id:"US-AR",name:"Arkansas"},{id:"US-CA",name:"California"},{id:"US-CO",name:"Colorado"},{id:"US-CT",name:"Connecticut"},{id:"US-DE",name:"Delaware"},{id:"US-FL",name:"Florida"},{id:"US-GA",name:"Georgia"},{id:"US-HI",name:"Hawaii"},{id:"US-ID",name:"Idaho"},{id:"US-IL",name:"Illinois"},{id:"US-IN",name:"Indiana"},{id:"US-IA",name:"Iowa"},{id:"US-KS",name:"Kansas"},{id:"US-KY",name:"Kentucky"},{id:"US-LA",name:"Louisiana"},{id:"US-ME",name:"Maine"},{id:"US-MD",name:"Maryland"},{id:"US-MA",name:"Massachusetts"},{id:"US-MI",name:"Michigan"},{id:"US-MN",name:"Minnesota"},{id:"US-MS",name:"Mississippi"},{id:"US-MO",name:"Missouri"},{id:"US-MT",name:"Montana"},{id:"US-NE",name:"Nebraska"},{id:"US-NV",name:"Nevada"},{id:"US-NH",name:"New Hampshire"},{id:"US-NJ",name:"New Jersey"},{id:"US-NM",name:"New Mexico"},{id:"US-NY",name:"New York"},{id:"US-NC",name:"North Carolina"},{id:"US-ND",name:"North Dakota"},{id:"US-OH",name:"Ohio"},{id:"US-OK",name:"Oklahoma"},{id:"US-OR",name:"Oregon"},{id:"US-PA",name:"Pennsylvania"},{id:"US-RI",name:"Rhode Island"},{id:"US-SC",name:"South Carolina"},{id:"US-SD",name:"South Dakota"},{id:"US-TN",name:"Tennessee"},{id:"US-TX",name:"Texas"},{id:"US-UT",name:"Utah"},{id:"US-VT",name:"Vermont"},{id:"US-VA",name:"Virginia"},{id:"US-WA",name:"Washington"},{id:"US-WV",name:"West Virginia"},{id:"US-WI",name:"Wisconsin"},{id:"US-WY",name:"Wyoming"}],Sm=[{id:"VN-44",name:"An Giang"},{id:"VN-43",name:"Bà Rịa-Vũng Tàu"},{id:"VN-54",name:"Bắc Giang"},{id:"VN-53",name:"Bắc Kạn"},{id:"VN-55",name:"Bắc Liêu"},{id:"VN-56",name:"Bắc Ninh"},{id:"VN-50",name:"Bến Tre"},{id:"VN-31",name:"Bình Định"},{id:"VN-57",name:"Bình Dương"},{id:"VN-58",name:"Bình Phước"},{id:"VN-40",name:"Bình Thuận"},{id:"VN-59",name:"Cà Mau"},{id:"VN-CT",name:"Cần Thơ"},{id:"VN-04",name:"Cao Bằng"},{id:"VN-DN",name:"Đà Nẵng"},{id:"VN-33",name:"Đắk Lắk"},{id:"VN-72",name:"Đắk Nông"},{id:"VN-71",name:"Điện Biên"},{id:"VN-39",name:"Đồng Nai"},{id:"VN-45",name:"Đồng Tháp"},{id:"VN-30",name:"Gia Lai"},{id:"VN-03",name:"Hà Giang"},{id:"VN-63",name:"Hà Nam"},{id:"HN",name:"Hà Nội"},{id:"VN-23",name:"Hà Tĩnh"},{id:"VN-61",name:"Hải Dương"},{id:"VN-HP",name:"Hải Phòng"},{id:"VN-73",name:"Hậu Giang"},{id:"VN-SG",name:"Hồ Chí Minh"},{id:"VN-14",name:"Hòa Bình"},{id:"VN-66",name:"Hưng Yên"},{id:"VN-34",name:"Khánh Hòa"},{id:"VN-47",name:"Kiên Giang"},{id:"VN-28",name:"Kon Tum"},{id:"VN-01",name:"Lai Châu"},{id:"VN-35",name:"Lâm Đồng"},{id:"VN-09",name:"Lạng Sơn"},{id:"VN-02",name:"Lào Cai"},{id:"VN-41",name:"Long An"},{id:"VN-67",name:"Nam Định"},{id:"VN-22",name:"Nghệ An"},{id:"VN-18",name:"Ninh Bình"},{id:"VN-36",name:"Ninh Thuận"},{id:"VN-68",name:"Phú Thọ"},{id:"VN-32",name:"Phú Yên"},{id:"VN-24",name:"Quảng Bình"},{id:"VN-27",name:"Quảng Nam"},{id:"VN-29",name:"Quảng Ngãi"},{id:"VN-13",name:"Quảng Ninh"},{id:"VN-25",name:"Quảng Trị"},{id:"VN-52",name:"Sóc Trăng"},{id:"VN-05",name:"Sơn La"},{id:"VN-37",name:"Tây Ninh"},{id:"VN-20",name:"Thái Bình"},{id:"VN-69",name:"Thái Nguyên"},{id:"VN-21",name:"Thanh Hóa"},{id:"VN-26",name:"Thừa Thiên Huế"},{id:"VN-46",name:"Tiền Giang"},{id:"VN-51",name:"Trà Vinh"},{id:"VN-07",name:"Tuyên Quang"},{id:"VN-49",name:"Vĩnh Long"},{id:"VN-70",name:"Vĩnh Phúc"},{id:"VN-06",name:"Yên Bái"}],nl=[{id:"europe",mapId:"europe",name:"Europe",mapName:"Europe",description:"Learn all 44 European countries with interactive maps",emoji:"🇪🇺",svgPath:"/europe.svg",regions:mm,countries:mm},{id:"world",mapId:"world",name:"World",mapName:"World",description:"Master geography of all 195+ countries worldwide",emoji:"🌍",svgPath:"/world.svg",regions:gm,countries:gm},{id:"africa",mapId:"africa",name:"Africa",mapName:"Africa",description:"Explore all 54 African countries and their locations",emoji:"🌍",svgPath:"/africa.svg",regions:pm,countries:pm},{id:"north-america",mapId:"north-america",name:"North America",mapName:"North America",description:"Learn 23 North American countries and territories",emoji:"🌎",svgPath:"/north-america.svg",regions:ym,countries:ym},{id:"finland",mapId:"finland",name:"Finland Regions",mapName:"Finland Regions",description:"Master all 19 Finnish regions and their locations",emoji:"🇫🇮",svgPath:"/fi.svg",regions:vm,countries:vm},{id:"france",mapId:"france",name:"France Regions",mapName:"France Regions",description:"Learn the 13 administrative regions of France",emoji:"🇫🇷",svgPath:"/fr.svg",regions:xm,countries:xm},{id:"united-kingdom",mapId:"united-kingdom",name:"United Kingdom",mapName:"United Kingdom",description:"Identify the 4 constituent countries of the UK",emoji:"🇬🇧",svgPath:"/gb.svg",regions:wm,countries:wm},{id:"norway",mapId:"norway",name:"Norway Regions",mapName:"Norway Regions",description:"Explore the 11 counties (fylker) of Norway",emoji:"🇳🇴",svgPath:"/no.svg",regions:bm,countries:bm},{id:"sweden",mapId:"sweden",name:"Sweden Regions",mapName:"Sweden Regions",description:"Learn all 21 Swedish counties (län)",emoji:"🇸🇪",svgPath:"/se.svg",regions:km,countries:km},{id:"united-states",mapId:"united-states",name:"United States",mapName:"United States",description:"Master all 50 US states and their locations",emoji:"🇺🇸",svgPath:"/us.svg",regions:_m,countries:_m},{id:"vietnam",mapId:"vietnam",name:"Vietnam Provinces",mapName:"Vietnam Provinces",description:"Learn all 63 provinces and cities of Vietnam",emoji:"🇻🇳",svgPath:"/vn.svg",regions:Sm,countries:Sm}];function lw(i){return nl.find(n=>n.mapId===i)}async function cw(i,n,r){const s=lw(i);if(!s)throw new Error(`Map configuration for '${i}' not found`);return await n({userId:"current-user",title:`${s.mapName} Geography`,description:`Learn all regions in ${s.mapName} with interactive maps. Each card shows a highlighted region that you need to identify.`,cardCount:s.countries.length,isPublic:!1,settings:{newCardsPerDay:20,maxReviewsPerDay:100,easyBonus:1.3,intervalModifier:1,maximumInterval:36500,minimumInterval:1},category:"geography"})}const uw=()=>{const i=Pa(),{decks:n,isLoading:r,error:s,importProgress:l,importStatus:c,createDeck:u,deleteDeck:h,loadExampleDecks:m,importAnkiDeck:g,importFromText:y,clearError:x,getCards:k,resetImportProgress:w,addCard:C}=Di(),[S,j]=G.useState(!1),[_,E]=G.useState(!1),[P,D]=G.useState(""),[M,z]=G.useState("all"),[q,ne]=G.useState(null),[ee,fe]=G.useState(!1),[pe,B]=G.useState(""),[Z,T]=G.useState(""),[ue,Te]=G.useState(""),[me,ye]=G.useState(""),[J,Q]=G.useState(""),[I,U]=G.useState("	"),le=G.useRef(!1);G.useEffect(()=>{const je=setTimeout(()=>{n.length===0&&!le.current&&(le.current=!0,m())},100);return()=>clearTimeout(je)},[n.length,m]);const de=n.filter(je=>{const N=je.title.toLowerCase().includes(P.toLowerCase())||je.description.toLowerCase().includes(P.toLowerCase()),he=M==="all"||je.category===M;return N&&he}),ie=["all",...Array.from(new Set(n.map(je=>je.category).filter(Boolean)))],Ee=async je=>{je.preventDefault();try{await u({userId:"current-user",title:Z,description:ue,cardCount:0,isPublic:!1,settings:{newCardsPerDay:20,maxReviewsPerDay:100,easyBonus:1.3,intervalModifier:1,maximumInterval:36500,minimumInterval:1},category:me||"general"}),j(!1),T(""),Te(""),ye("")}catch(N){console.error("Failed to create deck:",N)}},Ie=async je=>{if(confirm("Are you sure you want to delete this deck? This action cannot be undone."))try{await h(je)}catch(N){console.error("Failed to delete deck:",N)}},Pe=async je=>{const N=je.target.files?.[0];if(N)try{if(N.name.endsWith(".apkg")||N.name.endsWith(".txt"))await g(N);else{const he=await N.text();await y(N.name.replace(/\.[^/.]+$/,""),he,I)}E(!1)}catch(he){console.error("Failed to import file:",he),w()}},De=async je=>{je.preventDefault();try{const N=await y("Imported Deck",J,I);console.log("Successfully imported deck:",N),E(!1),Q(""),x()}catch(N){console.error("Failed to import text:",N)}},Ke=je=>{const N=k(je.id),he=N.filter(F=>F.reviewCount===0).length,Y=N.filter(F=>F.reviewCount>0&&new Date(F.nextReview)<=new Date).length;return{total:N.length,new:he,review:Y}},it=je=>{i(`/study/${je}`)},ct=async()=>{if(pe)try{const N=await cw(pe,async he=>{const Y={userId:he.userId,title:he.title,description:he.description,settings:he.settings,category:he.category||"geography",isPublic:he.isPublic,cardCount:he.cardCount||0},F=await u(Y);return{...he,id:F.id}});console.log(`Successfully created ${pe} map deck:`,N),fe(!1),B("")}catch(je){console.error("Failed to create map deck:",je)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"My Decks"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your flashcard decks"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>j(!0),className:"btn btn-primary",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Deck"]}),a.jsxs("button",{onClick:()=>fe(!0),className:"btn btn-success",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Map Deck"]}),a.jsxs("button",{onClick:()=>E(!0),className:"btn btn-secondary",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Import"]})]})]}),s&&a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[a.jsx("span",{className:"block sm:inline",children:s}),a.jsx("button",{onClick:x,className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:a.jsx("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Search decks...",value:P,onChange:je=>D(je.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),a.jsx("select",{value:M,onChange:je=>z(je.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:ie.map(je=>a.jsx("option",{value:je,children:je==="all"?"All Categories":(je||"").charAt(0).toUpperCase()+(je||"").slice(1)},je))})]}),r&&a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!r&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(je=>{const N=Ke(je);return a.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:je.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:je.description}),je.category&&a.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:je.category})]}),a.jsx("div",{className:"flex gap-1 ml-4",children:a.jsx("button",{onClick:()=>Ie(je.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Delete deck",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Cards"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:N.total})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"New"}),a.jsx("span",{className:"font-medium text-blue-600",children:N.new})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Due for Review"}),a.jsx("span",{className:"font-medium text-orange-600",children:N.review})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>it(je.id),className:"btn btn-primary btn-sm flex-1",children:"Study Now"}),a.jsx("button",{onClick:()=>ne(je.id),className:"btn btn-secondary btn-sm flex-1",children:"Manage Cards"})]})})]},je.id)})}),!r&&de.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:P||M!=="all"?"No decks found":"No decks yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:P||M!=="all"?"Try adjusting your search or filter criteria":"Create your first deck or import existing flashcards to get started"}),!P&&M==="all"&&a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:()=>j(!0),className:"btn btn-primary",children:"Create Your First Deck"}),a.jsx("button",{onClick:()=>E(!0),className:"btn btn-secondary",children:"Import Existing Deck"})]})]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Create New Deck"}),a.jsxs("form",{onSubmit:Ee,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),a.jsx("input",{type:"text",value:Z,onChange:je=>T(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),a.jsx("textarea",{value:ue,onChange:je=>Te(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),a.jsx("input",{type:"text",value:me,onChange:je=>ye(je.target.value),placeholder:"e.g., language, science, history",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 btn btn-secondary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:"Create Deck"})]})]})]})}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Import Deck"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900 dark:text-white",children:"Import from File"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Upload an Anki deck (.apkg) or text file (.txt)"}),a.jsx("input",{type:"file",accept:".apkg,.txt,.csv",onChange:Pe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:r}),r&&l>0&&a.jsx("div",{className:"mt-4",children:a.jsx(fm,{progress:l,label:c||"Importing...",className:"mb-2"})})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-900 dark:text-white",children:"Import from Text"}),a.jsxs("form",{onSubmit:De,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Separator"}),a.jsxs("select",{value:I,onChange:je=>U(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[a.jsx("option",{value:"\\t",children:"Tab"}),a.jsx("option",{value:",",children:"Comma"}),a.jsx("option",{value:";",children:"Semicolon"}),a.jsx("option",{value:"|",children:"Pipe"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Text (Front",I,"Back format)"]}),a.jsx("textarea",{value:J,onChange:je=>Q(je.target.value),placeholder:`Example:
Hello${I}Hola
Goodbye${I}Adiós`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:6})]}),a.jsx("button",{type:"submit",disabled:!J.trim()||r,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Importing...":"Import Text"}),r&&l>0&&a.jsx("div",{className:"mt-4",children:a.jsx(fm,{progress:l,label:c||"Importing...",className:"mb-2"})})]})]})]}),a.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700 mt-6",children:a.jsx("button",{onClick:()=>{E(!1),w()},disabled:r,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Importing...":"Close"})})]})}),ee&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Create Geography Deck"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🗺️"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Interactive Geography Learning"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose a map type to create an interactive geography deck. Each card will show a highlighted region, and you'll need to identify its name."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Map Type"}),a.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-64 overflow-y-auto",children:nl.map(je=>a.jsx("button",{onClick:()=>B(je.id),className:`p-4 text-left border rounded-lg transition-colors ${pe===je.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:je.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:je.description}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[je.regions.length," ",je.regions.length===1?"region":"regions"]})]}),a.jsx("div",{className:"text-2xl ml-4",children:je.emoji})]})},je.id))})]}),pe&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"What you'll get:"}),a.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[a.jsxs("li",{children:["• ",nl.find(je=>je.id===pe)?.regions.length," interactive map cards"]}),a.jsx("li",{children:"• Visual region highlighting"}),a.jsx("li",{children:"• Enhanced indicators for small regions"}),a.jsx("li",{children:"• Immediate feedback"}),a.jsx("li",{children:"• Spaced repetition learning"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{fe(!1),B("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:ct,disabled:r||!pe,className:"flex-1 btn btn-success disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating...":`Create ${pe?nl.find(je=>je.id===pe)?.name:""} Deck`})]})]})]})}),q&&a.jsx(ow,{deckId:q,onClose:()=>ne(null)})]})},dw={totalXP:2500,level:5,currentLevelXP:100,nextLevelXP:500,cardsStudied:1250,studyTime:2400,accuracy:87.5,currentStreak:15,longestStreak:28,coins:150,gems:10,lastStudyDate:new Date().toISOString(),joinDate:new Date(Date.now()-720*60*60*1e3).toISOString()},jm=[{id:"first_study",name:"First Steps",description:"Complete your first study session",icon:"🎯",unlockedAt:new Date(Date.now()-600*60*60*1e3).toISOString(),category:"study"},{id:"week_streak",name:"Week Warrior",description:"Study for 7 days in a row",icon:"🔥",unlockedAt:new Date(Date.now()-14400*60*1e3).toISOString(),category:"streak"}],hw=[{id:"monthly_mastery",name:"Monthly Mastery Challenge",description:"Complete an intensive month-long study challenge with progressive difficulty",type:"monthly",target:1e3,current:245,reward:{xp:1500,coins:500,gems:50},expiresAt:new Date(Date.now()+720*60*60*1e3).toISOString()},{id:"knowledge_seeker",name:"Knowledge Seeker",description:"Explore diverse subjects and maintain high accuracy throughout the month",type:"monthly",target:800,current:156,reward:{xp:1200,coins:400,gems:30},expiresAt:new Date(Date.now()+600*60*60*1e3).toISOString()}],Nm=[{id:"daily_grind",name:"Daily Grind",description:"Study 25 cards today",type:"daily",target:25,current:18,reward:{xp:50,coins:10},expiresAt:new Date(Date.now()+1440*60*1e3).toISOString()},{id:"weekly_warrior",name:"Weekly Warrior",description:"Study 200 cards this week",type:"weekly",target:200,current:145,reward:{xp:200,coins:50,gems:5},expiresAt:new Date(Date.now()+4320*60*1e3).toISOString()},...hw],Em={global:[{userId:"demo1",username:"StudyMaster",score:5420,rank:1,change:0},{userId:"demo2",username:"FlashcardPro",score:4890,rank:2,change:1},{userId:"demo3",username:"MemoryWiz",score:4650,rank:3,change:-1},{userId:"demo4",username:"QuizKing",score:4200,rank:4,change:2},{userId:"demo_user",username:"Demo User",score:2500,rank:15,change:3}],friends:[{userId:"friend1",username:"StudyBuddy",score:3200,rank:1,change:0},{userId:"demo_user",username:"Demo User",score:2500,rank:2,change:1},{userId:"friend2",username:"LearningPal",score:2100,rank:3,change:-1}],weekly:[{userId:"demo1",username:"StudyMaster",score:890,rank:1,change:2},{userId:"demo_user",username:"Demo User",score:420,rank:8,change:5}],monthly:[{userId:"demo1",username:"StudyMaster",score:3200,rank:1,change:0},{userId:"demo_user",username:"Demo User",score:1800,rank:12,change:-2}]};class fw{baseUrl="/api";isDemoUser(n){return n.tokenType==="demo"||n.email==="demo@studymaster.app"}async getUserStats(n){if(this.isDemoUser(n))return dw;try{const r=await fetch(`${this.baseUrl}/users/${n.id}/stats`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch user stats");return await r.json()}catch(r){return console.warn("Failed to fetch real user stats, using mock data:",r),this.generatePersonalizedMockStats(n)}}async getUserActivity(n,r=30){if(this.isDemoUser(n))return this.generateDemoActivity(r);try{const s=await fetch(`${this.baseUrl}/users/${n.id}/activity?days=${r}`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch user activity");return await s.json()}catch(s){return console.warn("Failed to fetch real user activity, using mock data:",s),this.generatePersonalizedActivity(n,r)}}async getUserAchievements(n){if(this.isDemoUser(n))return jm;try{const r=await fetch(`${this.baseUrl}/users/${n.id}/achievements`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch user achievements");return await r.json()}catch(r){return console.warn("Failed to fetch real user achievements, using mock data:",r),this.generatePersonalizedAchievements(n)}}async getUserChallenges(n){if(this.isDemoUser(n))return Nm;try{const r=await fetch(`${this.baseUrl}/users/${n.id}/challenges`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch user challenges");return await r.json()}catch(r){return console.warn("Failed to fetch real user challenges, using mock data:",r),this.generatePersonalizedChallenges(n)}}async getLeaderboardData(n){if(this.isDemoUser(n))return Em;try{const r=await fetch(`${this.baseUrl}/leaderboard`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch leaderboard data");return await r.json()}catch(r){return console.warn("Failed to fetch real leaderboard data, using mock data:",r),this.generatePersonalizedLeaderboard(n)}}async getPerformanceMetrics(n){if(this.isDemoUser(n))return this.generateDemoPerformanceMetrics();try{const r=await fetch(`${this.baseUrl}/users/${n.id}/performance`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch performance metrics");return await r.json()}catch(r){return console.warn("Failed to fetch real performance metrics, using mock data:",r),this.generatePersonalizedPerformanceMetrics(n)}}async getCompleteUserProfile(n){const[r,s,l,c,u]=await Promise.all([this.getUserStats(n),this.getUserActivity(n,30),this.getUserAchievements(n),this.getUserChallenges(n),this.getPerformanceMetrics(n)]);return{stats:r,activity:s,achievements:l,challenges:c,performance:u}}async resetAllUserData(n){if(!this.isDemoUser(n))try{if(!(await fetch(`${this.baseUrl}/users/${n.id}/reset`,{method:"POST",headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to reset user data")}catch(r){console.warn("Failed to reset real user data via API:",r)}}generatePersonalizedMockStats(n){const r=this.hashString(n.email),s=Math.floor(r%60)+1;return{totalXP:Math.floor(r%1e3)+100,level:Math.floor(r%1e3/200)+1,currentLevelXP:r%200,nextLevelXP:200,cardsStudied:Math.floor(r%500)+50,studyTime:Math.floor(r%1200)+60,accuracy:75+r%20,currentStreak:Math.floor(r%15)+1,longestStreak:Math.floor(r%30)+5,coins:Math.floor(r%200)+50,gems:Math.floor(r%20)+5,lastStudyDate:new Date().toISOString(),joinDate:new Date(Date.now()-s*24*60*60*1e3).toISOString()}}generatePersonalizedActivity(n,r){const s=[];for(let l=0;l<r;l++){const c=new Date(Date.now()-l*24*60*60*1e3),u=this.hashString(n.email+c.toDateString());u%4!==0&&s.push({date:c.toISOString().split("T")[0],cardsStudied:Math.floor(u%50)+5,studyTime:Math.floor(u%120)+10,accuracy:70+u%25,xpGained:Math.floor(u%100)+20})}return s.reverse()}generatePersonalizedAchievements(n){const r=this.hashString(n.email),s=[...jm];return r%3===0&&s.push({id:"accuracy_master",name:"Accuracy Master",description:"Achieve 90% accuracy in a session",icon:"🎯",unlockedAt:new Date(Date.now()-7200*60*1e3).toISOString(),category:"accuracy"}),s}generatePersonalizedChallenges(n){const r=[...Nm];return r.forEach(s=>{const l=this.hashString(n.email+s.id);s.current=Math.floor(l%80/100*s.target)}),r}generatePersonalizedLeaderboard(n){const r=this.hashString(n.email),s=Math.floor(r%1e3)+100,l=Math.floor(r%50)+5,c={...Em};return c.global.push({userId:n.id,username:n.username,score:s,rank:l,change:Math.floor(r%10)-5}),c}generateDemoActivity(n){const r=[];for(let s=0;s<n;s++){const l=new Date(Date.now()-s*24*60*60*1e3);s%3!==0&&r.push({date:l.toISOString().split("T")[0],cardsStudied:Math.floor(Math.random()*40)+10,studyTime:Math.floor(Math.random()*90)+15,accuracy:80+Math.floor(Math.random()*15),xpGained:Math.floor(Math.random()*80)+30})}return r.reverse()}generateDemoPerformanceMetrics(){return{weeklyProgress:{cardsStudied:180,studyTime:240,accuracy:87.5,goal:350},monthlyProgress:{cardsStudied:720,studyTime:1200,decksCompleted:8},studyPattern:{preferredTime:"evening",averageSessionLength:25,studyFrequency:5.2}}}generatePersonalizedPerformanceMetrics(n){const r=this.hashString(n.email);return{weeklyProgress:{cardsStudied:Math.floor(r%200)+50,studyTime:Math.floor(r%300)+60,accuracy:75+r%20,goal:300},monthlyProgress:{cardsStudied:Math.floor(r%800)+200,studyTime:Math.floor(r%1500)+300,decksCompleted:Math.floor(r%15)+3},studyPattern:{preferredTime:["morning","afternoon","evening"][r%3],averageSessionLength:Math.floor(r%30)+15,studyFrequency:3+r%4}}}hashString(n){let r=0;for(let s=0;s<n.length;s++){const l=n.charCodeAt(s);r=(r<<5)-r+l,r=r&r}return Math.abs(r)}}const Ts=new fw,mw=({currentXP:i,level:n,className:r=""})=>{const s=y=>Math.pow(y-1,2)*100,l=y=>Math.pow(y,2)*100,c=s(n),u=l(n),h=i-c,m=u-c,g=Math.max(0,Math.min(h/m*100,100));return a.jsxs("div",{className:`space-y-2 ${r}`,children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Level ",n]}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[h.toLocaleString()," / ",m.toLocaleString()," XP"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out relative",style:{width:`${g}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse rounded-full"})})}),a.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold text-white border-2 border-white dark:border-gray-800",children:n})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:u-i>0?a.jsxs(a.Fragment,{children:[(u-i).toLocaleString()," XP to level ",n+1]}):"Max level reached!"})]})},gw=({currentStreak:i,longestStreak:n,lastStudyDate:r,className:s=""})=>{const l=()=>{if(!r)return!1;const y=new Date(r),k=Math.abs(new Date().getTime()-y.getTime());return Math.ceil(k/(1e3*60*60*24))<=1},u=i===0?"inactive":l()?"active":"broken",h=()=>{switch(u){case"active":return"text-green-600 dark:text-green-400";case"broken":return"text-orange-600 dark:text-orange-400";default:return"text-gray-600 dark:text-gray-400"}},m=()=>{switch(u){case"active":return"🔥";case"broken":return"💔";default:return"⭐"}},g=()=>{switch(u){case"active":return i===1?"Great start!":"Keep it up!";case"broken":return"Start a new streak today!";default:return"Begin your streak!"}};return a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 ${s}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Study Streak"}),a.jsx("span",{className:"text-2xl",children:m()})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`text-3xl font-bold ${h()}`,children:i}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i===1?"day":"days"}),a.jsx("div",{className:`text-sm font-medium ${h()}`,children:g()})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Longest streak:"}),a.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[n," ",n===1?"day":"days"]})]}),r&&a.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last study:"}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:new Date(r).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex justify-center space-x-1 pt-2",children:[Array.from({length:Math.min(i,7)},(y,x)=>a.jsx("div",{className:`w-3 h-3 rounded-full ${u==="active"?"bg-green-500":u==="broken"?"bg-orange-500":"bg-gray-300 dark:bg-gray-600"}`},x)),i>7&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["+",i-7]})]})]})]})},pw=({isOpen:i,onClose:n,onConfirm:r,title:s,message:l,confirmText:c="Confirm",cancelText:u="Cancel",isDestructive:h=!1,isLoading:m=!1})=>i?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${h?"bg-red-100 dark:bg-red-900":"bg-blue-100 dark:bg-blue-900"}`,children:a.jsx("span",{className:"text-2xl",children:h?"⚠️":"ℹ️"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})]}),a.jsx("div",{className:"mb-6",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:l})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:n,disabled:m,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u}),a.jsxs("button",{onClick:r,disabled:m,className:`px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 ${h?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[m&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:c})]})]})]})})}):null,yw=()=>{const{user:i,updateUser:n,isLoading:r,initializeAuth:s}=Oi(),[,l]=G.useState(null),[c,u]=G.useState([]),[h,m]=G.useState([]),[g,y]=G.useState([]),[x,k]=G.useState(!1),[w,C]=G.useState(null),[S,j]=G.useState(!1),[_,E]=G.useState(!1),[P,D]=G.useState(!1),[M,z]=G.useState(!1),[q,ne]=G.useState(null),{resetAllStudyData:ee}=Di(),{resetAllUserData:fe,userStats:pe,isInitialized:B,userStreak:Z,initializeUserData:T}=Ii();G.useEffect(()=>{!i&&!r&&s()},[i,r,s]);const ue=G.useCallback(async()=>{if(i){k(!0),C(null);try{const Q=i.email==="demo@studymaster.com"||i.tokenType==="demo";if(T(Q),Q)l(null),u([]),m([]),y([]);else{const I={...i,token:i.token,tokenType:i.tokenType};try{const[U,le,de,ie]=await Promise.all([Ts.getUserStats(I),Ts.getUserActivity(I,30),Ts.getUserAchievements(I),Ts.getUserChallenges(I)]);l(U),u(le),m(de),y(ie)}catch(U){console.warn("API data loading failed, using fallback:",U),l(null),u([]),m([]),y([])}}}catch(Q){console.error("Failed to load user data:",Q),C("Unable to load user statistics. Please try again later.")}finally{k(!1)}}},[i,T]);G.useEffect(()=>{ue()},[ue]);const[Te,me]=G.useState({username:i?.username||"",email:i?.email||"",dailyGoal:i?.preferences.dailyGoal||50}),ye=()=>{i&&n({username:Te.username,email:Te.email,preferences:{...i.preferences,dailyGoal:Te.dailyGoal}}),j(!1)},J=async()=>{if(i){D(!0),ne(null);try{if(!(i.email==="demo@studymaster.com"||i.tokenType==="demo")){const I={...i,token:i.token,tokenType:i.tokenType};try{await Ts.resetAllUserData(I)}catch(U){console.warn("API reset failed, proceeding with local reset:",U)}}fe(),ee(),l(null),u([]),m([]),y([]),C(null),z(!0),E(!1),setTimeout(async()=>{z(!1);const I=i.email==="demo@studymaster.com"||i.tokenType==="demo";T(I),await ue()},1500)}catch(Q){console.error("Failed to reset user data:",Q),ne("Failed to reset data. Please try again.")}finally{D(!1)}}};return r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl text-gray-900 dark:text-white",children:"Loading profile..."})]})}):i?a.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your progress and achievements"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:i.username.charAt(0).toUpperCase()}),a.jsx("div",{children:S?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:Te.username,onChange:Q=>me({...Te,username:Q.target.value}),className:"text-2xl font-bold bg-transparent border-b border-gray-300 dark:border-gray-600 focus:outline-none focus:border-blue-500 text-gray-900 dark:text-white"}),a.jsx("input",{type:"email",value:Te.email,onChange:Q=>me({...Te,email:Q.target.value}),className:"text-gray-600 dark:text-gray-400 bg-transparent border-b border-gray-300 dark:border-gray-600 focus:outline-none focus:border-blue-500"})]}):a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.username}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:i.email})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600 dark:text-yellow-400",children:[a.jsx("span",{className:"text-lg",children:"💰"}),a.jsx("span",{className:"font-bold",children:pe.gold})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-purple-600 dark:text-purple-400",children:[a.jsx("span",{className:"text-lg",children:"💎"}),a.jsx("span",{className:"font-bold",children:pe.diamonds})]})]}),S?a.jsxs("div",{className:"space-x-2",children:[a.jsx("button",{onClick:ye,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save"}),a.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]}):a.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Profile"})]})]}),a.jsx(mw,{currentXP:pe.xp,level:pe.level,className:"mb-4"}),x?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[...Array(4)].map((Q,I)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-8 w-16 mx-auto rounded mb-2"}),a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-4 w-20 mx-auto rounded"})]},I))}):B?a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:pe.totalCards.toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cards Studied"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[Math.floor(pe.totalStudyTime/60),"h ",pe.totalStudyTime%60,"m"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Study Time"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[pe.averageAccuracy.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Accuracy"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:pe.currentStreak}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Day Streak"})]})]}):a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:w||"Unable to load stats"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),x?a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((Q,I)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-4 w-20 rounded"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-4 w-16 rounded"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-4 w-12 rounded"})]},I))}):c.length>0?a.jsx("div",{className:"space-y-3",children:c.slice(0,10).map((Q,I)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(Q.date).toLocaleDateString()}),a.jsxs("div",{className:"flex space-x-4 text-sm",children:[a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[Q.cardsStudied," cards"]}),a.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[Q.studyTime,"m"]}),a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[Q.accuracy,"%"]})]})]},I))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📊"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No activity data available yet. Start studying to see your progress!"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Active Challenges"}),x?a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(2)].map((Q,I)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-6 w-3/4 rounded mb-2"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-4 w-full rounded mb-3"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-2 w-full rounded"})]},I))}):g.length>0?a.jsx("div",{className:"space-y-4",children:g.map(Q=>{const I=Math.min(Q.current/Q.target*100,100);return a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:Q.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Q.description})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Q.completedAt?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:Q.completedAt?"Completed":Q.type})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Q.current," / ",Q.target]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${I}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("span",{children:["+",Q.reward.xp," XP"]}),a.jsxs("span",{children:["+",Q.reward.coins," coins"]}),Q.reward.gems&&a.jsxs("span",{children:["+",Q.reward.gems," gems"]})]})]},Q.id)})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No active challenges. Check the Challenges page to join some!"})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsx(gw,{currentStreak:pe.currentStreak,longestStreak:pe.longestStreak,lastStudyDate:Z?.lastStudyDate||new Date().toISOString()}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Achievements (",h.length,")"]}),x?a.jsx("div",{className:"animate-pulse grid grid-cols-4 gap-3",children:[...Array(8)].map((Q,I)=>a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-16 w-16 rounded-lg"},I))}):h.length>0?a.jsx("div",{className:"grid grid-cols-4 gap-3",children:h.map(Q=>a.jsxs("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg p-3 text-center text-white shadow-lg",title:`${Q.name}: ${Q.description}`,children:[a.jsx("div",{className:"text-2xl mb-1",children:Q.icon}),a.jsx("div",{className:"text-xs font-medium truncate",children:Q.name})]},Q.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-4xl mb-4",children:"🏆"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No achievements yet. Keep studying to unlock them!"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Study Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Goal"}),S?a.jsx("input",{type:"number",value:Te.dailyGoal,onChange:Q=>me({...Te,dailyGoal:parseInt(Q.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"1",max:"500"}):a.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[i.preferences.dailyGoal," cards"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Notifications"}),a.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${i.preferences.notifications?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.preferences.notifications?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sound Effects"}),a.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${i.preferences.soundEffects?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform ${i.preferences.soundEffects?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3",children:"Data Management"}),a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:"text-red-500 text-xl",children:"⚠️"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1",children:"Reset All Statistics"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-3",children:"This will permanently delete all your study progress, achievements, streaks, and performance data. This action cannot be undone."}),a.jsxs("button",{onClick:()=>E(!0),disabled:P,className:"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[P&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Reset All Data"})]})]})]})})]})]})]})]}),M&&a.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:"✅"}),a.jsx("span",{children:"All statistics have been reset successfully!"})]}),q&&a.jsxs("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:"❌"}),a.jsx("span",{children:q}),a.jsx("button",{onClick:()=>ne(null),className:"ml-2 text-white hover:text-gray-200",children:"×"})]}),a.jsx(pw,{isOpen:_,onClose:()=>E(!1),onConfirm:J,title:"Reset All Statistics",message:"Are you absolutely sure you want to reset all your statistics? This will permanently delete all your study progress, achievements, streaks, challenge progress, and performance data. This action cannot be undone and you will lose all your current progress.",confirmText:"Yes, Reset Everything",cancelText:"Cancel",isDestructive:!0,isLoading:P})]}):a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"text-center",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Please log in to view your profile"})})})},vw=()=>{const{user:i}=Oi(),[n,r]=G.useState(null),[s,l]=G.useState(!1),[c,u]=G.useState(null),[h,m]=G.useState("global");G.useEffect(()=>{(async()=>{if(i){l(!0),u(null);try{const P={...i,token:i.token,tokenType:i.tokenType},D=await Ts.getLeaderboardData(P);r(D)}catch(P){console.error("Failed to load leaderboard data:",P),u("Failed to load leaderboard data")}finally{l(!1)}}})()},[i]);const g=[{value:"global",label:"Global Rankings",icon:"🌍",description:"Compete with all users worldwide"},{value:"friends",label:"Friends",icon:"👥",description:"Compare with your friends"},{value:"weekly",label:"This Week",icon:"📅",description:"Weekly performance rankings"},{value:"monthly",label:"This Month",icon:"📊",description:"Monthly achievement rankings"}],x=n?n[h]||[]:[],k=E=>{switch(E){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${E}`}},w=E=>{switch(E){case 1:return"text-yellow-600 dark:text-yellow-400";case 2:return"text-gray-600 dark:text-gray-400";case 3:return"text-orange-600 dark:text-orange-400";default:return"text-gray-700 dark:text-gray-300"}},C=E=>E>0?"📈":E<0?"📉":"➖",S=E=>E>0?"text-green-600 dark:text-green-400":E<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",j=E=>E.toLocaleString()+" XP",_=x.find(E=>E.userId===i?.id);return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"🏆 Leaderboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Compete with other learners and climb the ranks!"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Leaderboard Category"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map(E=>a.jsxs("button",{onClick:()=>m(E.value),className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${h===E.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:E.icon}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E.label})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.description})]},E.value))})]}),_&&a.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-lg p-6 text-white",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Your Position"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center text-2xl font-bold",children:_.username.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-lg",children:_.username}),a.jsx("div",{className:"text-blue-100",children:j(_.score)})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl font-bold",children:k(_.rank)}),a.jsxs("div",{className:"text-sm text-blue-100 flex items-center space-x-1",children:[a.jsx("span",{children:C(_.change)}),a.jsx("span",{children:_.change===0?"No change":`${Math.abs(_.change)} ${_.change>0?"up":"down"}`})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.find(E=>E.value===h)?.label}),!s&&n&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Updated recently"})]})}),s?a.jsx("div",{className:"p-8",children:a.jsx("div",{className:"space-y-4",children:[...Array(10)].map((E,P)=>a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-8 w-8 rounded"}),a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-10 w-10 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-4 w-24 rounded"}),a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-3 w-16 rounded"})]})]}),a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-4 w-8 rounded"})]},P))})}):x.length>0?a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.map(E=>a.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${E.userId===i?.id?"bg-blue-50 dark:bg-blue-900/20":""}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`text-2xl font-bold ${w(E.rank)} min-w-[3rem] text-center`,children:k(E.rank)}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:E.username.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold text-gray-900 dark:text-white",children:[E.username,E.userId===i?.id&&a.jsx("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"You"})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:j(E.score)})]})]})]}),a.jsxs("div",{className:`text-sm font-medium ${S(E.change)} flex items-center space-x-1`,children:[a.jsx("span",{className:"text-lg",children:C(E.change)}),a.jsx("span",{children:E.change===0?"—":`${Math.abs(E.change)}`})]})]})},E.userId))}):a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📊"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:c?"Unable to Load Data":"No Data Available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c||"Leaderboard data for this category is not available yet."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"How Rankings Work"}),a.jsxs("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),a.jsx("span",{children:"Rankings update regularly based on your study activity"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),a.jsx("span",{children:"XP is earned through studying, accuracy bonuses, and streaks"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),a.jsx("span",{children:"Global rankings include all StudyMaster users"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),a.jsx("span",{children:"Weekly and monthly rankings reset at the start of each period"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Climb the Ranks"}),a.jsxs("div",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-green-500 mt-1",children:"•"}),a.jsx("span",{children:"Study consistently to maintain and improve your streak"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-green-500 mt-1",children:"•"}),a.jsx("span",{children:"Focus on accuracy to maximize your XP gains"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-green-500 mt-1",children:"•"}),a.jsx("span",{children:"Complete challenges for bonus XP and achievements"})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-green-500 mt-1",children:"•"}),a.jsx("span",{children:"Invite friends to compete in the friends leaderboard"})]})]})]})]})]})},xw=({challenge:i,participation:n})=>{const{claimMilestoneReward:r}=Ii(),s=n?.progress||{},l=n?.milestoneProgress||{},c=n?.weeklyProgress||[],u=n?.currentStreak||0,h=n?.bestWeek||0,m=i.requirements.reduce((_,E)=>_+E.target,0),g=i.requirements.reduce((_,E)=>{const P=E.type;return _+(s[P]||0)},0),y=Math.min(g/m*100,100),x=[{id:"milestone_1",name:"First Week",target:25,reward:"100 XP + 20 Gold"},{id:"milestone_2",name:"Consistency",target:50,reward:"200 XP + 50 Gold"},{id:"milestone_3",name:"Dedication",target:75,reward:"300 XP + 100 Gold + 5 Gems"},{id:"milestone_4",name:"Mastery",target:100,reward:"500 XP + 200 Gold + 10 Gems + Badge"}],k=[{week:1,title:"The Journey Begins",unlocked:c.some(_=>_.week===1&&_.storyUnlocked)},{week:2,title:"Building Momentum",unlocked:c.some(_=>_.week===2&&_.storyUnlocked)},{week:3,title:"Overcoming Challenges",unlocked:c.some(_=>_.week===3&&_.storyUnlocked)},{week:4,title:"The Final Push",unlocked:c.some(_=>_.week===4&&_.storyUnlocked)}],w=_=>{r(i.id,_)},C=_=>c.find(E=>E.week===_),S=_=>["bg-green-500","bg-yellow-500","bg-orange-500","bg-red-500"][Math.min(_-1,3)],j=_=>["Beginner","Intermediate","Advanced","Expert"][Math.min(_-1,3)];return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:"🏆"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:i.title}),a.jsx("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs font-medium rounded-full",children:"Monthly Epic"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:i.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["🔥 Streak: ",u," days"]}),a.jsxs("span",{children:["⭐ Best Week: ",h]}),a.jsxs("span",{children:["📅 ",Math.ceil((new Date(i.endDate).getTime()-Date.now())/(1e3*60*60*24))," days left"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[y.toFixed(0),"%"]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Complete"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsx("span",{children:"Overall Progress"}),a.jsxs("span",{children:[g," / ",m]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300",style:{width:`${y}%`}})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Weekly Progress & Difficulty Scaling"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[1,2,3,4].map(_=>{const E=C(_),P=E?.completed||!1,D=Math.ceil((Date.now()-new Date(i.startDate).getTime())/(1e3*60*60*24*7))===_;return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${P?"border-green-500 bg-green-50 dark:bg-green-900/20":D?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["Week ",_]}),P&&a.jsx("span",{className:"text-green-500",children:"✓"}),D&&!P&&a.jsx("span",{className:"text-purple-500",children:"📍"})]}),a.jsx("div",{className:`text-xs px-2 py-1 rounded-full text-white ${S(_)} mb-2`,children:j(_)}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Target: ",25*_," cards"]}),E&&a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Progress: ",Object.values(E.progress).reduce((M,z)=>M+z,0)]})]},_)})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:'📖 Story Arc: "The Path to Mastery"'}),a.jsx("div",{className:"space-y-2",children:k.map(_=>a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${_.unlocked?"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${_.unlocked?"bg-blue-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500"}`,children:_.unlocked?"📖":"🔒"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:`font-medium ${_.unlocked?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:["Chapter ",_.week,": ",_.title]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.unlocked?"Unlocked! Click to read":`Complete Week ${_.week} to unlock`})]}),_.unlocked&&a.jsx("button",{className:"px-3 py-1 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors",children:"Read"})]},_.week))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"🎯 Milestones & Rewards"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.map(_=>{const E=l[_.id]===!0,P=l[`${_.id}_claimed`]===!0,D=E&&!P;return a.jsxs("div",{className:`p-4 rounded-lg border-2 ${P?"border-green-500 bg-green-50 dark:bg-green-900/20":E?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:_.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[P&&a.jsx("span",{className:"text-green-500",children:"✅"}),E&&!P&&a.jsx("span",{className:"text-yellow-500",children:"🎁"}),!E&&a.jsx("span",{className:"text-gray-400",children:"⏳"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:["Target: ",_.target,"% completion"]}),a.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-3",children:["Reward: ",_.reward]}),D&&a.jsx("button",{onClick:()=>w(_.id),className:"w-full px-3 py-2 bg-yellow-500 text-white text-sm font-medium rounded-lg hover:bg-yellow-600 transition-colors",children:"Claim Reward"}),P&&a.jsx("div",{className:"w-full px-3 py-2 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 text-sm font-medium rounded-lg text-center",children:"Claimed"})]},_.id)})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"🌍 Community Goals"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Global Study Challenge"}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"12,847 / 50,000 participants"})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-3",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:"25.7%"}})}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Help the community reach 50,000 participants to unlock exclusive rewards for everyone!"}),a.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:'Community Reward: Exclusive "Unity" badge + 100 bonus gems for all participants'})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"💎 Exclusive Monthly Rewards"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"🏅"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Master"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Exclusive Badge"})]})}),a.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"👑"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Royal Title"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Profile Enhancement"})]})}),a.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-2",children:"🎨"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Custom Theme"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"UI Customization"})]})})]})]})]})},ww=({challengeName:i})=>{const[n,r]=G.useState("gold"),[s,l]=G.useState("weekly"),u={bronze:[{userId:"101",username:"NewLearner",score:150,rank:1,change:0,seasonalRewards:{bronze:1}},{userId:"102",username:"StudyBuddy",score:140,rank:2,change:1,seasonalRewards:{bronze:1}},{userId:"103",username:"FlashFan",score:135,rank:3,change:-1,seasonalRewards:{bronze:1}},{userId:"104",username:"CardMaster",score:130,rank:4,change:2,seasonalRewards:{bronze:1}},{userId:"105",username:"QuickStudy",score:125,rank:5,change:0,seasonalRewards:{bronze:1}}],silver:[{userId:"201",username:"SilverStar",score:450,rank:1,change:0,seasonalRewards:{silver:1}},{userId:"202",username:"StudyPro",score:420,rank:2,change:1,seasonalRewards:{silver:1}},{userId:"203",username:"FlashExpert",score:400,rank:3,change:-1,seasonalRewards:{silver:1}},{userId:"204",username:"MemoryMaster",score:380,rank:4,change:2,seasonalRewards:{silver:1}},{userId:"205",username:"StudyElite",score:360,rank:5,change:-1,seasonalRewards:{silver:1}}],gold:[{userId:"301",username:"GoldChampion",score:850,rank:1,change:0,seasonalRewards:{gold:1}},{userId:"302",username:"StudyLegend",score:820,rank:2,change:1,seasonalRewards:{gold:1}},{userId:"303",username:"FlashMaster",score:800,rank:3,change:-1,seasonalRewards:{gold:1}},{userId:"304",username:"MemoryGuru",score:780,rank:4,change:2,seasonalRewards:{gold:1}},{userId:"305",username:"StudyKing",score:760,rank:5,change:-1,seasonalRewards:{gold:1}}],diamond:[{userId:"401",username:"DiamondElite",score:1500,rank:1,change:0,seasonalRewards:{diamond:1}},{userId:"402",username:"StudyGod",score:1450,rank:2,change:0,seasonalRewards:{diamond:1}},{userId:"403",username:"FlashLegend",score:1400,rank:3,change:1,seasonalRewards:{diamond:1}},{userId:"404",username:"MemoryTitan",score:1350,rank:4,change:-1,seasonalRewards:{diamond:1}},{userId:"405",username:"StudyEmperor",score:1300,rank:5,change:0,seasonalRewards:{diamond:1}}]}[n]||[],h=w=>{const C={bronze:"from-orange-400 to-orange-600",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",diamond:"from-blue-400 to-purple-600"};return C[w]||C.gold},m=w=>{const C={bronze:"🥉",silver:"🥈",gold:"🥇",diamond:"💎"};return C[w]||C.gold},g=w=>w===1?"👑":w===2?"🥈":w===3?"🥉":`#${w}`,y=w=>w>0?a.jsxs("span",{className:"text-green-500",children:["↗️ +",w]}):w<0?a.jsxs("span",{className:"text-red-500",children:["↘️ ",w]}):a.jsx("span",{className:"text-gray-500",children:"➡️ 0"}),x=w=>({bronze:"0-200 points",silver:"201-500 points",gold:"501-1000 points",diamond:"1000+ points"})[w],k=w=>({bronze:"50 XP, 10 Gold",silver:"150 XP, 50 Gold, 5 Gems",gold:"300 XP, 150 Gold, 15 Gems, Badge",diamond:"500 XP, 300 Gold, 30 Gems, Exclusive Badge, Custom Theme"})[w];return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"🌍 Community Leaderboard"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[i," - Compete with players worldwide"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Updated"}),a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"2 min ago"})]})]}),a.jsx("div",{className:"flex gap-2 mb-6",children:["daily","weekly","monthly"].map(w=>a.jsx("button",{onClick:()=>l(w),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s===w?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:w.charAt(0).toUpperCase()+w.slice(1)},w))}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:["bronze","silver","gold","diamond"].map(w=>a.jsxs("button",{onClick:()=>r(w),className:`p-4 rounded-lg border-2 transition-all ${n===w?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[a.jsx("div",{className:`text-2xl mb-2 bg-gradient-to-r ${h(w)} bg-clip-text text-transparent`,children:m(w)}),a.jsxs("div",{className:"font-medium text-gray-900 dark:text-white capitalize",children:[w," Tier"]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x(w)})]},w))}),a.jsxs("div",{className:`p-4 rounded-lg bg-gradient-to-r ${h(n)} bg-opacity-10 border border-opacity-20 mb-6`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"text-2xl",children:m(n)}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white capitalize",children:[n," Tier Rewards"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:k(n)})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requirement: ",x(n)]})]}),a.jsx("div",{className:"space-y-3",children:u.map(w=>a.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border transition-all hover:shadow-md ${w.rank<=3?"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-white dark:bg-gray-800 shadow-sm",children:a.jsx("span",{className:"text-lg font-bold",children:(typeof g(w.rank)=="string"&&g(w.rank).includes("#"),g(w.rank))})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.username}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-gradient-to-r ${h(n)} text-white`,children:n.toUpperCase()}),w.seasonalRewards&&Object.keys(w.seasonalRewards).length>0&&a.jsx("span",{className:"text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full",children:"🏆 Seasonal Winner"})]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[w.score.toLocaleString()," points this ",s]})]}),a.jsx("div",{className:"text-sm",children:y(w.change)}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w.score.toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"points"})]})]},w.userId))}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-blue-500",children:"ℹ️"}),a.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Tier Progression"})]}),a.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:"• Reach the next tier's point threshold to get promoted • Fall below your current tier's minimum to get demoted • Tier changes happen at the end of each weekly period • Higher tiers unlock better rewards and exclusive features"})]}),a.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"47,892"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Players"})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"2.4M"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Cards Studied"})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"89.2%"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Avg Accuracy"})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"156h"}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Study Time"})]})]})]})},bw=()=>{const{user:i}=Oi(),[n,r]=G.useState([]),[s,l]=G.useState(!1),[c,u]=G.useState(null),[h,m]=G.useState("all"),[g,y]=G.useState("expiresAt");G.useEffect(()=>{(async()=>{if(i){l(!0),u(null);try{const E={...i,token:i.token,tokenType:i.tokenType},P=await Ts.getUserChallenges(E);r(P)}catch(E){console.error("Failed to load challenge data:",E),u("Failed to load challenge data")}finally{l(!1)}}})()},[i]);const x=()=>{let _=n;switch(h){case"active":_=n.filter(E=>!E.completedAt&&new Date(E.expiresAt)>new Date);break;case"completed":_=n.filter(E=>E.completedAt);break;case"available":_=n.filter(E=>!E.completedAt);break}return _.sort((E,P)=>{switch(g){case"expiresAt":return new Date(E.expiresAt).getTime()-new Date(P.expiresAt).getTime();case"reward":{const D=E.reward.xp+E.reward.coins+(E.reward.gems||0)*10;return P.reward.xp+P.reward.coins+(P.reward.gems||0)*10-D}case"progress":{const D=E.current/E.target*100;return P.current/P.target*100-D}default:return 0}})},k=_=>{switch(_){case"active":return n.filter(E=>!E.completedAt&&new Date(E.expiresAt)>new Date).length;case"completed":return n.filter(E=>E.completedAt).length;case"available":return n.filter(E=>!E.completedAt).length;default:return n.length}},w=_=>Math.min(_.current/_.target*100,100),C=_=>new Date(_.expiresAt)<new Date,S=_=>{const E=new Date,D=new Date(_.expiresAt).getTime()-E.getTime();if(D<=0)return"Expired";const M=Math.floor(D/(1e3*60*60*24)),z=Math.floor(D%(1e3*60*60*24)/(1e3*60*60));return M>0?`${M}d ${z}h`:`${z}h`},j=x();return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"🏆 Challenges"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete challenges to earn XP, achievements, and compete with other learners"})]}),s?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[...Array(4)].map((_,E)=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-8 w-12 rounded mb-2"}),a.jsx("div",{className:"animate-pulse bg-gray-300 dark:bg-gray-600 h-4 w-16 rounded"})]},E))}):a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:n.length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.filter(_=>_.completedAt).length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:n.filter(_=>!_.completedAt&&new Date(_.expiresAt)>new Date).length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.filter(_=>new Date(_.expiresAt)<new Date).length}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expired"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["all","active","completed","available"].map(_=>a.jsxs("button",{onClick:()=>m(_),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${h===_?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[_.charAt(0).toUpperCase()+_.slice(1)," (",k(_),")"]},_))}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),a.jsxs("select",{value:g,onChange:_=>y(_.target.value),className:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"expiresAt",children:"Time Remaining"}),a.jsx("option",{value:"reward",children:"Reward Value"}),a.jsx("option",{value:"progress",children:"Progress"})]})]})]})}),s?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[...Array(6)].map((_,E)=>a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-6 w-3/4 rounded"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-4 w-full rounded"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-2 w-full rounded"}),a.jsx("div",{className:"bg-gray-300 dark:bg-gray-600 h-8 w-1/2 rounded"})]})},E))}):j.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:c?"Unable to Load Challenges":"No challenges found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c||(h==="all"?"No challenges are currently available.":`No ${h} challenges found. Try a different filter.`)})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:j.map(_=>{const E=w(_),P=C(_);return a.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg p-6 border transition-all duration-200 hover:shadow-lg ${_.completedAt?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":P?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:_.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:_.description})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ml-2 ${_.completedAt?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":P?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":_.type==="daily"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":_.type==="weekly"?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:_.completedAt?"Completed":P?"Expired":_.type})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),a.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[_.current," / ",_.target]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${_.completedAt?"bg-green-600":P?"bg-red-600":"bg-blue-600"}`,style:{width:`${E}%`}})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Rewards"}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["+",_.reward.xp," XP"]}),a.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:["+",_.reward.coins," coins"]}),_.reward.gems&&a.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["+",_.reward.gems," gems"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:P?"Expired":"Time remaining: "}),a.jsx("span",{className:`font-medium ${P?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:P?"":S(_)})]}),_.completedAt&&a.jsx("div",{className:"text-green-600 dark:text-green-400 text-2xl",children:"✅"})]})]},_.id)})}),a.jsxs("div",{className:"mt-12",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"🌟 Monthly Challenge"}),a.jsx(xw,{challenge:{id:"monthly-2025-01",title:"January Learning Marathon",description:"Master new knowledge throughout January with progressive challenges",type:"monthly",requirements:[],rewards:[],startDate:"2025-01-01T00:00:00Z",endDate:"2025-01-31T23:59:59Z",isActive:!0,participantCount:47892,difficulty:"intermediate",storyArc:{id:"winter-learning-saga",title:"Winter Learning Saga",description:"Embark on a month-long journey of discovery",theme:"winter",chapters:[],totalWeeks:4,currentWeek:2}}})]}),a.jsxs("div",{className:"mt-12",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"🏆 Community Leaderboard"}),a.jsx(ww,{challengeId:"monthly-2025-01",challengeName:"January Learning Marathon"})]}),a.jsxs("div",{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"💡 How Challenges Work"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"🎯 Challenge Types"}),a.jsxs("ul",{className:"space-y-1",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Daily:"})," Reset every 24 hours"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Weekly:"})," Reset every Monday"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Monthly:"})," Reset on the 1st"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Special:"})," Limited-time events"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"🏆 Rewards"}),a.jsxs("ul",{className:"space-y-1",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"XP:"})," Experience points for leveling up"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Coins:"})," In-app currency"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Gems:"})," Premium currency"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Achievements:"})," Unlock special badges"]})]})]})]})]})]})})};class kw{updateInterval=3e4;subscribers=new Map;subscribe(n,r){return this.subscribers.has(n)||this.subscribers.set(n,[]),this.subscribers.get(n).push(r),()=>{const s=this.subscribers.get(n);if(s){const l=s.indexOf(r);l>-1&&s.splice(l,1)}}}notify(n,r){const s=this.subscribers.get(n);s&&s.forEach(l=>l(r))}async getGlobalLearningStats(){try{const n=await this.fetchFromMultipleSources([()=>this.fetchFromDuolingoAPI(),()=>this.fetchFromKhanAcademyAPI(),()=>this.fetchFromCourseraAPI(),()=>this.fetchFromEducationalDataAPI()]);if(n)return this.notify("globalStats",n),n}catch(n){console.warn("Failed to fetch real global stats, using enhanced mock data:",n)}return this.generateEnhancedGlobalStats()}async getEducationalTrends(){try{const n=await this.fetchEducationalTrendsFromAPIs();if(n)return this.notify("educationalTrends",n),n}catch(n){console.warn("Failed to fetch real educational trends, using enhanced mock data:",n)}return this.generateEnhancedEducationalTrends()}async getLiveUserMetrics(){try{const n=await this.fetchLiveMetricsFromAPIs();if(n)return this.notify("liveMetrics",n),n}catch(n){console.warn("Failed to fetch real live metrics, using enhanced mock data:",n)}return this.generateEnhancedLiveMetrics()}async getMarketInsights(){try{const n=await this.fetchMarketInsightsFromAPIs();if(n)return this.notify("marketInsights",n),n}catch(n){console.warn("Failed to fetch real market insights, using enhanced mock data:",n)}return this.generateEnhancedMarketInsights()}async fetchFromDuolingoAPI(){try{const n=await fetch("https://www.duolingo.com/api/1/users/show?username=duolingo",{method:"GET",headers:{Accept:"application/json"}});if(n.ok){const r=await n.json();return null}}catch(n){console.log("Duolingo API not accessible:",n)}return null}async fetchFromKhanAcademyAPI(){try{return null}catch(n){console.log("Khan Academy API not accessible:",n)}return null}async fetchFromCourseraAPI(){try{return null}catch(n){console.log("Coursera API not accessible:",n)}return null}async fetchFromEducationalDataAPI(){try{return null}catch(n){console.log("Educational data API not accessible:",n)}return null}async fetchFromMultipleSources(n){const s=(await Promise.allSettled(n.map(l=>l()))).filter(l=>l.status==="fulfilled"&&l.value).map(l=>l.value);return s.length>0?this.mergeDataSources(s):null}mergeDataSources(n){return n[0]}generateEnhancedGlobalStats(){const n=new Date,r=n.getHours(),s=n.getDay(),l=this.getTimeBasedMultiplier(r,s);return{totalLearners:Math.floor(2847392+(Math.random()*1e3-500)),cardsStudiedToday:Math.floor(15847293*l+(Math.random()*1e4-5e3)),activeStudySessions:Math.floor(23847*l+(Math.random()*1e3-500)),languagesBeingLearned:127+Math.floor(Math.random()*5),topSubjects:[{name:"Spanish",learners:Math.floor(847392*l)},{name:"JavaScript",learners:Math.floor(623847*l)},{name:"French",learners:Math.floor(534829*l)},{name:"Python",learners:Math.floor(487293*l)},{name:"German",learners:Math.floor(392847*l)}],studyTimeToday:Math.floor(1847293*l),lastUpdated:n.toISOString()}}generateEnhancedEducationalTrends(){const n=new Date;return{popularSubjects:[{subject:"Artificial Intelligence",growth:156.7,learners:892847},{subject:"Data Science",growth:134.2,learners:734829},{subject:"Cybersecurity",growth:128.9,learners:623847},{subject:"Cloud Computing",growth:119.4,learners:587293},{subject:"Machine Learning",growth:112.8,learners:534829},{subject:"Spanish Language",growth:89.3,learners:1247392},{subject:"Digital Marketing",growth:87.6,learners:423847},{subject:"UX/UI Design",growth:82.4,learners:392847}],learningMethods:[{method:"Spaced Repetition",effectiveness:94.7,usage:78.3},{method:"Active Recall",effectiveness:91.2,usage:65.8},{method:"Microlearning",effectiveness:87.9,usage:82.1},{method:"Gamification",effectiveness:84.6,usage:71.4},{method:"Peer Learning",effectiveness:81.3,usage:56.7}],studyPatterns:{peakHours:this.generatePeakHours(),weeklyTrends:this.generateWeeklyTrends()},lastUpdated:n.toISOString()}}generateEnhancedLiveMetrics(){const n=new Date,r=n.getHours(),s=this.getTimeBasedMultiplier(r,n.getDay());return{onlineUsers:Math.floor(47392*s+(Math.random()*1e3-500)),studyingSessions:Math.floor(23847*s+(Math.random()*500-250)),completedToday:Math.floor(184729+(Math.random()*1e3-500)),averageAccuracy:87.3+(Math.random()*4-2),topPerformers:[{username:"StudyMaster_Pro",score:15847,country:"Singapore"},{username:"LearningNinja",score:14923,country:"South Korea"},{username:"FlashcardWiz",score:14756,country:"Finland"},{username:"MemoryChamp",score:14234,country:"Japan"},{username:"QuizMaster",score:13892,country:"Canada"}],lastUpdated:n.toISOString()}}generateEnhancedMarketInsights(){return{skillDemand:[{skill:"AI/Machine Learning",demand:94.7,growth:156.3},{skill:"Cloud Architecture",demand:91.2,growth:134.7},{skill:"Cybersecurity",demand:89.8,growth:128.9},{skill:"Data Analysis",demand:87.4,growth:119.2},{skill:"DevOps",demand:84.9,growth:112.6},{skill:"Full-Stack Development",demand:82.3,growth:98.4},{skill:"Digital Marketing",demand:78.7,growth:87.9},{skill:"UX Design",demand:76.2,growth:82.1}],industryTrends:[{industry:"Technology",skills:["AI/ML","Cloud Computing","Cybersecurity"],growth:145.7},{industry:"Healthcare",skills:["Data Analysis","Digital Health","Telemedicine"],growth:123.4},{industry:"Finance",skills:["Blockchain","FinTech","Risk Analysis"],growth:118.9},{industry:"Education",skills:["EdTech","Online Learning","Digital Pedagogy"],growth:134.2}],certificationValue:[{cert:"AWS Certified Solutions Architect",value:98.7,popularity:87.3},{cert:"Google Cloud Professional",value:96.2,popularity:82.1},{cert:"Certified Ethical Hacker",value:94.8,popularity:76.4},{cert:"PMP Certification",value:91.3,popularity:89.7},{cert:"Cisco CCNA",value:88.9,popularity:78.2}],lastUpdated:new Date().toISOString()}}getTimeBasedMultiplier(n,r){let s=.7;return n>=9&&n<=11||n>=14&&n<=16||n>=19&&n<=21?s=1.2:n>=6&&n<=23&&(s=1),s*(r===0||r===6?.8:1)}generatePeakHours(){const n=[];for(let r=0;r<24;r++){let s=30;r>=9&&r<=11?s=85+Math.random()*10:r>=14&&r<=16?s=90+Math.random()*10:r>=19&&r<=21?s=95+Math.random()*10:r>=6&&r<=23?s=60+Math.random()*20:s=20+Math.random()*15,n.push({hour:r,activity:Math.floor(s)})}return n}generateWeeklyTrends(){const n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],r=[8500,9200,9800,9500,8900,7200,6800];return n.map((s,l)=>({day:s,sessions:Math.floor(r[l]+(Math.random()*1e3-500))}))}async fetchEducationalTrendsFromAPIs(){return null}async fetchLiveMetricsFromAPIs(){return null}async fetchMarketInsightsFromAPIs(){return null}startRealTimeUpdates(){setInterval(async()=>{try{const[n,r,s,l]=await Promise.all([this.getGlobalLearningStats(),this.getEducationalTrends(),this.getLiveUserMetrics(),this.getMarketInsights()]);this.notify("globalStats",n),this.notify("educationalTrends",r),this.notify("liveMetrics",s),this.notify("marketInsights",l)}catch(n){console.error("Error updating real-time data:",n)}},this.updateInterval)}stopRealTimeUpdates(){this.subscribers.clear()}}const br=new kw,xl=(i={})=>{const{autoRefresh:n=!0,refreshInterval:r=3e4,enableSubscriptions:s=!0}=i,[l,c]=G.useState({globalStats:null,educationalTrends:null,liveMetrics:null,marketInsights:null,isLoading:!0,error:null,lastUpdated:null}),u=G.useCallback(async()=>{try{c(j=>({...j,isLoading:!0,error:null}));const[k,w,C,S]=await Promise.all([br.getGlobalLearningStats(),br.getEducationalTrends(),br.getLiveUserMetrics(),br.getMarketInsights()]);c({globalStats:k,educationalTrends:w,liveMetrics:C,marketInsights:S,isLoading:!1,error:null,lastUpdated:new Date})}catch(k){c(w=>({...w,isLoading:!1,error:k instanceof Error?k.message:"Failed to load real-time data"}))}},[]),h=G.useCallback(async()=>{try{const k=await br.getGlobalLearningStats();c(w=>({...w,globalStats:k,lastUpdated:new Date}))}catch(k){console.error("Failed to refresh global stats:",k)}},[]),m=G.useCallback(async()=>{try{const k=await br.getEducationalTrends();c(w=>({...w,educationalTrends:k,lastUpdated:new Date}))}catch(k){console.error("Failed to refresh educational trends:",k)}},[]),g=G.useCallback(async()=>{try{const k=await br.getLiveUserMetrics();c(w=>({...w,liveMetrics:k,lastUpdated:new Date}))}catch(k){console.error("Failed to refresh live metrics:",k)}},[]),y=G.useCallback(async()=>{try{const k=await br.getMarketInsights();c(w=>({...w,marketInsights:k,lastUpdated:new Date}))}catch(k){console.error("Failed to refresh market insights:",k)}},[]),x=G.useCallback(()=>{u()},[u]);return G.useEffect(()=>{u();let k=null;const w=[];if(s){const C=br.subscribe("globalStats",E=>{c(P=>({...P,globalStats:E,lastUpdated:new Date}))}),S=br.subscribe("educationalTrends",E=>{c(P=>({...P,educationalTrends:E,lastUpdated:new Date}))}),j=br.subscribe("liveMetrics",E=>{c(P=>({...P,liveMetrics:E,lastUpdated:new Date}))}),_=br.subscribe("marketInsights",E=>{c(P=>({...P,marketInsights:E,lastUpdated:new Date}))});w.push(C,S,j,_),br.startRealTimeUpdates()}return n&&(k=setInterval(()=>{u()},r)),()=>{w.forEach(C=>C()),k&&clearInterval(k)}},[u,n,r,s]),{...l,refresh:x,refreshGlobalStats:h,refreshEducationalTrends:m,refreshLiveMetrics:g,refreshMarketInsights:y,formatNumber:k=>k>=1e6?`${(k/1e6).toFixed(1)}M`:k>=1e3?`${(k/1e3).toFixed(1)}K`:k.toString(),formatTime:k=>{const w=Math.floor(k/60),C=k%60;return w>0?`${w}h ${C}m`:`${C}m`},getTimeSinceUpdate:()=>{if(!l.lastUpdated)return"Never";const w=new Date().getTime()-l.lastUpdated.getTime(),C=Math.floor(w/1e3),S=Math.floor(C/60);return S>0?`${S}m ago`:`${C}s ago`}}},_w=()=>{const{educationalTrends:i,isLoading:n,error:r,refreshEducationalTrends:s}=xl({enableSubscriptions:!0,autoRefresh:!0,refreshInterval:6e4});return{data:i,isLoading:n,error:r,refresh:s}},Sw=()=>{const{marketInsights:i,isLoading:n,error:r,refreshMarketInsights:s}=xl({enableSubscriptions:!0,autoRefresh:!0,refreshInterval:3e5});return{data:i,isLoading:n,error:r,refresh:s}},jw=({title:i,icon:n,className:r="",showRefreshButton:s=!0,compact:l=!1})=>{const{globalStats:c,liveMetrics:u,isLoading:h,error:m,refresh:g,formatNumber:y,formatTime:x,getTimeSinceUpdate:k}=xl(),[w,C]=G.useState(!1),S=async()=>{C(!0),await g(),setTimeout(()=>C(!1),1e3)};return h&&!c?a.jsx("div",{className:`card p-6 ${r}`,children:a.jsxs("div",{className:"animate-pulse",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-32"}),a.jsx("div",{className:"h-4 w-4 bg-gray-300 dark:bg-gray-600 rounded"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-600 rounded w-20"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24"})]})]})}):m?a.jsxs("div",{className:`card p-6 border-red-200 dark:border-red-800 ${r}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:[n," ",i]}),s&&a.jsx("button",{onClick:S,className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",disabled:w,children:a.jsx("span",{className:w?"animate-spin":"",children:"🔄"})})]}),a.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Failed to load real-time data"}),a.jsx("button",{onClick:S,className:"mt-2 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline",children:"Try again"})]}):a.jsxs("div",{className:`card p-6 ${r}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:`font-semibold flex items-center gap-2 ${l?"text-base":"text-lg"}`,children:[n," ",i,a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),s&&a.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",disabled:w,title:"Refresh data",children:a.jsx("span",{className:w?"animate-spin":"",children:"🔄"})})]}),c&&u&&a.jsxs("div",{className:`space-y-${l?"2":"4"}`,children:[a.jsxs("div",{className:`grid grid-cols-2 ${l?"gap-2":"gap-4"}`,children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`font-bold text-blue-600 ${l?"text-lg":"text-2xl"}`,children:y(c.activeStudySessions)}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 ${l?"text-xs":"text-sm"}`,children:"Active Sessions"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`font-bold text-green-600 ${l?"text-lg":"text-2xl"}`,children:y(u.onlineUsers)}),a.jsx("div",{className:`text-gray-600 dark:text-gray-400 ${l?"text-xs":"text-sm"}`,children:"Online Users"})]})]}),!l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:y(c.cardsStudiedToday)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cards Today"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[u.averageAccuracy.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Accuracy"})]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:x(c.studyTimeToday)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Global Study Time Today"})]})]}),a.jsxs("div",{className:`text-center text-gray-500 dark:text-gray-400 ${l?"text-xs":"text-sm"}`,children:["Updated ",k()]})]})]})},Nw=({className:i="",maxItems:n=8,showGrowth:r=!0})=>{const{data:s,isLoading:l,error:c,refresh:u}=_w();if(l)return a.jsx("div",{className:`card p-6 ${i}`,children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-48 mb-4"}),a.jsx("div",{className:"space-y-3",children:[...Array(4)].map((y,x)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-32"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-16"})]},x))})]})});if(c||!s)return a.jsxs("div",{className:`card p-6 border-red-200 dark:border-red-800 ${i}`,children:[a.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"📈 Trending Topics"}),a.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 mb-2",children:"Failed to load trending data"}),a.jsx("button",{onClick:u,className:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline",children:"Try again"})]});const h=y=>y>=1e6?`${(y/1e6).toFixed(1)}M`:y>=1e3?`${(y/1e3).toFixed(1)}K`:y.toString(),m=y=>y>=100?"text-green-600 dark:text-green-400":y>=50?"text-blue-600 dark:text-blue-400":y>=20?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-400",g=y=>y>=100?"🚀":y>=50?"📈":y>=20?"⬆️":"➡️";return a.jsxs("div",{className:`card p-6 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["📈 Trending Topics",a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Refresh trends",children:"🔄"})]}),a.jsx("div",{className:"space-y-3",children:s.popularSubjects.slice(0,n).map((y,x)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:x+1}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:y.subject}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h(y.learners)," learners"]})]})]}),r&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:g(y.growth)}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`font-bold ${m(y.growth)}`,children:["+",y.growth.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"growth"})]})]})]},y.subject))}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold mb-3 text-gray-800 dark:text-gray-200",children:"🎯 Most Effective Methods"}),a.jsx("div",{className:"space-y-2",children:s.learningMethods.slice(0,3).map(y=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:y.method}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${y.effectiveness}%`}})}),a.jsxs("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[y.effectiveness.toFixed(0),"%"]})]})]},y.method))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold mb-3 text-gray-800 dark:text-gray-200",children:"⏰ Peak Study Hours Today"}),a.jsx("div",{className:"flex items-end justify-between gap-1 h-16",children:s.studyPatterns.peakHours.filter((y,x)=>x%2===0).map(y=>a.jsxs("div",{className:"flex flex-col items-center flex-1",children:[a.jsx("div",{className:"bg-gradient-to-t from-blue-600 to-blue-400 rounded-sm w-full",style:{height:`${Math.max(y.activity/2,8)}px`},title:`${y.hour}:00 - ${y.activity}% activity`}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[y.hour,"h"]})]},y.hour))}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:["Current hour activity: ",s.studyPatterns.peakHours[new Date().getHours()]?.activity||0,"%"]})]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-4",children:["Last updated: ",new Date(s.lastUpdated).toLocaleTimeString()]})]})},Ew=({className:i="",maxSkills:n=6,maxIndustries:r=4,showCertifications:s=!0})=>{const{data:l,isLoading:c,error:u,refresh:h}=Sw();if(c)return a.jsx("div",{className:`card p-6 ${i}`,children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded w-48 mb-4"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-3",children:[...Array(3)].map((x,k)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-24"}),a.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded w-16"})]},k))}),a.jsx("div",{className:"space-y-3",children:[...Array(3)].map((x,k)=>a.jsx("div",{className:"h-16 bg-gray-300 dark:bg-gray-600 rounded"},k))})]})]})});if(u||!l)return a.jsxs("div",{className:`card p-6 border-red-200 dark:border-red-800 ${i}`,children:[a.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4",children:"💼 Market Insights"}),a.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 mb-2",children:"Failed to load market data"}),a.jsx("button",{onClick:h,className:"text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 underline",children:"Try again"})]});const m=x=>x>=90?"text-red-600 dark:text-red-400":x>=80?"text-orange-600 dark:text-orange-400":x>=70?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400",g=x=>x>=90?"Very High":x>=80?"High":x>=70?"Medium":"Growing",y=x=>x>=150?"🚀":x>=100?"📈":x>=50?"⬆️":"➡️";return a.jsxs("div",{className:`card p-6 ${i}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["💼 Market Insights",a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Refresh market data",children:"🔄"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:"🎯 Skills in High Demand"}),a.jsx("div",{className:"space-y-3",children:l.skillDemand.slice(0,n).map((x,k)=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:k+1}),a.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:x.skill})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:y(x.growth)}),a.jsxs("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["+",x.growth.toFixed(0),"%"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 mr-3",children:a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${x.demand}%`}})})}),a.jsx("span",{className:`text-sm font-semibold ${m(x.demand)}`,children:g(x.demand)})]})]},x.skill))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-semibold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:"🏭 Growing Industries"}),a.jsx("div",{className:"space-y-3",children:l.industryTrends.slice(0,r).map((x,k)=>a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h5",{className:"font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:k+1}),x.industry]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-lg",children:y(x.growth)}),a.jsxs("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["+",x.growth.toFixed(0),"%"]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("span",{className:"font-medium",children:"Key Skills: "}),x.skills.join(", ")]})]},x.industry))})]})]}),s&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold mb-4 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:"🏆 Most Valuable Certifications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:l.certificationValue.slice(0,4).map((x,k)=>a.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xs",children:k+1}),a.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:x.cert})]})}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Value:"}),a.jsx("div",{className:"w-12 bg-gray-200 dark:bg-gray-600 rounded-full h-1.5",children:a.jsx("div",{className:"bg-yellow-500 h-1.5 rounded-full",style:{width:`${x.value}%`}})}),a.jsxs("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:[x.value.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Popular:"}),a.jsxs("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:[x.popularity.toFixed(0),"%"]})]})]})]},x.cert))})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("h5",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2",children:"💡 Market Summary"}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[a.jsxs("p",{children:["• AI/ML skills show the highest demand with ",l.skillDemand[0]?.growth.toFixed(0),"% growth"]}),a.jsxs("p",{children:["• Technology sector leads with ",l.industryTrends[0]?.growth.toFixed(0),"% industry growth"]}),a.jsx("p",{children:"• Cloud certifications offer the best ROI for career advancement"}),a.jsx("p",{children:"• Remote learning skills are becoming increasingly valuable"})]})]})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-4",children:["Market data updated: ",new Date(l.lastUpdated).toLocaleTimeString()]})]})},Cw=()=>{const{globalStats:i,liveMetrics:n,isLoading:r,error:s,lastUpdated:l,refresh:c,formatNumber:u,formatTime:h,getTimeSinceUpdate:m}=xl();return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gradient mb-4",children:"🌍 Global Learning Statistics"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"Real-time insights from the global learning community"}),a.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Live data"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{children:["Last updated: ",l?m():"Loading..."]}),a.jsx("button",{onClick:c,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",disabled:r,title:"Refresh all data",children:a.jsx("span",{className:r?"animate-spin":"",children:"🔄"})})]})]})]}),s&&a.jsx("div",{className:"card p-6 border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-2xl",children:"⚠️"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200",children:"Connection Issue"}),a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s})]})]}),a.jsx("button",{onClick:c,className:"btn btn-sm bg-red-600 hover:bg-red-700 text-white",children:"Retry"})]})}),i&&n&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:u(i.totalLearners)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Learners"}),a.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["+",Math.floor(Math.random()*1e3)," today"]})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:u(i.cardsStudiedToday)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cards Studied Today"}),a.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[h(i.studyTimeToday)," total time"]})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:u(n.onlineUsers)}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Online Now"}),a.jsxs("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:[u(n.studyingSessions)," studying"]})]}),a.jsxs("div",{className:"card p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:i.languagesBeingLearned}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Languages"}),a.jsxs("div",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:[n.averageAccuracy.toFixed(1),"% avg accuracy"]})]})]}),i&&a.jsxs("div",{className:"card p-6",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:["🏆 Most Popular Subjects Worldwide",a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:i.topSubjects.map((g,y)=>a.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-1",children:["#",y+1]}),a.jsx("div",{className:"font-semibold text-lg mb-2",children:g.name}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u(g.learners)," learners"]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(20,100-y*15)}%`}})})]},g.name))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx(jw,{title:"Live Activity Monitor",icon:"📊",className:"lg:col-span-1",showRefreshButton:!0}),n&&a.jsxs("div",{className:"card p-6 lg:col-span-2",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:["🌟 Top Performers Today",a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.topPerformers.map((g,y)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${y===0?"bg-gradient-to-r from-yellow-400 to-orange-500":y===1?"bg-gradient-to-r from-gray-400 to-gray-600":y===2?"bg-gradient-to-r from-orange-400 to-red-500":"bg-gradient-to-r from-blue-400 to-purple-500"}`,children:y+1}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:g.username}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1",children:["🌍 ",g.country]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:u(g.score)}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"XP"})]})]},g.username))})]})]}),a.jsx(Nw,{maxItems:8,showGrowth:!0}),a.jsx(Ew,{maxSkills:8,maxIndustries:6,showCertifications:!0}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:"📈 Learning Velocity"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Cards per minute (global)"}),a.jsx("span",{className:"font-bold text-blue-600",children:i?Math.floor(i.cardsStudiedToday/(i.studyTimeToday||1)).toLocaleString():"0"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Peak learning hour"}),a.jsx("span",{className:"font-bold text-green-600",children:"7-9 PM UTC"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Most active timezone"}),a.jsx("span",{className:"font-bold text-purple-600",children:"UTC+8 (Asia)"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Weekend vs Weekday"}),a.jsx("span",{className:"font-bold text-orange-600",children:"+23% weekdays"})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:"🎯 Learning Effectiveness"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Global retention rate"}),a.jsxs("span",{className:"font-bold text-green-600",children:[n?n.averageAccuracy.toFixed(1):"0","%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Optimal session length"}),a.jsx("span",{className:"font-bold text-blue-600",children:"25 minutes"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Spaced repetition usage"}),a.jsx("span",{className:"font-bold text-purple-600",children:"78% of users"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Mobile vs Desktop"}),a.jsx("span",{className:"font-bold text-orange-600",children:"65% mobile"})]})]})]})]}),a.jsxs("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 flex items-center gap-2",children:["🌍 Global Learning Community",a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i?u(i.totalLearners):"2.8M+"}),a.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Global Learners"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:i?u(i.cardsStudiedToday):"15M+"}),a.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Cards Studied Today"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n?u(n.studyingSessions):"23K+"}),a.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Active Sessions"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:i?i.languagesBeingLearned:"127"}),a.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Languages"})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("h2",{className:"text-2xl font-bold mb-0",children:"💼 Skills in Demand"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:"🚀 AI/ML"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+156% growth"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:"☁️ Cloud"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+134% growth"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:"🔒 Security"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+129% growth"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:"📊 Data Science"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+118% growth"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:"🌐 DevOps"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+112% growth"})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-lg font-bold text-pink-600 dark:text-pink-400",children:"🎨 UX/UI"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"+98% growth"})]})]})]}),a.jsxs("div",{className:"card p-6 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-800 dark:to-blue-900/20 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200 flex items-center gap-2",children:"📡 Data Sources & Methodology"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Learning Platforms"}),a.jsx("div",{children:"• Educational APIs"}),a.jsx("div",{children:"• Learning Management Systems"}),a.jsx("div",{children:"• Online Course Providers"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Market Data"}),a.jsx("div",{children:"• Job Market APIs"}),a.jsx("div",{children:"• Skills Demand Analytics"}),a.jsx("div",{children:"• Industry Reports"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Real-time Metrics"}),a.jsx("div",{children:"• User Activity Streams"}),a.jsx("div",{children:"• Performance Analytics"}),a.jsx("div",{children:"• Engagement Tracking"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Update Frequency"}),a.jsx("div",{children:"• Live metrics: 10s"}),a.jsx("div",{children:"• Global stats: 30s"}),a.jsx("div",{children:"• Market data: 5m"})]})]})]})]})},Tw=()=>{const i=[{mapId:"europe-test",countryId:"MT",countryName:"Malta",svgPath:"/europe.svg"},{mapId:"world-test",countryId:"SG",countryName:"Singapore",svgPath:"/world.svg"},{mapId:"us-test",countryId:"DE",countryName:"Delaware",svgPath:"/us.svg"}];return a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Map Zoom Test Page"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Test the new zoom functionality on map cards. Try zooming in to see small countries more clearly!"})]}),a.jsx("div",{className:"space-y-12",children:i.map((n,r)=>a.jsxs("div",{className:"border rounded-lg p-6 bg-white dark:bg-gray-800",children:[a.jsxs("h2",{className:"text-xl font-semibold mb-4 text-center",children:[n.mapId.replace("-test","").toUpperCase()," Map - Find ",n.countryName]}),a.jsxs("div",{className:"mb-4 text-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Auto-Zoom Features:"}),a.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Automatic Initial Zoom:"})," Small countries automatically zoom to at least 10x10 pixels"]}),a.jsx("li",{children:"Use the zoom controls (+ / - / reset) in the top-right corner"}),a.jsx("li",{children:"Scroll with mouse wheel to zoom in/out"}),a.jsx("li",{children:"Drag to pan when zoomed in"}),a.jsx("li",{children:"Touch gestures supported on mobile"})]})]}),a.jsx(xg,{options:n,showAnswer:!1,isStudyMode:!0,onAnswer:s=>{alert(s?"Correct!":"Try again!")}})]},r))}),a.jsxs("div",{className:"mt-12 p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Zoom Features Added:"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Zoom Controls:"})," Buttons for zoom in, zoom out, and reset view"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Mouse Wheel Zoom:"})," Scroll to zoom in and out"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Pan Support:"})," Drag to move around when zoomed in"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Touch Support:"})," Touch gestures for mobile devices"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Zoom Indicator:"})," Shows current zoom level"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Instructions:"})," Helpful text to guide users"]}),a.jsxs("li",{children:["✅ ",a.jsx("strong",{children:"Auto Reset:"})," Zoom resets when switching to a new country"]})]})]})]})};let Qn=!1;function Aw(){const i=Pa(),{updatePassword:n,session:r,isAuthenticated:s,isLoading:l,error:c}=rn(),[u,h]=G.useState(""),[m,g]=G.useState(""),[y,x]=G.useState(""),[k,w]=G.useState(!1),[C,S]=G.useState({}),[j,_]=G.useState(!1);G.useEffect(()=>{const P=Math.random().toString(36).substr(2,9);ce.log("[RESET_PASSWORD]",`START - Component mounted (ID: ${P})`,{globalSessionEstablishing:Qn,currentTime:new Date().toISOString()});const D=window.location.href;ce.logUrl("[RESET_PASSWORD]","Current URL analysis",D);const M=new URLSearchParams(window.location.hash.substring(1)),z=new URLSearchParams(window.location.search),q={};ce.group("[RESET_PASSWORD]","Extracting tokens from hash",()=>{M.forEach((Z,T)=>{ce.log("[RESET_PASSWORD]",`Hash param found: ${T}`,Z),q[`hash_${T}`]=Z})}),ce.group("[RESET_PASSWORD]","Extracting tokens from search",()=>{z.forEach((Z,T)=>{ce.log("[RESET_PASSWORD]",`Search param found: ${T}`,Z),q[`search_${T}`]=Z})});const ne=M.get("access_token")||z.get("access_token"),ee=M.get("refresh_token")||z.get("refresh_token"),fe=M.get("type")||z.get("type"),pe=M.get("error")||z.get("error"),B=M.get("error_description")||z.get("error_description");if(ce.logTokens("[RESET_PASSWORD]","Auth tokens extracted",{accessToken:ne,refreshToken:ee,type:fe,error:pe,errorDescription:B,tokenCount:Object.keys(q).length}),ce.log("[RESET_PASSWORD]","Raw URL breakdown",{fullUrl:D,hash:window.location.hash,search:window.location.search,hashLength:window.location.hash.length,searchLength:window.location.search.length}),S(q),pe){ce.error("[RESET_PASSWORD]","URL contains error",{error:pe,description:B}),x(B||pe);return}if(ne&&ee&&fe==="recovery"&&!Qn){ce.log("[RESET_PASSWORD]","Recovery tokens found - forcing session establishment",{hasAccessToken:!!ne,hasRefreshToken:!!ee,type:fe,accessTokenPreview:ne?`${ne.slice(0,20)}...`:"null",refreshTokenPreview:ee?`${ee.slice(0,20)}...`:"null"}),Qn=!0,_(!0),ce.log("[RESET_PASSWORD]","Forcing session with tokens - immediate execution"),ce.log("[RESET_PASSWORD]","setSession call dispatched immediately - BEFORE promise creation");const Z=Xt.auth.setSession({access_token:ne,refresh_token:ee});ce.log("[RESET_PASSWORD]","setSession promise created - monitoring resolution"),Z.then(T=>{ce.log("[RESET_PASSWORD]","setSession RESOLVED successfully",{hasData:!!T.data,hasError:!!T.error,hasSession:!!T.data?.session,errorMessage:T.error?.message,sessionData:T.data?.session?{userId:T.data.session.user?.id,email:T.data.session.user?.email,hasAccessToken:!!T.data.session.access_token}:null}),T.error?(ce.error("[RESET_PASSWORD]","Session establishment failed",T.error),Qn&&x("Invalid or expired reset link. Please request a new password reset.")):ce.log("[RESET_PASSWORD]","Session established successfully - auth events should follow"),Qn=!1,_(!1)}).catch(T=>{ce.error("[RESET_PASSWORD]","setSession REJECTED with exception",{error:T,message:T?.message,stack:T?.stack}),Qn&&x("Failed to process reset link. Please try again."),Qn=!1,_(!1)}),ce.log("[RESET_PASSWORD]","setSession call dispatched immediately - END of sync execution")}else ce.warn("[RESET_PASSWORD]","No recovery tokens found in URL",{hasAccessToken:!!ne,hasRefreshToken:!!ee,type:fe||"null",urlHasHash:window.location.hash.length>0,urlHasSearch:window.location.search.length>0});return ce.logSession("[RESET_PASSWORD]","Initial session state",r),ce.log("[RESET_PASSWORD]","Initial auth state",{isAuthenticated:s,isLoading:l,hasSession:!!r}),()=>{ce.log("[RESET_PASSWORD]",`END - Component unmounting (ID: ${P})`,{globalSessionEstablishing:Qn,sessionEstablishing:j,currentTime:new Date().toISOString()})}},[r,s,l,j]),G.useEffect(()=>{r&&ce.logSession("[RESET_PASSWORD]","New session detected",r)},[r]),G.useEffect(()=>{c&&(ce.error("[RESET_PASSWORD]","Auth error received",{error:c,timestamp:new Date().toISOString()}),x(c))},[c]),G.useEffect(()=>{y&&ce.warn("[RESET_PASSWORD]","Error state changed",{error:y,timestamp:new Date().toISOString()})},[y]);const E=async P=>{if(P.preventDefault(),ce.log("[RESET_PASSWORD]","START - Form submission",{passwordLength:u.length,passwordsMatch:u===m,hasSession:!!r,isAuthenticated:s}),x(""),u!==m){const D="Passwords do not match";ce.warn("[RESET_PASSWORD]","Validation failed",{error:D}),x(D);return}if(u.length<6){const D="Password must be at least 6 characters long";ce.warn("[RESET_PASSWORD]","Validation failed",{error:D}),x(D);return}try{ce.log("[RESET_PASSWORD]","Calling updatePassword",{passwordLength:u.length,timestamp:new Date().toISOString()}),await n(u),ce.log("[RESET_PASSWORD]","Password update successful",{timestamp:new Date().toISOString()}),w(!0),ce.log("[RESET_PASSWORD]","Redirecting to home in 2 seconds"),setTimeout(()=>{ce.log("[RESET_PASSWORD]","Executing redirect to home"),i("/")},2e3)}catch(D){const M=D instanceof Error?D.message:"Failed to update password";ce.error("[RESET_PASSWORD]","Password update failed",{error:M,errorType:D?.constructor?.name,errorDetails:D,timestamp:new Date().toISOString()}),x(M)}ce.log("[RESET_PASSWORD]","END - Form submission")};return l&&!s?a.jsx("div",{children:"Loading..."}):k?(ce.log("[RESET_PASSWORD]","Showing success state"),a.jsxs("div",{children:[a.jsx("h1",{children:"Password Updated!"}),a.jsx("p",{children:"Your password has been successfully updated. Redirecting to login..."})]})):a.jsxs("div",{children:[a.jsx("h2",{children:"Reset Your Password"}),a.jsxs("form",{onSubmit:E,children:[y&&a.jsx("p",{style:{color:"red"},children:y}),a.jsx("input",{type:"password",placeholder:"New password",value:u,onChange:P=>h(P.target.value),required:!0}),a.jsx("input",{type:"password",placeholder:"Confirm new password",value:m,onChange:P=>g(P.target.value),required:!0}),a.jsx("button",{type:"submit",disabled:l,children:l?"Updating...":"Update Password"})]}),!1]})}function Pw(){const i=Pa(),{session:n,isAuthenticated:r}=rn();return G.useEffect(()=>{ce.log("[RESET_PASSWORD]","Debug Log Test Page mounted"),(()=>{const l=window.location.origin,c={access_token:"mock-access-token-12345",refresh_token:"mock-refresh-token-67890",type:"recovery"},u=new URLSearchParams(c).toString(),h=`${l}/reset-password#${u}`;ce.log("[RESET_PASSWORD]","Simulated password reset URL",{fullUrl:h,tokens:c}),ce.logSession("[RESET_PASSWORD]","Current session state",n),ce.info("[RESET_PASSWORD]","Testing info log level"),ce.warn("[RESET_PASSWORD]","Testing warn log level"),ce.error("[RESET_PASSWORD]","Testing error log level",{error:new Error("Test error"),code:"TEST_ERROR"}),ce.logUrl("[RESET_PASSWORD]","Testing URL logging",h),ce.logTokens("[RESET_PASSWORD]","Testing token logging",c),ce.group("[RESET_PASSWORD]","Testing grouped logs",()=>{console.log("Inside group 1"),console.log("Inside group 2"),console.log("Inside group 3")})})()},[n]),a.jsxs("div",{style:{padding:"2rem"},children:[a.jsx("h1",{children:"Debug Log Test Page"}),a.jsx("p",{children:"Open your browser's console to see the debug logs."}),a.jsxs("div",{style:{marginTop:"2rem"},children:[a.jsx("h2",{children:"Current Auth State:"}),a.jsx("pre",{style:{background:"#f0f0f0",padding:"1rem",borderRadius:"4px"},children:JSON.stringify({isAuthenticated:r,hasSession:!!n,userId:n?.user?.id,userEmail:n?.user?.email},null,2)})]}),a.jsxs("div",{style:{marginTop:"2rem"},children:[a.jsx("h3",{children:"Instructions to test password reset flow:"}),a.jsxs("ol",{children:[a.jsx("li",{children:"Open browser console (F12)"}),a.jsx("li",{children:"Look for logs with prefixes: [RESET_PASSWORD], [AUTH_STORE], [SUPABASE]"}),a.jsx("li",{children:"Navigate to the actual reset password page with a valid token"}),a.jsx("li",{children:"Observe the detailed logging output"})]})]}),a.jsx("button",{onClick:()=>i("/reset-password"),style:{marginTop:"1rem",padding:"0.5rem 1rem"},children:"Go to Reset Password Page"})]})}function Rw(){const{theme:i,initializeTheme:n}=Zm(),{initializeAuth:r}=rn(),[s,l]=G.useState(navigator.onLine),[c,u]=G.useState(!1),{needRefresh:[,h],updateServiceWorker:m}=my({onRegistered(y){console.log("SW Registered: ",y)},onRegisterError(y){console.log("SW registration error",y)},onNeedRefresh(){u(!0)}});G.useEffect(()=>{n(),r(),i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");const y=()=>l(!0),x=()=>l(!1);return window.addEventListener("online",y),window.addEventListener("offline",x),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",x)}},[i,n,r]);const g=()=>{m(!0),u(!1),h(!1)};return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[!s&&a.jsx("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-white px-4 py-2 text-center text-sm z-50",children:"⚠️ You're currently offline. Some features may be limited."}),c&&a.jsxs("div",{className:"fixed top-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:[a.jsx("p",{className:"mb-3",children:"A new version of StudyMaster is available!"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:g,className:"bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100",children:"Update Now"}),a.jsx("button",{onClick:()=>u(!1),className:"bg-blue-700 text-white px-3 py-1 rounded text-sm hover:bg-blue-800",children:"Later"})]})]}),a.jsxs(Z0,{children:[a.jsx(kr,{path:"/reset-password",element:a.jsx(Aw,{})}),a.jsx(kr,{path:"/debug-log-test",element:a.jsx(Pw,{})}),a.jsxs(kr,{path:"*",element:a.jsx(Ox,{}),children:[a.jsx(kr,{index:!0,element:a.jsx(Hx,{})}),a.jsx(kr,{path:"study",element:a.jsx(hm,{})}),a.jsx(kr,{path:"study/:deckId",element:a.jsx(hm,{})}),a.jsx(kr,{path:"decks",element:a.jsx(uw,{})}),a.jsx(kr,{path:"profile",element:a.jsx(yw,{})}),a.jsx(kr,{path:"leaderboard",element:a.jsx(vw,{})}),a.jsx(kr,{path:"challenges",element:a.jsx(bw,{})}),a.jsx(kr,{path:"global-stats",element:a.jsx(Cw,{})}),a.jsx(kr,{path:"map-test",element:a.jsx(Tw,{})})]})]})]})}const Iw=new Xp({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*30,retry:2,refetchOnWindowFocus:!1}}});Op.createRoot(document.getElementById("root")).render(a.jsx(dl.StrictMode,{children:a.jsx(n0,{client:Iw,children:a.jsx(sy,{children:a.jsx(Rw,{})})})}));
//# sourceMappingURL=index-PU4unV5s.js.map
